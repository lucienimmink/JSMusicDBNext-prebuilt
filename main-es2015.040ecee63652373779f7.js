(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+ooL":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("XNiG"),r=s("fXoL");let n=(()=>{class t{constructor(){this.colorSource=new i.a,this.blobSource=new i.a,this.color$=this.colorSource.asObservable(),this.blob$=this.blobSource.asObservable()}setColor(t){this.colorSource.next(t)}setBlob(){this.blobSource.next(!0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})()},"/1T7":function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(t){this.tracks=[],this.discs=[],this.sortedDiscs=[],this.modified=0,this.isContinues=!0,t.album&&t.title&&(this.name=t.album,this.sortName=this.name.toUpperCase(),this.year=t.year,this.modified=t.modified,this.year&&-1!==this.year.indexOf("-")&&(this.year=this.year.split("-")[0]))}url(){return`/letter/${this.artist.letter.escapedLetter}/artist/${encodeURIComponent(this.artist.name)}/album/${encodeURIComponent(this.name)}`}}},0:function(t,e,s){t.exports=s("zUnb")},"1gFc":function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var i=s("fXoL");let r=(()=>{class t{requestAnimation(t="enter",e,s=!0){e&&(e.classList.contains(t)&&e.classList.remove(t),setTimeout(()=>{e.classList.add(t)},10),s&&setTimeout(()=>{e.classList.remove(t)},150))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})()},Gcu2:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var i=s("XNiG"),r=s("LNEh"),n=s("ktVm"),a=s("t083"),o=s("KI15"),c=s("fXoL");let l=(()=>{class t{constructor(t,e){this.coreService=t,this.lastfmservice=e,this.playlistSubject=new i.a,this.playlistAnnounced$=this.playlistSubject.asObservable(),this.numberOfTracksInAPlaylist=100,this.username=localStorage.getItem("lastfm-username"),this.core=this.coreService.getCore()}generateRandom(){const t=Object.keys(this.core.tracks),e=this.shuffle(t).splice(0,this.numberOfTracksInAPlaylist),s=new o.a;return s.name=`${this.numberOfTracksInAPlaylist} random tracks`,e.map(t=>{s.tracks.push(this.core.tracks[t])}),s}generateRadio(){this.lastfmservice.getTopArtists(this.username).subscribe(t=>{this.playlistSubject.next(this.extractArtists(t))})}extractTracks(t){const e=new o.a;return e.name="Loved tracks on Last.FM",t.map(t=>{const s=this.core.getTrackByArtistAndName(t.artist.name,t.name);s&&e.tracks.push(s)}),e}extractArtists(t){const e=[],s=[];return t.forEach((t,i)=>{t.dummy=!0;const n=new r.a(t),a=this.core.artists[n.sortName];a&&i<10?e.push(a):s.push(a)}),this.generateRadioList(e,s)}generateRadioList(t,e){const s=new o.a;s.name=`${this.numberOfTracksInAPlaylist} random tracks based on your recently listened tracks`;for(let i=0;i<this.numberOfTracksInAPlaylist;i++)s.tracks.push(this.getRandomTrackFromList(i%3==0||i%5==0?t:i%4==0||i%7==0?e:this.core.artistsList()));return s}getRandomTrackFromList(t){const e=this.shuffle(t)[0];if(e){const s=this.shuffle(e.albums)[0],i=this.shuffle(s.tracks)[0];return i.duration<=6e5?i:this.getRandomTrackFromList(t)}return this.getRandomTrackFromList(t)}shuffle(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[s],t[s]=i}return t}getNextTrackForPlaylist(t,e){const s=this.getRandomTrackFromList(t);if(s){const i=s.artist;return e.tracks.length>1&&e.tracks[e.tracks.length-1].artist===i&&t.length>1?this.getNextTrackForPlaylist(t,e):s}return null}}return t.\u0275fac=function(e){return new(e||t)(c.Sb(n.a),c.Sb(a.a))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac}),t})()},KI15:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(){this.tracks=[],this.isOwn=!1,this.isContinues=!1}}},LNEh:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));class i{constructor(t){this.albums=[],(t.album&&t.title||t.dummy)&&(this.name=t.name||t.artist||"",this.albumArtist=t.albumartist||t.albumArtist||"",this.sortName=this.stripFromName(this.albumArtist?this.albumArtist.toUpperCase():t.sortName?t.sortName.toUpperCase():this.name.toUpperCase(),["the ",'"',"a "]),this.bio=t.bio,this.isCollection=!!this.albumArtist&&this.name!==this.albumArtist)}url(){return`/letter/${this.letter.escapedLetter}/artist/${encodeURIComponent(this.albumArtist||this.name)}/`}sortAlbumsBy(t="name",e="asc"){this.albums.sort((s,i)=>{if(-1!==t.indexOf(".")){const r=t.split(".");return s[r[0]][r[1]]<i[r[0]][r[1]]?"asc"===e?-1:1:s[r[0]][r[1]]>i[r[0]][r[1]]?"asc"===e?1:-1:0}return s[t]<i[t]?"asc"===e?-1:1:s[t]>i[t]?"asc"===e?1:-1:0})}sortAndReturnAlbumsBy(t="name",e="asc"){return this.sortAlbumsBy(t,e),this.albums}stripFromName(t,e){let s=t?t.toUpperCase():"";return s=s.trim(),e.forEach(t=>{const e=t.toUpperCase();0===s.indexOf(e)&&(s=s.substring(e.length))}),s}}},MDLy:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("z6cu"),r=s("JIr8"),n=s("Kj3r"),a=s("fXoL"),o=s("tk/3");let c=(()=>{class t{constructor(t){this.http=t,this.collectionUrl="/data/node-music.json",this.reloadUrl="/rescan",this.pollUrl="/progress",this.dsm=localStorage.getItem("dsm")}getCollection(){return this.dsm=localStorage.getItem("dsm"),this.http.get(this.dsm+this.collectionUrl).pipe(Object(r.a)(this.handleError))}reload(){const t=this.dsm+this.reloadUrl,e=localStorage.getItem("jwt");return this.http.get(`${t}?_ts=${(new Date).getTime()}&jwt=${e}`).pipe(Object(r.a)(this.handleError))}poll(){const t=this.dsm+this.pollUrl,e=localStorage.getItem("jwt");return this.http.get(`${t}?_ts=${(new Date).getTime()}&jwt=${e}`).pipe(Object(n.a)(300),Object(r.a)(this.handleError))}handleError(t){const e=t.message?t.message:t.status?`${t.status} - ${t.statusText}`:"Server error";return Object(i.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(o.a))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac}),t})()},OgP6:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("XNiG"),r=s("z6cu"),n=s("JIr8"),a=s("fXoL"),o=s("tk/3");let c=(()=>{class t{constructor(t){this.http=t,this.geoSource=new i.a,this.themeSource=new i.a,this.modeSource=new i.a,this.theme$=this.themeSource.asObservable(),this.mode$=this.modeSource.asObservable(),this.geo$=this.geoSource.asObservable(),this._theme=localStorage.getItem("theme")||"light",this._mode="light",this.counter=0,this.COUNTERTIMER=6e4}get theme(){return this._theme}get mode(){return this._mode}set theme(t){this._theme!==t&&(this._theme=t),"auto"!==this._theme||this.counter?"auto"===this._theme||(this.setStyleSheet(this._theme),clearInterval(this.counter),this.counter=0,this._mode=this._theme):(this.counter=setInterval(()=>{this.checkTheme()},this.COUNTERTIMER),this.checkTheme())}getSunriseInfo(t=51,e=5){return this.http.get(`https://api.sunrise-sunset.org/json?lat=${t}&lng=${e}&formatted=0`).pipe(Object(n.a)(this.handleError))}applyTheme(){"auto"===this._theme?(this.counter||(this.counter=setInterval(()=>{this.checkTheme()},this.COUNTERTIMER)),this.checkTheme(!0)):this.setStyleSheet(this._theme)}checkTheme(t=!1){const e=new Date;e<this.stopDate&&e>this.startDate&&"dark"!==this._mode?(this._mode="dark",this.setStyleSheet(this._mode)):(e>this.stopDate||e<this.startDate)&&"light"!==this._mode&&(this._mode="light",this.setStyleSheet(this._mode)),t&&this.setStyleSheet(this._mode)}handleError(t){return Object(r.a)(null)}setStyleSheet(t){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href","prod"!==window.ENV&&window.ENV?`/dist/sass/${t}.css`:`global/css/${t}.css`),e.setAttribute("id","customStylesheet");const s=document.getElementById("customStylesheet");s&&document.getElementsByTagName("head")[0].removeChild(s),document.getElementsByTagName("head")[0].appendChild(e),localStorage.setItem("theme",this._theme),localStorage.setItem("style",t),this.themeSource.next(this._theme),this.modeSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(o.a))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac}),t})()},XNvx:function(t,e,s){"use strict";var i=s("z6cu"),r=s("tk/3"),n=s("JIr8"),a={cipher:{},hash:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t}}};a.cipher.aes=function(t){this.h[0][0][0]||this.w();var e,s,i,r,n=this.h[0][4],o=this.h[1],c=1;if(4!==(e=t.length)&&6!==e&&8!==e)throw new a.exception.invalid("invalid aes key size");for(this.a=[i=t.slice(0),r=[]],t=e;t<4*e+28;t++)s=i[t-1],(t%e==0||8===e&&t%e==4)&&(s=n[s>>>24]<<24^n[s>>16&255]<<16^n[s>>8&255]<<8^n[255&s],t%e==0&&(s=s<<8^s>>>24^c<<24,c=c<<1^283*(c>>7))),i[t]=i[t-e]^s;for(e=0;t;e++,t--)s=i[3&e?t:t-4],r[e]=t<=4||e<4?s:o[0][n[s>>>24]]^o[1][n[s>>16&255]]^o[2][n[s>>8&255]]^o[3][n[255&s]]},a.cipher.aes.prototype={encrypt:function(t){return this.H(t,0)},decrypt:function(t){return this.H(t,1)},h:[[[],[],[],[],[]],[[],[],[],[],[]]],w:function(){var t,e,s,i,r,n,a,o=this.h[0],c=this.h[1],l=o[4],h=c[4],u=[],d=[];for(t=0;t<256;t++)d[(u[t]=t<<1^283*(t>>7))^t]=t;for(e=s=0;!l[e];e^=i||1,s=d[s]||1)for(l[e]=n=(n=s^s<<1^s<<2^s<<3^s<<4)>>8^255&n^99,h[n]=e,a=16843009*(r=u[t=u[i=u[e]]])^65537*t^257*i^16843008*e,r=257*u[n]^16843008*n,t=0;t<4;t++)o[t][e]=r=r<<24^r>>>8,c[t][n]=a=a<<24^a>>>8;for(t=0;t<5;t++)o[t]=o[t].slice(0),c[t]=c[t].slice(0)},H:function(t,e){if(4!==t.length)throw new a.exception.invalid("invalid aes block size");var s=this.a[e],i=t[0]^s[0],r=t[e?3:1]^s[1],n=t[2]^s[2];t=t[e?1:3]^s[3];var o,c,l,h,u=s.length/4-2,d=4,b=[0,0,0,0],m=(o=this.h[e])[0],p=o[1],g=o[2],f=o[3],y=o[4];for(h=0;h<u;h++)o=m[i>>>24]^p[r>>16&255]^g[n>>8&255]^f[255&t]^s[d],c=m[r>>>24]^p[n>>16&255]^g[t>>8&255]^f[255&i]^s[d+1],l=m[n>>>24]^p[t>>16&255]^g[i>>8&255]^f[255&r]^s[d+2],t=m[t>>>24]^p[i>>16&255]^g[r>>8&255]^f[255&n]^s[d+3],d+=4,i=o,r=c,n=l;for(h=0;h<4;h++)b[e?3&-h:h]=y[i>>>24]<<24^y[r>>16&255]<<16^y[n>>8&255]<<8^y[255&t]^s[d++],o=i,i=r,r=n,n=t,t=o;return b}},a.bitArray={bitSlice:function(t,e,s){return t=a.bitArray.P(t.slice(e/32),32-(31&e)).slice(1),void 0===s?t:a.bitArray.clamp(t,s-e)},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var s=t[t.length-1],i=a.bitArray.getPartial(s);return 32===i?t.concat(e):a.bitArray.P(e,i,0|s,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:32*(e-1)+a.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;var s=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,s>0&&e&&(t[s-1]=a.bitArray.partial(e,t[s-1]&2147483648>>e-1,1)),t},partial:function(t,e,s){return 32===t?e:(s?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(a.bitArray.bitLength(t)!==a.bitArray.bitLength(e))return!1;var s,i=0;for(s=0;s<t.length;s++)i|=t[s]^e[s];return 0===i},P:function(t,e,s,i){var r;for(r=0,void 0===i&&(i=[]);e>=32;e-=32)i.push(s),s=0;if(0===e)return i.concat(t);for(r=0;r<t.length;r++)i.push(s|t[r]>>>e),s=t[r]<<32-e;return t=a.bitArray.getPartial(r=t.length?t[t.length-1]:0),i.push(a.bitArray.partial(e+t&31,e+t>32?s:i.pop(),1)),i},k:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},a.codec.utf8String={fromBits:function(t){var e,s,i="",r=a.bitArray.bitLength(t);for(e=0;e<r/8;e++)0==(3&e)&&(s=t[e/4]),i+=String.fromCharCode(s>>>24),s<<=8;return decodeURIComponent(escape(i))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,s=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t.charCodeAt(e),3==(3&e)&&(s.push(i),i=0);return 3&e&&s.push(a.bitArray.partial(8*(3&e),i)),s}},a.codec.hex={fromBits:function(t){var e,s="";for(e=0;e<t.length;e++)s+=(0xf00000000000+(0|t[e])).toString(16).substr(4);return s.substr(0,a.bitArray.bitLength(t)/4)},toBits:function(t){var e,s,i=[];for(s=(t=t.replace(/\s|0x/g,"")).length,t+="00000000",e=0;e<t.length;e+=8)i.push(0^parseInt(t.substr(e,8),16));return a.bitArray.clamp(i,4*s)}},a.codec.base64={D:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e){var s,i="",r=0,n=a.codec.base64.D,o=0,c=a.bitArray.bitLength(t);for(s=0;6*i.length<c;)i+=n.charAt((o^t[s]>>>r)>>>26),r<6?(o=t[s]<<6-r,r+=26,s++):(o<<=6,r-=6);for(;3&i.length&&!e;)i+="=";return i},toBits:function(t){t=t.replace(/\s|=/g,"");var e,s,i=[],r=0,n=a.codec.base64.D,o=0;for(e=0;e<t.length;e++){if((s=n.indexOf(t.charAt(e)))<0)throw new a.exception.invalid("this isn't base64!");r>26?(i.push(o^s>>>(r-=26)),o=s<<32-r):o^=s<<32-(r+=6)}return 56&r&&i.push(a.bitArray.partial(56&r,o,1)),i}},a.hash.sha256=function(t){this.a[0]||this.w(),t?(this.n=t.n.slice(0),this.i=t.i.slice(0),this.e=t.e):this.reset()},a.hash.sha256.hash=function(t){return(new a.hash.sha256).update(t).finalize()},a.hash.sha256.prototype={blockSize:512,reset:function(){return this.n=this.N.slice(0),this.i=[],this.e=0,this},update:function(t){"string"==typeof t&&(t=a.codec.utf8String.toBits(t));var e,s=this.i=a.bitArray.concat(this.i,t);for(t=this.e=(e=this.e)+a.bitArray.bitLength(t),e=512+e&-512;e<=t;e+=512)this.C(s.splice(0,16));return this},finalize:function(){var t,e=this.i,s=this.n;for(t=(e=a.bitArray.concat(e,[a.bitArray.partial(1,1)])).length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.e/4294967296)),e.push(0|this.e);e.length;)this.C(e.splice(0,16));return this.reset(),s},N:[],a:[],w:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,s=0,i=2;t:for(;s<64;i++){for(e=2;e*e<=i;e++)if(i%e==0)continue t;s<8&&(this.N[s]=t(Math.pow(i,.5))),this.a[s]=t(Math.pow(i,1/3)),s++}},C:function(t){var e,s,i=t.slice(0),r=this.n,n=this.a,a=r[0],o=r[1],c=r[2],l=r[3],h=r[4],u=r[5],d=r[6],b=r[7];for(t=0;t<64;t++)e=(e=t<16?i[t]:i[15&t]=((e=i[t+1&15])>>>7^e>>>18^e>>>3^e<<25^e<<14)+((s=i[t+14&15])>>>17^s>>>19^s>>>10^s<<15^s<<13)+i[15&t]+i[t+9&15]|0)+b+(h>>>6^h>>>11^h>>>25^h<<26^h<<21^h<<7)+(d^h&(u^d))+n[t],b=d,d=u,u=h,h=l+e|0,l=c,c=o,a=e+((o=a)&c^l&(o^c))+(o>>>2^o>>>13^o>>>22^o<<30^o<<19^o<<10)|0;r[0]=r[0]+a|0,r[1]=r[1]+o|0,r[2]=r[2]+c|0,r[3]=r[3]+l|0,r[4]=r[4]+h|0,r[5]=r[5]+u|0,r[6]=r[6]+d|0,r[7]=r[7]+b|0}},a.mode.ccm={name:"ccm",encrypt:function(t,e,s,i,r){var n,o=e.slice(0),c=a.bitArray,l=c.bitLength(s)/8,h=c.bitLength(o)/8;if(r=r||64,i=i||[],l<7)throw new a.exception.invalid("ccm: iv must be at least 7 bytes");for(n=2;n<4&&h>>>8*n;n++);return n<15-l&&(n=15-l),s=c.clamp(s,8*(15-n)),e=a.mode.ccm.G(t,e,s,i,r,n),o=a.mode.ccm.I(t,o,s,e,r,n),c.concat(o.data,o.tag)},decrypt:function(t,e,s,i,r){r=r||64,i=i||[];var n=a.bitArray,o=n.bitLength(s)/8,c=n.bitLength(e),l=n.clamp(e,c-r),h=n.bitSlice(e,c-r);if(c=(c-r)/8,o<7)throw new a.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;e<4&&c>>>8*e;e++);if(e<15-o&&(e=15-o),s=n.clamp(s,8*(15-e)),l=a.mode.ccm.I(t,l,s,h,r,e),t=a.mode.ccm.G(t,l.data,s,i,r,e),!n.equal(l.tag,t))throw new a.exception.corrupt("ccm: tag doesn't match");return l.data},G:function(t,e,s,i,r,n){var o=[],c=a.bitArray,l=c.k;if((r/=8)%2||r<4||r>16)throw new a.exception.invalid("ccm: invalid tag length");if(i.length>4294967295||e.length>4294967295)throw new a.exception.bug("ccm: can't deal with 4GiB or more data");if(n=[c.partial(8,(i.length?64:0)|r-2<<2|n-1)],(n=c.concat(n,s))[3]|=c.bitLength(e)/8,n=t.encrypt(n),i.length)for((s=c.bitLength(i)/8)<=65279?o=[c.partial(16,s)]:s<=4294967295&&(o=c.concat([c.partial(16,65534)],[s])),o=c.concat(o,i),i=0;i<o.length;i+=4)n=t.encrypt(l(n,o.slice(i,i+4)));for(i=0;i<e.length;i+=4)n=t.encrypt(l(n,e.slice(i,i+4)));return c.clamp(n,8*r)},I:function(t,e,s,i,r,n){var o,c=a.bitArray;o=c.k;var l=e.length,h=c.bitLength(e);if(s=c.concat([c.partial(8,n-1)],s).concat([0,0,0]).slice(0,4),i=c.bitSlice(o(i,t.encrypt(s)),0,r),!l)return{tag:i,data:[]};for(o=0;o<l;o+=4)s[3]++,r=t.encrypt(s),e[o]^=r[0],e[o+1]^=r[1],e[o+2]^=r[2],e[o+3]^=r[3];return{tag:i,data:c.clamp(e,h)}}},a.mode.ocb2={name:"ocb2",encrypt:function(t,e,s,i,r,n){if(128!==a.bitArray.bitLength(s))throw new a.exception.invalid("ocb iv must be 128 bits");var o,c=a.mode.ocb2.A,l=a.bitArray,h=l.k,u=[0,0,0,0];s=c(t.encrypt(s));var d,b=[];for(i=i||[],r=r||64,o=0;o+4<e.length;o+=4)u=h(u,d=e.slice(o,o+4)),b=b.concat(h(s,t.encrypt(h(s,d)))),s=c(s);return d=e.slice(o),e=l.bitLength(d),o=t.encrypt(h(s,[0,0,0,e])),d=l.clamp(h(d,o),e),u=h(u,h(d,o)),u=t.encrypt(h(u,h(s,c(s)))),i.length&&(u=h(u,n?i:a.mode.ocb2.pmac(t,i))),b.concat(l.concat(d,l.clamp(u,r)))},decrypt:function(t,e,s,i,r,n){if(128!==a.bitArray.bitLength(s))throw new a.exception.invalid("ocb iv must be 128 bits");r=r||64;var o,c,l=a.mode.ocb2.A,h=a.bitArray,u=h.k,d=[0,0,0,0],b=l(t.encrypt(s)),m=a.bitArray.bitLength(e)-r,p=[];for(i=i||[],s=0;s+4<m/32;s+=4)o=u(b,t.decrypt(u(b,e.slice(s,s+4)))),d=u(d,o),p=p.concat(o),b=l(b);if(o=t.encrypt(u(b,[0,0,0,c=m-32*s])),o=u(o,h.clamp(e.slice(s),c)),d=u(d,o),d=t.encrypt(u(d,u(b,l(b)))),i.length&&(d=u(d,n?i:a.mode.ocb2.pmac(t,i))),!h.equal(h.clamp(d,r),h.bitSlice(e,m)))throw new a.exception.corrupt("ocb: tag doesn't match");return p.concat(h.clamp(o,c))},pmac:function(t,e){var s,i=a.mode.ocb2.A,r=a.bitArray,n=r.k,o=[0,0,0,0],c=t.encrypt([0,0,0,0]);for(c=n(c,i(i(c))),s=0;s+4<e.length;s+=4)c=i(c),o=n(o,t.encrypt(n(c,e.slice(s,s+4))));return e=e.slice(s),r.bitLength(e)<128&&(c=n(c,i(c)),e=r.concat(e,[-2147483648])),o=n(o,e),t.encrypt(n(i(n(c,i(c))),o))},A:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},a.misc.hmac=function(t,e){this.M=e=e||a.hash.sha256;var s=[[],[]],i=e.prototype.blockSize/32;for(this.l=[new e,new e],t.length>i&&(t=e.hash(t)),e=0;e<i;e++)s[0][e]=909522486^t[e],s[1][e]=1549556828^t[e];this.l[0].update(s[0]),this.l[1].update(s[1])},a.misc.hmac.prototype.encrypt=a.misc.hmac.prototype.mac=function(t,e){return t=new this.M(this.l[0]).update(t,e).finalize(),new this.M(this.l[1]).update(t).finalize()},a.misc.pbkdf2=function(t,e,s,i,r){if(s=s||1e3,i<0||s<0)throw a.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=a.codec.utf8String.toBits(t)),t=new(r=r||a.misc.hmac)(t);var n,o,c,l,h=[],u=a.bitArray;for(l=1;32*h.length<(i||1);l++){for(r=n=t.encrypt(u.concat(e,[l])),o=1;o<s;o++)for(n=t.encrypt(n),c=0;c<n.length;c++)r[c]^=n[c];h=h.concat(r)}return i&&(h=u.clamp(h,i)),h},a.random={randomWords:function(t,e){var s,i=[];if(0===(e=this.isReady(e)))throw new a.exception.notready("generator isn't seeded");for(2&e&&this.U(!(1&e)),e=0;e<t;e+=4)(e+1)%65536==0&&this.L(),s=this.u(),i.push(s[0],s[1],s[2],s[3]);return this.L(),i.slice(0,t)},setDefaultParanoia:function(t){this.t=t},addEntropy:function(t,e,s){s=s||"user";var i,r,n=(new Date).valueOf(),o=this.q[s],c=this.isReady();switch(void 0===(i=this.F[s])&&(i=this.F[s]=this.R++),void 0===o&&(o=this.q[s]=0),this.q[s]=(this.q[s]+1)%this.b.length,typeof t){case"number":break;case"object":if(void 0===e)for(s=e=0;s<t.length;s++)for(r=t[s];r>0;)e++,r>>>=1;this.b[o].update([i,this.J++,2,e,n,t.length].concat(t));break;case"string":void 0===e&&(e=t.length),this.b[o].update([i,this.J++,3,e,n,t.length]),this.b[o].update(t);break;default:throw new a.exception.bug("random: addEntropy only supports number, array or string")}this.j[o]+=e,this.f+=e,0===c&&(0!==this.isReady()&&this.K("seeded",Math.max(this.g,this.f)),this.K("progress",this.getProgress()))},isReady:function(t){return t=this.B[void 0!==t?t:this.t],this.g&&this.g>=t?this.j[0]>80&&(new Date).valueOf()>this.O?3:1:this.f>=t?2:0},getProgress:function(t){return this.g>=(t=this.B[t||this.t])?1[0]:this.f>t?1[0]:this.f/t},startCollectors:function(){if(!this.m){if(window.addEventListener)window.addEventListener("load",this.o,!1),window.addEventListener("mousemove",this.p,!1);else{if(!document.attachEvent)throw new a.exception.bug("can't attach event");document.attachEvent("onload",this.o),document.attachEvent("onmousemove",this.p)}this.m=!0}},stopCollectors:function(){this.m&&(window.removeEventListener?(window.removeEventListener("load",this.o),window.removeEventListener("mousemove",this.p)):window.detachEvent&&(window.detachEvent("onload",this.o),window.detachEvent("onmousemove",this.p)),this.m=!1)},addEventListener:function(t,e){this.r[t][this.Q++]=e},removeEventListener:function(t,e){var s;t=this.r[t];var i=[];for(s in t)t.hasOwnProperty[s]&&t[s]===e&&i.push(s);for(e=0;e<i.length;e++)delete t[s=i[e]]},b:[new a.hash.sha256],j:[0],z:0,q:{},J:0,F:{},R:0,g:0,f:0,O:0,a:[0,0,0,0,0,0,0,0],d:[0,0,0,0],s:void 0,t:6,m:!1,r:{progress:{},seeded:{}},Q:0,B:[0,48,64,96,128,192,256,384,512,768,1024],u:function(){for(var t=0;t<4&&(this.d[t]=this.d[t]+1|0,!this.d[t]);t++);return this.s.encrypt(this.d)},L:function(){this.a=this.u().concat(this.u()),this.s=new a.cipher.aes(this.a)},T:function(t){for(this.a=a.hash.sha256.hash(this.a.concat(t)),this.s=new a.cipher.aes(this.a),t=0;t<4&&(this.d[t]=this.d[t]+1|0,!this.d[t]);t++);},U:function(t){var e,s=[],i=0;for(this.O=s[0]=(new Date).valueOf()+3e4,e=0;e<16;e++)s.push(4294967296*Math.random()|0);for(e=0;e<this.b.length&&(s=s.concat(this.b[e].finalize()),i+=this.j[e],this.j[e]=0,t||!(this.z&1<<e));e++);this.z>=1<<this.b.length&&(this.b.push(new a.hash.sha256),this.j.push(0)),this.f-=i,i>this.g&&(this.g=i),this.z++,this.T(s)},p:function(t){a.random.addEntropy([t.x||t.clientX||t.offsetX,t.y||t.clientY||t.offsetY],2,"mouse")},o:function(){a.random.addEntropy(new Date,2,"loadtime")},K:function(t,e){var s;t=a.random.r[t];var i=[];for(s in t)t.hasOwnProperty(s)&&i.push(t[s]);for(s=0;s<i.length;s++)i[s](e)}},a.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(t,e,s,i){s=s||{},i=i||{};var r=a.json,n=r.c({iv:a.random.randomWords(4,0)},r.defaults);if(r.c(n,s),"string"==typeof n.salt&&(n.salt=a.codec.base64.toBits(n.salt)),"string"==typeof n.iv&&(n.iv=a.codec.base64.toBits(n.iv)),!a.mode[n.mode]||!a.cipher[n.cipher]||"string"==typeof t&&n.iter<=100||64!==n.ts&&96!==n.ts&&128!==n.ts||128!==n.ks&&192!==n.ks&&256!==n.ks||n.iv.length<2||n.iv.length>4)throw new a.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t&&(t=(s=a.misc.cachedPbkdf2(t,n)).key.slice(0,n.ks/32),n.salt=s.salt),"string"==typeof e&&(e=a.codec.utf8String.toBits(e)),s=new a.cipher[n.cipher](t),r.c(i,n),i.key=t,n.ct=a.mode[n.mode].encrypt(s,e,n.iv,n.adata,n.tag),r.encode(r.V(n,r.defaults))},decrypt:function(t,e,s,i){s=s||{},i=i||{};var r=a.json;if("string"==typeof(e=r.c(r.c(r.c({},r.defaults),r.decode(e)),s,!0)).salt&&(e.salt=a.codec.base64.toBits(e.salt)),"string"==typeof e.iv&&(e.iv=a.codec.base64.toBits(e.iv)),!a.mode[e.mode]||!a.cipher[e.cipher]||"string"==typeof t&&e.iter<=100||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||!e.iv||e.iv.length<2||e.iv.length>4)throw new a.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t&&(t=(s=a.misc.cachedPbkdf2(t,e)).key.slice(0,e.ks/32),e.salt=s.salt),s=new a.cipher[e.cipher](t),s=a.mode[e.mode].decrypt(s,e.ct,e.iv,e.adata,e.tag),r.c(i,e),i.key=t,a.codec.utf8String.fromBits(s)},encode:function(t){var e,s="{",i="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new a.exception.invalid("json encode: invalid property name");switch(s+=i+e+":",i=",",typeof t[e]){case"number":case"boolean":s+=t[e];break;case"string":s+='"'+escape(t[e])+'"';break;case"object":s+='"'+a.codec.base64.fromBits(t[e],1)+'"';break;default:throw new a.exception.bug("json encode: unsupported type")}}return s+"}"},decode:function(t){if(!(t=t.replace(/\s/g,"")).match(/^\{.*\}$/))throw new a.exception.invalid("json decode: this isn't json!");t=t.replace(/^\{|\}$/g,"").split(/,/);var e,s,i={};for(e=0;e<t.length;e++){if(!(s=t[e].match(/^([a-z][a-z0-9]*):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new a.exception.invalid("json decode: this isn't json!");i[s[1]]=s[2]?parseInt(s[2],10):s[1].match(/^(ct|salt|iv)$/)?a.codec.base64.toBits(s[3]):unescape(s[3])}return i},c:function(t,e,s){if(void 0===t&&(t={}),void 0===e)return t;var i;for(i in e)if(e.hasOwnProperty(i)){if(s&&void 0!==t[i]&&t[i]!==e[i])throw new a.exception.invalid("required parameter overridden");t[i]=e[i]}return t},V:function(t,e){var s,i={};for(s in t)t.hasOwnProperty(s)&&t[s]!==e[s]&&(i[s]=t[s]);return i},W:function(t,e){var s,i={};for(s=0;s<e.length;s++)void 0!==t[e[s]]&&(i[e[s]]=t[e[s]]);return i}},a.encrypt=a.json.encrypt,a.decrypt=a.json.decrypt,a.misc.S={},a.misc.cachedPbkdf2=function(t,e){var s,i=a.misc.S;return s=(e=e||{}).iter||1e3,(s=(i=i[t]=i[t]||{})[s]=i[s]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):a.random.randomWords(2,0)})[i=void 0===e.salt?s.firstSalt:e.salt]=s[i]||a.misc.pbkdf2(t,i,e.iter),{key:s[i].slice(0),salt:i.slice(0)}};var o={},c=(function(){function t(t){var e=window.btoa(t);return(e=(e=e.split("=")[0]).replace(/\+/g,"-")).replace(/\//g,"_")}function e(t){var e=t;switch((e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new r("Illegal base64url string!")}return window.atob(e)}function s(t){this.message=t,this.toString=function(){return"No such algorithm: "+this.message}}function i(t){this.message=t,this.toString=function(){return"Not implemented: "+this.message}}function r(t){this.message=t,this.toString=function(){return"Malformed input: "+this.message}}function n(t,e){if("sha256"!=t)throw new s("HMAC does not support hash "+t);this.hash=a.hash.sha256,this.key=a.codec.utf8String.toBits(e)}function c(t,e){if("sha1"==t)this.hash="sha1";else{if("sha256"!=t)throw new s("JWT algorithm: "+t);this.hash="sha256"}this.keyPEM=e}function l(t,e){this.objectStr=t,this.pkAlgorithm=e}n.prototype={update:function(t){this.data=t},finalize:function(){},sign:function(){var e=new a.misc.hmac(this.key,this.hash).encrypt(this.data);return t(window.atob(a.codec.base64.fromBits(e)))},verify:function(e){var s=new a.misc.hmac(this.key,this.hash).encrypt(this.data);return t(window.atob(a.codec.base64.fromBits(s)))==e}},c.prototype={update:function(t){this.data=t},finalize:function(){},sign:function(){var s=new RSAKey;s.readPrivateKeyFromPEMString(this.keyPEM);var i=s.signString(this.data,this.hash);return t(e(hex2b64(i)))},verify:function(t){return this.keyPEM.verifyString(this.data,function(t){var e,s,i="",r=0;for(e=0;e<t.length;++e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t.charAt(e));n<0||(0==r?(i+=int2char(n>>2),s=3&n,r=1):1==r?(i+=int2char(s<<2|n>>4),s=15&n,r=2):2==r?(i+=int2char(s),i+=int2char(n>>2),s=3&n,r=3):(i+=int2char(s<<2|n>>4),i+=int2char(15&n),r=0))}return 1==r&&(i+=int2char(s<<2)),i}(t))}};var h={parse:function(t){var s=t.split(".");if(3!=s.length)throw new MalformedWebToken("Must have three parts");var i=new l;return i.headerSegment=s[0],i.payloadSegment=s[1],i.cryptoSegment=s[2],i.pkAlgorithm=e(s[0]),i}};function u(t){return"string"==typeof t?JSON.parse(t):t}function d(t,e){if("ES256"===t)throw new i("ECDSA-SHA256 not yet implemented");if("ES384"===t)throw new i("ECDSA-SHA384 not yet implemented");if("ES512"===t)throw new i("ECDSA-SHA512 not yet implemented");if("HS256"===t)return new n("sha256",e);if("HS384"===t)throw new i("HMAC-SHA384 not yet implemented");if("HS512"===t)throw new i("HMAC-SHA512 not yet implemented");if("RS256"===t)return new c("sha256",e);throw"RS384"===t?new i("RSA-SHA384 not yet implemented"):"RS512"===t?new i("RSA-SHA512 not yet implemented"):new s("Unknown algorithm: "+t)}l.prototype={serialize:function(e){var s=d(u(this.pkAlgorithm).alg,e),i=t(this.pkAlgorithm),r=t(this.objectStr);return s.update(i+"."+r),s.finalize(),i+"."+r+"."+s.sign()},verify:function(t){var e=d(u(this.pkAlgorithm).alg,t);return e.update(this.headerSegment+"."+this.payloadSegment),e.finalize(),e.verify(this.cryptoSegment)}},o.WebToken=l,o.WebTokenParser=h,o.base64urlencode=t,o.base64urldecode=e}(),s("fXoL"));s.d(e,"a",(function(){return l}));let l=(()=>{class t{constructor(t){this.http=t,this.hasToken=!1,localStorage.getItem("jwt")&&(this.hasToken=!0)}doLogin(t,e=!1){let s=t;e||(localStorage.setItem("dsm",t.dsmport),s=this.encode(t));const i={headers:new r.c({"X-Cred":s})};return this.http.post(`${localStorage.getItem("dsm")}/login`,null,i).pipe(Object(n.a)(this.handleError))}autoLogin(){const t=localStorage.getItem("jwt");return t?this.doLogin(t,!0):(localStorage.removeItem("jwt"),Object(i.a)(null))}encode(t){return new o.WebToken(JSON.stringify(t),JSON.stringify({alg:"HS256",typ:"JWT"})).serialize("jsmusicdbnext")}handleError(t){return Object(i.a)(null)}}return t.\u0275fac=function(e){return new(e||t)(c.Sb(r.a))},t.\u0275prov=c.Hb({token:t,factory:t.\u0275fac}),t})()},XtVx:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("XNiG"),r=s("fXoL");let n=(()=>{class t{constructor(){this.pathAnnouncementSource=new i.a,this.pageAnnouncementSource=new i.a,this.pathAnnounced$=this.pathAnnouncementSource.asObservable(),this.pageAnnounced$=this.pageAnnouncementSource.asObservable()}announcePath(t){this.pathAnnouncementSource.next(t)}announcePage(t,e=null){this.pageAnnouncementSource.next({page:t,letter:e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})()},crnd:function(t,e){function s(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id="crnd"},hDf6:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("ofXK"),r=s("fXoL");let n=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})()},ktVm:function(t,e,s){"use strict";var i=s("XNiG"),r=s("/1T7"),n=s("LNEh"),a=s("o8Y7");class o{constructor(t){this.artists=[],this.active=!1,t.album&&t.title&&(this.letter=t.letter||this.getFirstLetterOf(t.albumArtist||t.albumartist||t.artist),"1"===this.letter&&(this.letter="#"),this.escapedLetter=encodeURIComponent(this.letter))}url(){return`/letter/${this.escapedLetter}/`}sortArtistsBy(t="sortName",e="asc"){this.artists.sort("albums"===t?(t,s)=>t.albums.length>s.albums.length?"asc"===e?-1:1:t.albums.length<s.albums.length?"asc"===e?1:-1:0:(s,i)=>{if(-1!==t.indexOf(".")){const r=t.split(".");return s[r[0]][r[1]]<i[r[0]][r[1]]?"asc"===e?-1:1:s[r[0]][r[1]]>i[r[0]][r[1]]?"asc"===e?1:-1:0}return s[t].toUpperCase()<i[t].toUpperCase()?"asc"===e?-1:1:s[t].toUpperCase()>i[t].toUpperCase()?"asc"===e?1:-1:0})}sortAndReturnArtistsBy(t="name",e="asc"){return this.sortArtistsBy(t,e),this.artists}getFirstLetterOf(t){let e="";return e=this.stripFromName(t,["the ",'"',"a "]),this.groupIfSpecialChar(e.substr(0,1))}stripFromName(t,e){let s=t?t.toUpperCase():"";return s=s.trim(),e.forEach(t=>{const e=t.toUpperCase();0===s.indexOf(e)&&(s=s.substring(e.length))}),Object(a.a)(s)}groupIfSpecialChar(t){return-1!==["1","2","3","4","5","6","7","8","9","0","(",")","[","]","{","}","_","-","."].indexOf(t)?"#":t}}var c=s("/+cc"),l=s.n(c);class h{constructor(){this.doSearch=({query:t,keys:e=["name"],list:s})=>new l.a(s,this.options(e)).search(t),this.options=t=>({keys:t,threshold:.25,shouldSort:!0})}}var u=s("uwnU");class d{constructor(t){this.albums=[],this.sanitize=t=>{let e=parseInt(t,10);return isNaN(e)&&(e=0),e},t.year&&(this.year=this.sanitize(t.year))}}class b{constructor(){this.artists={},this.albums={},this.tracks={},this.letters={},this.years={},this.sortedLetters=[],this.sortedAlbums=[],this.isCoreParsed=!1,this.coreParsedSource=new i.a,this.coreParsed$=this.coreParsedSource.asObservable(),this.totals={artists:0,albums:0,tracks:0,playingTime:0,parsingTime:0},this.latestAdditions=[],this.search=new h,console.info("Core init 1.6.0")}resetCollection(){this.artists={},this.albums={},this.tracks={},this.letters={},this.years={},this.sortedLetters=[],this.sortedAlbums=[],this.totals={artists:0,albums:0,tracks:0,playingTime:0,parsingTime:0},this.latestAdditions=[]}parseSourceJson(t,e=!0){const s=(new Date).getTime();if(t.length)for(const n of t)this.parseLine(n,e);else t.tree&&this.parseTree(t.tree);const i=Object.keys(this.letters).sort((t,e)=>t<e?-1:1),r=[];i.forEach((t,e)=>{r.push(this.letters[t]),this.letters[t].sortAndReturnArtistsBy("name","asc")}),this.sortedLetters=r,this.totals.parsingTime+=(new Date).getTime()-s,this.coreParsedSource.next(!0),this.isCoreParsed=!0}getTrackByArtistAndName(t,e){const s=new n.a({name:t,dummy:!0}),i=this.artists[s.sortName];let r=null;return i&&i.albums.some(t=>{t.tracks.some(t=>{if(t.title&&t.title.toLowerCase()===e.toLowerCase())return r||(r=t),!0})}),r}getTrackById(t){let e=new u.a({});return this.tracks.forEach(s=>{s.id===t&&(e=s)}),e}getArtistByName(t){const e=new n.a({name:t,dummy:!0});return this.artists[e.sortName]}getAlbumByArtistAndName(t,e){let s=null;return t.albums.forEach(t=>{t.name.toLowerCase()===e.toLowerCase()&&(s=t)}),s}getTrackByAlbumAndName(t,e){let s=null;return t.tracks.forEach(t=>{t.title.toLowerCase()===e.toLowerCase()&&(s=t)}),s}artistsList(){const t=[];return Object.keys(this.artists).sort((t,e)=>t<e?-1:1).forEach((e,s)=>{t.push(this.artists[e])}),t}trackList(){const t=[];return Object.keys(this.tracks).sort((t,e)=>t<e?-1:1).forEach((e,s)=>{t.push(this.tracks[e])}),t}searchArtist(t){return this.search.doSearch({query:t,list:this.artistsList()})}searchAlbum(t){return this.search.doSearch({query:t,list:this.sortedAlbums})}searchTrack(t){return this.search.doSearch({query:t,keys:["title"],list:this.trackList()})}getLatestAdditions(t=14){return 0!==this.latestAdditions.length?this.latestAdditions:(this.sortedAlbums.sort((t,e)=>t.modified>e.modified?-1:t.modified<e.modified?1:0),this.latestAdditions=this.sortedAlbums.splice(0,t),this.latestAdditions)}getNextAlbum(t){const e=t.artist,s=e.albums.indexOf(t);let i=e.albums[s+1];return i||(i=this.getNextArtist(e).albums[0]),i}getNextArtist(t){const e=t.letter,s=e.artists.indexOf(t);let i=e.artists[s+1];return i||(i=this.getNextLetter(e).artists[0]),i}getNextLetter(t){const e=this.sortedLetters.indexOf(t);let s=this.sortedLetters[e+1];return s||(s=this.sortedLetters[0]),s}instanceIfPresent(t,e,s,i,r){let n=null;return s[e]?n=s[e]:(s[e]=i,n=i,r(t)),n}handleLetter(t){return this.instanceIfPresent(this,t.letter,this.letters,t,t=>{})}handleArtist(t,e){return this.instanceIfPresent(this,e.sortName,this.artists,e,s=>{t.artists.push(e),e.letter=t,s.totals.artists++})}handleAlbum(t,e,s=!0){return this.instanceIfPresent(this,t.sortName+"|"+e.sortName,this.albums,e,i=>{if("flac"===e.type&&s||"flac"!==e.type)if(e.artist=t,t.albums.push(e),t.sortAndReturnAlbumsBy("year","asc"),i.sortedAlbums.push(e),i.totals.albums++,i.years[e.year])i.years[e.year].albums.push(e);else{const t=new d(e);t.albums.push(e),i.years[t.year]=t}})}handleTrack(t,e,s,i=!0){return this.instanceIfPresent(this,s.id,this.tracks,s,r=>{if(e.type=e.type&&e.type!==s.type?"mixed":s.type,"flac"===s.type&&i||"flac"!==s.type){r.totals.tracks++,r.totals.playingTime+=s.duration,s.artist=t,s.album=e,e.tracks.push(s);const i=s.disc;e.discs[`disc-${i}`]?e.discs[`disc-${i}`].push(s):(e.discs[`disc-${i}`]=[],e.discs[`disc-${i}`].push(s)),e.discs[`disc-${i}`].sort((t,e)=>t.number<e.number?-1:1),e.tracks.sort((t,e)=>t.disc<e.disc?-1:t.disc===e.disc&&t.number<e.number?-1:1)}else console.warn("skipping flac track, flac is not supported")})}parseLine(t,e=!0){let s=new o(t);s.letter&&(s=this.handleLetter(s));let i=new n.a(t);i.name&&(i=this.handleArtist(s,i));let a=new r.a(t);a.name&&(a=this.handleAlbum(i,a,e));let c=new u.a(t);c.title&&(c=this.handleTrack(i,a,c,e))}parseTree(t){for(const e in t){let s=new o(t[e]);s=this.handleLetter(s);for(const i in t[e].artists){let a=new n.a(t[e].artists[i]);a=this.handleArtist(s,a);for(const s in t[e].artists[i].albums){let n=new r.a(t[e].artists[i].albums[s]);n=this.handleAlbum(a,n);for(const r in t[e].artists[i].albums[s].tracks){let o=new u.a(t[e].artists[i].albums[s].tracks[r]);o=this.handleTrack(a,n,o)}}}}}}var m=s("fXoL");s.d(e,"a",(function(){return p}));let p=(()=>{class t{constructor(){this.core=new b}getCore(){return this.core}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=m.Hb({token:t,factory:t.\u0275fac}),t})()},t083:function(t,e,s){"use strict";var i=s("XNiG"),r=s("z6cu"),n=s("JIr8"),a=s("tk/3"),o=s("ztCj");class c{encodeKey(t){return encodeURIComponent(t)}encodeValue(t){return encodeURIComponent(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}var l=s("fXoL");s.d(e,"a",(function(){return d}));const h="956c1818ded606576d6941de5ff793a5",u="4d183e73f7578dee78557665e9be3acc";let d=(()=>{class t{constructor(t){this.http=t,this.manualScrobbleListSource=new i.a,this.manualScrobbleList$=this.manualScrobbleListSource.asObservable(),this.hexcase=0,this.b64pad=""}getLovedTracks(t){return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:{api_key:h,format:"json",limit:"1000",method:"user.getlovedtracks",user:t}}).pipe(Object(n.a)(this.handleError))}toggleLoved(t){const e=localStorage.getItem("lastfm-token"),s=(new URLSearchParams,t.isLoved?"track.love":"track.unlove"),i=new a.d({encoder:new c}).set("method",s).set("api_key",h).set("api_sig",this.signTrack(t.trackArtist,t.album.name,t.title,null,e,s)).set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("sk",e),r=new a.c({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:i,headers:r}).pipe(Object(n.a)(this.handleError))}getTrackInfo(t,e){if(t){const s=new a.d({encoder:new c}).set("method","track.getInfo").set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("api_key",h).set("format","json").set("user",e);return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:s}).pipe(Object(n.a)(this.handleError))}return Object(r.a)(null)}getTopArtists(t){const e=new a.d({encoder:new c}).set("api_key",h).set("format","json").set("limit","50").set("method","user.gettopartists").set("period","1month").set("user",t);return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:e}).pipe(Object(n.a)(this.handleError))}getSimilairArtists(t){const e=new a.d({encoder:new c}).set("api_key",h).set("format","json").set("limit","20").set("autocorrect","1").set("method","artist.getSimilar").set("artist",t.name);return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:e}).pipe(Object(n.a)(this.handleError))}authenticate(t){const e=new a.d({encoder:new c}).set("api_key",h).set("api_sig",this.signAuthentication(t.user,t.password)).set("format","json").set("username",t.user).set("password",t.password),s=new a.c({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post("https://ws.audioscrobbler.com/2.0/?method=auth.getMobileSession",null,{params:e,headers:s}).pipe(Object(n.a)(this.handleError))}announceNowPlaying(t){if("mdb-skipped"!==localStorage.getItem("lastfm-username")){const e=new Date,s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+e.getTimezoneOffset(),e.getSeconds())/1e3,i=localStorage.getItem("lastfm-token"),r=new a.c({"Content-Type":"application/x-www-form-urlencoded"}),o=new a.d({encoder:new c}).set("method","track.updateNowPlaying").set("api_key",h).set("api_sig",this.signTrack(t.trackArtist,t.album.name,t.title,s,i,"track.updateNowPlaying")).set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("timestamp",s.toString()).set("sk",i);return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:o,headers:r}).pipe(Object(n.a)(this.handleError))}}scrobbleTrack(t){const e=localStorage.getItem("lastfm-username"),s=new Date,i=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()+s.getTimezoneOffset(),s.getSeconds())/1e3;if("mdb-skipped"!==e){const e=localStorage.getItem("lastfm-token");if(!this.booleanState("manual-scrobble-state")){const s=new a.c({"Content-Type":"application/x-www-form-urlencoded"}),r=new a.d({encoder:new c}).set("method","track.scrobble").set("api_key",h).set("api_sig",this.signTrack(t.trackArtist,t.album.name,t.title,i,e,"track.scrobble")).set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("timestamp",i.toString()).set("sk",e);return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:r,headers:s}).pipe(Object(n.a)(this.handleError))}Object(o.c)("manual-scrobble-list").then(e=>{const s=e||[],r={artist:t.trackArtist,album:t.album.name,track:t.title,timestamp:i.toString()};s.unshift(r),Object(o.d)("manual-scrobble-list",s),this.manualScrobbleListSource.next(s)})}else{const e=`art-${t.trackArtist}-${t.album.name}`;Object(o.c)(e).then(e=>{this.saveInLocal(t,i,e||"global/images/no-cover.png")})}}updateManualScrobbleList(){Object(o.c)("manual-scrobble-list").then(t=>{this.manualScrobbleListSource.next(t||[])})}saveInLocal(t,e,s){const i={artist:{"#text":t.trackArtist},album:{"#text":t.album.name},image:[{"#text":s}],name:t.title,date:{uts:e}};let r=[],n=null;Object(o.c)("recentlyListened").then(t=>{t&&(r=t.tracks,r.length>10&&(r=r.splice(0,10)),n=t._rev),r.unshift(i);const e={_id:"recentlyListened",tracks:r};Object(o.d)(e._id,e.tracks)})}scrobbleCachedTrack(t){const e=localStorage.getItem("lastfm-token"),s=new a.c({"Content-Type":"application/x-www-form-urlencoded"}),i=new a.d({encoder:new c}).set("method","track.scrobble").set("api_key",h).set("api_sig",this.signTrack(t.artist,t.album,t.track,t.timestamp,e,"track.scrobble")).set("artist",t.artist).set("album",t.album).set("track",t.track).set("timestamp",t.timestamp.toString()).set("sk",e);return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:i,headers:s,responseType:"text"}).pipe(Object(n.a)(this.handleError))}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}signAuthentication(t,e){return this.hex_md5(`api_key${h}methodauth.getMobileSessionpassword${e}username${t}${u}`)}signTrack(t,e,s,i,r,n){return this.hex_md5(i?`album${e}api_key${h}artist${t}method${n}sk${r}timestamp${i}track${s}${u}`:`album${e}api_key${h}artist${t}method${n}sk${r}track${s}${u}`)}handleError(t){return Object(r.a)(null)}hex_md5(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))}rstr2hex(t){try{this.hexcase=this.hexcase}catch(r){this.hexcase=0}const e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";let s,i="";for(let n=0;n<t.length;n++)s=t.charCodeAt(n),i+=e.charAt(s>>>4&15)+e.charAt(15&s);return i}rstr_md5(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))}str2rstr_utf8(t){let e,s,i="",r=-1;for(;++r<t.length;)e=t.charCodeAt(r),s=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=s&&s<=57343&&(e=65536+((1023&e)<<10)+(1023&s),r++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i}binl2rstr(t){let e="";for(let s=0;s<32*t.length;s+=8)e+=String.fromCharCode(t[s>>5]>>>s%32&255);return e}binl_md5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let s=1732584193,i=-271733879,r=-1732584194,n=271733878;for(let a=0;a<t.length;a+=16){const e=s,o=i,c=r,l=n;s=this.md5_ff(s,i,r,n,t[a+0],7,-680876936),n=this.md5_ff(n,s,i,r,t[a+1],12,-389564586),r=this.md5_ff(r,n,s,i,t[a+2],17,606105819),i=this.md5_ff(i,r,n,s,t[a+3],22,-1044525330),s=this.md5_ff(s,i,r,n,t[a+4],7,-176418897),n=this.md5_ff(n,s,i,r,t[a+5],12,1200080426),r=this.md5_ff(r,n,s,i,t[a+6],17,-1473231341),i=this.md5_ff(i,r,n,s,t[a+7],22,-45705983),s=this.md5_ff(s,i,r,n,t[a+8],7,1770035416),n=this.md5_ff(n,s,i,r,t[a+9],12,-1958414417),r=this.md5_ff(r,n,s,i,t[a+10],17,-42063),i=this.md5_ff(i,r,n,s,t[a+11],22,-1990404162),s=this.md5_ff(s,i,r,n,t[a+12],7,1804603682),n=this.md5_ff(n,s,i,r,t[a+13],12,-40341101),r=this.md5_ff(r,n,s,i,t[a+14],17,-1502002290),i=this.md5_ff(i,r,n,s,t[a+15],22,1236535329),s=this.md5_gg(s,i,r,n,t[a+1],5,-165796510),n=this.md5_gg(n,s,i,r,t[a+6],9,-1069501632),r=this.md5_gg(r,n,s,i,t[a+11],14,643717713),i=this.md5_gg(i,r,n,s,t[a+0],20,-373897302),s=this.md5_gg(s,i,r,n,t[a+5],5,-701558691),n=this.md5_gg(n,s,i,r,t[a+10],9,38016083),r=this.md5_gg(r,n,s,i,t[a+15],14,-660478335),i=this.md5_gg(i,r,n,s,t[a+4],20,-405537848),s=this.md5_gg(s,i,r,n,t[a+9],5,568446438),n=this.md5_gg(n,s,i,r,t[a+14],9,-1019803690),r=this.md5_gg(r,n,s,i,t[a+3],14,-187363961),i=this.md5_gg(i,r,n,s,t[a+8],20,1163531501),s=this.md5_gg(s,i,r,n,t[a+13],5,-1444681467),n=this.md5_gg(n,s,i,r,t[a+2],9,-51403784),r=this.md5_gg(r,n,s,i,t[a+7],14,1735328473),i=this.md5_gg(i,r,n,s,t[a+12],20,-1926607734),s=this.md5_hh(s,i,r,n,t[a+5],4,-378558),n=this.md5_hh(n,s,i,r,t[a+8],11,-2022574463),r=this.md5_hh(r,n,s,i,t[a+11],16,1839030562),i=this.md5_hh(i,r,n,s,t[a+14],23,-35309556),s=this.md5_hh(s,i,r,n,t[a+1],4,-1530992060),n=this.md5_hh(n,s,i,r,t[a+4],11,1272893353),r=this.md5_hh(r,n,s,i,t[a+7],16,-155497632),i=this.md5_hh(i,r,n,s,t[a+10],23,-1094730640),s=this.md5_hh(s,i,r,n,t[a+13],4,681279174),n=this.md5_hh(n,s,i,r,t[a+0],11,-358537222),r=this.md5_hh(r,n,s,i,t[a+3],16,-722521979),i=this.md5_hh(i,r,n,s,t[a+6],23,76029189),s=this.md5_hh(s,i,r,n,t[a+9],4,-640364487),n=this.md5_hh(n,s,i,r,t[a+12],11,-421815835),r=this.md5_hh(r,n,s,i,t[a+15],16,530742520),i=this.md5_hh(i,r,n,s,t[a+2],23,-995338651),s=this.md5_ii(s,i,r,n,t[a+0],6,-198630844),n=this.md5_ii(n,s,i,r,t[a+7],10,1126891415),r=this.md5_ii(r,n,s,i,t[a+14],15,-1416354905),i=this.md5_ii(i,r,n,s,t[a+5],21,-57434055),s=this.md5_ii(s,i,r,n,t[a+12],6,1700485571),n=this.md5_ii(n,s,i,r,t[a+3],10,-1894986606),r=this.md5_ii(r,n,s,i,t[a+10],15,-1051523),i=this.md5_ii(i,r,n,s,t[a+1],21,-2054922799),s=this.md5_ii(s,i,r,n,t[a+8],6,1873313359),n=this.md5_ii(n,s,i,r,t[a+15],10,-30611744),r=this.md5_ii(r,n,s,i,t[a+6],15,-1560198380),i=this.md5_ii(i,r,n,s,t[a+13],21,1309151649),s=this.md5_ii(s,i,r,n,t[a+4],6,-145523070),n=this.md5_ii(n,s,i,r,t[a+11],10,-1120210379),r=this.md5_ii(r,n,s,i,t[a+2],15,718787259),i=this.md5_ii(i,r,n,s,t[a+9],21,-343485551),s=this.safe_add(s,e),i=this.safe_add(i,o),r=this.safe_add(r,c),n=this.safe_add(n,l)}return Array(s,i,r,n)}rstr2binl(t){const e=Array(t.length>>2);for(let s=0;s<e.length;s++)e[s]=0;for(let s=0;s<8*t.length;s+=8)e[s>>5]|=(255&t.charCodeAt(s/8))<<s%32;return e}md5_cmn(t,e,s,i,r,n){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,n)),r),s)}md5_ff(t,e,s,i,r,n,a){return this.md5_cmn(e&s|~e&i,t,e,r,n,a)}md5_gg(t,e,s,i,r,n,a){return this.md5_cmn(e&i|s&~i,t,e,r,n,a)}md5_hh(t,e,s,i,r,n,a){return this.md5_cmn(e^s^i,t,e,r,n,a)}md5_ii(t,e,s,i,r,n,a){return this.md5_cmn(s^(e|~i),t,e,r,n,a)}safe_add(t,e){const s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}bit_rol(t,e){return t<<e|t>>>32-e}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(a.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac}),t})()},ufXC:function(t,e,s){"use strict";s.d(e,"a",(function(){return h}));var i=s("ztCj"),r=s("XNiG"),n=s("KI15"),a=s("Gcu2"),o=s("ktVm"),c=s("t083"),l=s("fXoL");let h=(()=>{class t{constructor(t,e,s){this.lastFMService=t,this.coreService=e,this.playlistService=s,this.playlistSource=new r.a,this.volumeSource=new r.a,this.hideVolumeWindowAsSource=new r.a,this.playlistAnnounced$=this.playlistSource.asObservable(),this.volumeAnnounced=this.volumeSource.asObservable(),this.hideVolumeWindowAnnounced$=this.hideVolumeWindowAsSource.asObservable(),this.isPlaying=!1,this.isPaused=!1,this.isShuffled=!1,this.forceRestart=!1,this.volume=100,this.lastfmUserName=localStorage.getItem("lastfm-username"),this.subscription=this.playlistService.playlistAnnounced$.subscribe(t=>{this.doPlayPlaylist(t,0,!0,this.isShuffled)})}setPosition(t){this.position=t,this.announce(),this.position=null}doPlayAlbum(t,e,s=!1,i=!1){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.setPlaylist(t,e,s,i,"album"),this.announce()}doQueueAlbum(t){const{playlist:e,startIndex:s}=this.currentPlaylist,i=new n.a;i.name="queued playlist",i.type="queue",i.tracks=[...e.tracks,...t.tracks],this.setPlaylist(i,s,!1,!1,"playlist")}doPlayPlaylist(t,e,s=!1,i=!1){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.setPlaylist(t,e,s,i,"playlist"),this.announce()}doPlayTrack(t){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1);const e=new n.a;e.isOwn=!0,e.name=t.title,e.tracks.push(t),this.currentPlaylist={playlist:e,startIndex:0,isPlaying:this.isPlaying=!0,isPaused:this.isPaused=!1,isShuffled:!1,forceRestart:this.forceRestart=!0,isContinues:!1},this.announce()}nextPlaylist(t){if(this.booleanState("continues-play"))if("random"===t){const t=this.playlistService.generateRandom();this.doPlayPlaylist(t,0,!0,this.isShuffled)}else this.playlistService.generateRadio();else this.stop()}nextAlbum(t){if(this.booleanState("continues-play")){const e=this.coreService.getCore().getNextAlbum(t);e?this.doPlayAlbum(e,0,!0,this.isShuffled):(console.warn("no new album found, stopping playback"),this.stop())}else this.stop()}playlistToString(){const t=[];return this.currentPlaylist.playlist.tracks.forEach(e=>{e&&t.push(e.id)}),JSON.stringify({ids:t,isShuffled:this.isShuffled,isContinues:this.currentPlaylist.isContinues,current:this.currentPlaylist.startIndex,type:this.currentPlaylist.type})}playlistSync(){const t=[];return this.currentPlaylist.playlist.tracks.forEach(e=>{e&&t.push(e.id)}),{ids:t,isShuffled:this.isShuffled,isContinues:this.currentPlaylist.isContinues,current:this.currentPlaylist.startIndex,type:this.currentPlaylist.type}}getCurrentPlaylist(){return this.currentPlaylist}shufflePlaylist(t){this.isShuffled=t,this.currentPlaylist.playlist.tracks.sort(this.sortPlaylist),t&&(this.currentPlaylist.playlist.tracks=this.shuffle(this.currentPlaylist.playlist.tracks)),this.currentPlaylist.startIndex=this.currentPlaylist.playlist.tracks.indexOf(this.currentTrack),this.currentPlaylist.forceRestart=!1,this.announce()}sortPlaylist(t,e){return t.disc<e.disc?-1:t.disc>e.disc?1:t.number<e.number?-1:t.number>e.number?1:0}shuffle(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[s],t[s]=i}return t}next(){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.currentPlaylist&&(this.currentPlaylist.startIndex++,this.currentPlaylist.forceRestart=!1,this.announce())}prev(){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.currentPlaylist&&(this.currentPlaylist.startIndex--,this.currentPlaylist.startIndex<=0&&(this.currentPlaylist.startIndex=0),this.currentPlaylist.forceRestart=!1,this.announce())}pause(){this.currentPlaylist&&(this.isPlaying=!1,this.isPaused=!0,this.currentPlaylist.forceRestart=!1,this.announce())}resume(){this.currentPlaylist&&(this.isPlaying=!0,this.isPaused=!1,this.currentPlaylist.forceRestart=!1,this.announce())}stop(){this.isPlaying=!1,this.isPaused=!1,this.currentPlaylist=null,Object(i.b)("current-playlist"),localStorage.removeItem("current-time"),this.playlistSource.next(this.currentPlaylist)}togglePlayPause(){this.isPlaying?this.pause():this.resume()}announce(){this.currentPlaylist&&(this.currentTrack=this.currentPlaylist.playlist.tracks[this.currentPlaylist.startIndex],this.lastfmUserName&&this.lastFMService.getTrackInfo(this.currentTrack,this.lastfmUserName).subscribe(t=>{this.currentTrack&&t.track&&(this.currentTrack.isLoved="1"===t.track.userloved)}),this.currentTrack&&(this.currentTrack.isPaused=this.isPaused,this.currentTrack.isPlaying=this.isPlaying,this.currentPlaylist.isPlaying=this.isPlaying,this.currentPlaylist.isPaused=this.isPaused,this.currentPlaylist.isShuffled=this.isShuffled,this.currentPlaylist.position=this.position,Object(i.d)("current-playlist",this.playlistSync()),this.playlistSource.next(this.currentPlaylist)))}getVolume(){return this.volume}setVolume(t){this.volume=t,this.volumeSource.next(this.volume)}hideVolumeControl(){this.hideVolumeWindowAsSource.next(!0)}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}setPlaylist(t,e=0,s=!0,i=!1,r="album"){this.currentPlaylist={playlist:t,startIndex:e,isPlaying:this.isPlaying=!0,isPaused:this.isPaused=!1,isShuffled:this.isShuffled=i,forceRestart:this.forceRestart=s,isContinues:t.isContinues||"album"===r,type:t.type}}}return t.\u0275fac=function(e){return new(e||t)(l.Sb(c.a),l.Sb(o.a),l.Sb(a.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac}),t})()},uwnU:function(t,e,s){"use strict";class i{constructor(t){this.url=t.file||t.url||t.path||t.id}}s.d(e,"a",(function(){return r}));class r{constructor(t){this.isPlaying=!1,this.isPaused=!1,this.isLoved=!1,this.position=0,this.buffered={start:0,end:0},this.showActions=!1,this.image="",t.album&&t.title&&(this.id=t.id,this.duration=t.seconds?1e3*t.seconds:t.duration&&!isNaN(t.duration)?t.duration:0,this.title=t.title,this.source=new i(t),this.disc=t.disc||this.guessBySource(t),this.number=t.number,this.trackArtist=t.artist,this.type=t.type||"mp3")}url(){return`/letter/${this.artist.letter.escapedLetter}/artist/${encodeURIComponent(this.artist.name)}/album/${encodeURIComponent(this.album.name)}/track/${encodeURIComponent(this.title)}`}toJSON(){return this.id}guessBySource(t){const e=this.source.url,s=[1,2,3,4,5,6,7,8,9,10];for(const i of s)if(-1!==e.indexOf(` - ${i}.`)||-1!==e.indexOf(`(${i}) - `)||-1!==e.indexOf(`CD${i}`)||-1!==e.indexOf(`\\${i}-`))return i;return 1}}},zUnb:function(t,e,s){"use strict";s.r(e);var i=s("fXoL"),r=s("tk/3"),n=s("3Pt+"),a=s("jhN1"),o=s("oW1M"),c=s("XNvx"),l=s("ufXC"),h=s("Gcu2"),u=s("1gFc"),d=s("MDLy"),b=s("+ooL"),m=s("OgP6"),p=s("ktVm"),g=s("t083"),f=s("XtVx"),y=s("ofXK"),v=s("ztCj"),k=s("Mfq2");class S{}var w=s("tyNb");function A(t,e){if(1&t){const t=i.Pb();i.Ob(0,"span"),i.Ob(1,"span",57),i.Wb("click",(function(e){i.rc(t);const s=i.ac();return s.selectArtist(s.path)})),i.zc(2),i.Nb(),i.zc(3," \u2022\xa0 "),i.Ob(4,"span"),i.zc(5),i.Nb(),i.Nb()}if(2&t){const t=i.ac();i.zb(2),i.Ac(t.path.artist.albumArtist||t.path.artist.name),i.zb(3),i.Ac(t.path.album.name)}}function C(t,e){if(1&t&&(i.Ob(0,"span"),i.zc(1),i.Nb()),2&t){const t=i.ac();i.zb(1),i.Ac(t.path.artist.albumArtist||t.path.artist.name)}}function O(t,e){1&t&&(i.Ob(0,"span"),i.zc(1,"JSMusicDB Next"),i.Nb())}function x(t,e){if(1&t&&(i.Ob(0,"span"),i.zc(1),i.Nb()),2&t){const t=i.ac();i.zb(1),i.Ac(t.page)}}function P(t,e){1&t&&(i.Ob(0,"span"),i.zc(1,"JSMusicDB Next"),i.Nb())}function L(t,e){1&t&&i.Mb(0,"i",25)}function N(t,e){1&t&&i.Mb(0,"i",58)}const T=function(t){return{active:t}};function M(t,e){if(1&t&&(i.Ob(0,"li",26),i.Ob(1,"a",59),i.Mb(2,"span",60),i.zc(3),i.Nb(),i.Nb()),2&t){const t=i.ac();i.gc("ngClass",i.jc(2,T,"Scrobble cache"===t.page)),i.zb(3),i.Bc(" Scrobble cache (",t.manualScrobblingList.length,")")}}function j(t,e){if(1&t&&(i.Ob(0,"li",46),i.Ob(1,"a",61),i.Mb(2,"span",60),i.Nb(),i.Nb()),2&t){const t=i.ac();i.gc("ngClass",i.jc(2,T,"Scrobble cache"===t.page)),i.zb(1),i.ic("tooltip","Scrobble cache (",t.manualScrobblingList.length,")")}}const I=function(t){return{visible:t}},E=function(t){return{"side-nav--visible":t}};function _(){return Object.assign(new k.a,{placement:"right",delay:250})}let z=(()=>{class t{constructor(t,e,s,i){this.pathService=t,this.router=e,this.lastFMService=s,this.coreService=i,this.menuVisible=!1,this.topSearchVisible=!1,this.manualScrobblingList=[],this.onDocumentClick=t=>{t.target.classList.contains("side-nav--visible")&&this.toggleMenu()},this.core=this.coreService.getCore(),this.subscription=t.pathAnnounced$.subscribe(t=>{this.path=t,this.page=null,this.menuVisible=!1,this.disableActiveLetter(),this.activateLetter(t.letter)}),this.subscription2=t.pageAnnounced$.subscribe(t=>{this.page=t.page,this.path=null,this.menuVisible=!1,this.disableActiveLetter(),this.activateLetter(t.letter)}),this.subscription3=this.lastFMService.manualScrobbleList$.subscribe(t=>{this.manualScrobblingList=t}),this.subscription4=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()}),this.search=new S,Object(v.c)("manual-scrobble-list").then(t=>{this.manualScrobblingList=t||[]})}ngOnInit(){this.letters=this.core.sortedLetters}disableActiveLetter(){this.letters.forEach(t=>{t.active&&(t.active=!1)})}activateLetter(t){t&&(t.active=!0)}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}toggleMenu(){this.menuVisible=!this.menuVisible,this.menuVisible?this.slideOut():this.slideIn()}slideOut(){const t=document.querySelector(".js-side-nav");t.classList.add("side-nav--animatable"),t.classList.add("side-nav--visible"),document.addEventListener("click",this.onDocumentClick),t.addEventListener("transitionend",this.onTransitionEnd)}slideIn(){const t=document.querySelector(".js-side-nav");t.classList.add("side-nav--animatable"),t.classList.remove("side-nav--visible"),document.removeEventListener("click",this.onDocumentClick),t.addEventListener("transitionend",this.onTransitionEnd)}onTransitionEnd(t){const e=document.querySelector(".js-side-nav");e.classList.remove("side-nav--animatable"),e.removeEventListener("transitionend",this.onTransitionEnd)}onSubmit(){this.topSearchVisible=!1,this.menuVisible&&this.toggleMenu(),this.router.navigate(["/search",this.search.query])}toggleSearch(){this.topSearchVisible=!this.topSearchVisible,!0===this.topSearchVisible&&setTimeout(()=>{document.getElementById("mobileSearch").focus()},100)}selectArtist(t){this.router.navigate(["letter",t.artist.letter.escapedLetter,"artist",t.artist.sortName])}selectAlbum(t){this.router.navigate(["letter",t.album.artist.letter.escapedLetter,"artist",t.album.artist.sortName,"album",t.album.sortName])}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(f.a),i.Lb(w.c),i.Lb(g.a),i.Lb(p.a))},t.\u0275cmp=i.Fb({type:t,selectors:[["mdb-topmenu"]],features:[i.yb([{provide:k.a,useFactory:_}])],decls:94,vars:65,consts:[[1,"menu-top","fixed-top"],[1,"menu-toggle",3,"click"],["aria-label","menu button",1,"btn","btn-menu","d-md-none"],["aria-hidden","true",1,"glyph","glyph-hamburger"],[1,"d-none","d-md-inline-block"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","276.164px","height","276.164px","viewBox","0 0 276.164 276.164",0,"xml","space","preserve",1,"logo"],["d","M156.716,61.478c-4.111,6.276-8.881,11.511-14.212,15.609l-8.728,6.962c-13.339,11.855-22.937,21.433-28.542,28.464\n                  c-10.209,12.788-15.806,25.779-16.65,38.611c-0.942,14.473,3.187,28.21,12.275,40.84c9.636,13.458,21.8,20.754,36.164,21.69\n                  c3.291,0.218,6.897,0.182,9.896-0.015l-1.121-10.104c-2.09,0.192-4.306,0.223-6.628,0.068c-9.437-0.617-17.864-4.511-25.064-11.573\n                  c-7.524-7.333-10.895-15.415-10.287-24.7c1.149-17.59,12.562-35.004,33.925-51.792l9.543-7.599\n                  c8.394-7.174,15.192-16.191,20.216-26.825c4.971-10.556,7.886-21.983,8.673-33.96c0.466-7.037-0.513-15.775-2.874-25.965\n                  c-3.241-13.839-7.854-20.765-14.136-21.179c-2.232-0.138-4.676,0.986-7.658,3.617c-7.252,6.548-12.523,14.481-15.683,23.542\n                  c-2.438,6.926-4.057,16.189-4.805,27.529c-0.313,4.72,0.313,13.438,1.805,23.962l8.844-8.192c-0.028-1.183,0.005-2.413,0.096-3.703\n                  c0.466-7.221,2.289-15.062,5.394-23.293c3.956-10.296,7.689-13.409,10.133-14.204c0.668-0.218,1.32-0.298,2.015-0.254\n                  c3.185,0.212,6.358,1.559,5.815,9.979C164.664,46.132,161.831,53.693,156.716,61.478z"],["d","M164.55,209.161c5.728-2.568,10.621-6.478,14.576-11.651c5.055-6.561,7.897-14.316,8.467-23.047\n                  c0.72-10.719-1.854-20.438-7.617-28.895c-6.322-9.264-14.98-14.317-25.745-15.026c-1.232-0.081-2.543-0.075-3.895,0.025\n                  l-2.304-17.191l-9.668,7.112l1.483,12.194c-5.789,2.393-10.827,6.17-15.017,11.255c-4.823,5.924-7.508,12.443-7.964,19.382\n                  c-0.466,7.208,1.142,13.81,4.782,19.583c1.895,3.081,4.507,5.82,7.498,8.058c4.906,3.65,10.563,3.376,11.459,1.393\n                  c0.906-1.983-2.455-5.095-5.09-9.248c-1.502-2.351-2.242-5.173-2.242-8.497c0-7.053,4.256-13.116,10.317-15.799l5.673,44.211\n                  l1.325,10.258c0.864,4.873,1.719,9.725,2.537,14.52c1,6.488,1.352,12.112,1.041,16.715c-0.419,6.375-2.408,11.584-5.919,15.493\n                  c-2.234,2.485-4.844,4.055-7.795,4.925c3.961-3.962,6.414-9.43,6.414-15.478c0-12.075-9.792-21.872-21.87-21.872\n                  c-3.353,0-6.491,0.812-9.329,2.159c-0.36,0.155-0.699,0.388-1.054,0.574c-0.779,0.425-1.559,0.85-2.286,1.362\n                  c-0.249,0.187-0.487,0.403-0.732,0.605c-4.888,3.816-8.091,9.616-8.375,16.229c0,0.01-0.011,0.021-0.011,0.031\n                  c0,0.005,0,0.01,0,0.016c-0.013,0.311-0.09,0.59-0.09,0.896c0,0.259,0.067,0.492,0.078,0.74\n                  c-0.011,7.084,2.933,13.179,8.839,18.118c5.584,4.666,12.277,7.28,19.892,7.777c4.327,0.28,8.505-0.217,12.407-1.485\n                  c3.189-1.041,6.275-2.62,9.149-4.687c6.96-5.022,10.75-11.584,11.272-19.532c0.399-6.063,0.094-13.235-0.937-21.411l-2.838-18.429\n                  l-7.156-52.899c7.984,1.532,14.027,8.543,14.027,16.968c0,5.986-1.937,15.431-5.551,20.376L164.55,209.161z"],[4,"ngIf"],["aria-label","search button",1,"btn","btn-menu","btn-search","d-md-none",3,"click"],["class","glyph glyph-magnifier",4,"ngIf"],["class","glyph glyph-clear",4,"ngIf"],["role","form",3,"ngClass","ngSubmit"],["searchForm","ngForm"],["type","text","id","mobileSearch","placeholder","Search for","name","search",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"js-side-nav","side-nav",3,"ngClass"],[1,"js-side-nav-container","side-nav__container"],[1,"side-nav__content","nav","flex-column"],[1,"d-none","d-md-block","search-bar"],[1,"form-group"],[1,"input-group"],["role","form",3,"ngSubmit"],["type","text","id","search","placeholder","Search for","name","search",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-addon"],[1,"glyph","glyph-magnifier"],[3,"ngClass"],["routerLink","/home"],[1,"glyph","glyph-home"],[1,"d-sm-none",3,"ngClass"],["routerLink","/letters"],[1,"glyph","glyph-characters"],["routerLink","/artists"],[1,"glyph","glyph-people"],["routerLink","/albums"],[1,"glyph","glyph-music-album"],["routerLink","/years"],[1,"glyph","glyph-calendar"],["routerLink","/playlists"],[1,"glyph","glyph-music-info"],["routerLink","/now-playing"],[1,"glyph","glyph-audio"],[3,"ngClass",4,"ngIf"],["routerLink","/settings"],[1,"glyph","glyph-settings"],[1,"d-none","d-lg-block","side-nav-xl"],[1,"nav-item",3,"ngClass"],["routerLink","/home","tooltip","Home","triggers","hover"],[1,"d-md-none","nav-item",3,"ngClass"],["routerLink","/letters","tooltip","Letters","triggers","hover"],["routerLink","/artists","tooltip","Artists","triggers","hover"],["routerLink","/albums","tooltip","Albums","triggers","hover"],["routerLink","/years","tooltip","Years","triggers","hover"],["routerLink","/playlists","tooltip","Playlists","triggers","hover"],["routerLink","/now-playing","tooltip","Now Playing","triggers","hover"],["class","nav-item",3,"ngClass",4,"ngIf"],["routerLink","/settings","tooltip","Settings","triggers","hover"],[1,"clickable","d-none","d-sm-inline",3,"click"],[1,"glyph","glyph-clear"],["routerLink","/scrobble-cache"],[1,"glyph","glyph-upload"],["routerLink","/scrobble-cache","triggers","hover",3,"tooltip"]],template:function(t,e){1&t&&(i.Ob(0,"div",0),i.Ob(1,"span",1),i.Wb("click",(function(t){return e.toggleMenu()})),i.Ob(2,"button",2),i.Mb(3,"span",3),i.Nb(),i.Ob(4,"a",4),i.Zb(),i.Ob(5,"svg",5),i.Ob(6,"g"),i.Mb(7,"path",6),i.Mb(8,"path",7),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Yb(),i.Ob(9,"h1"),i.xc(10,A,6,2,"span",8),i.xc(11,C,2,1,"span",8),i.xc(12,O,2,0,"span",8),i.xc(13,x,2,1,"span",8),i.xc(14,P,2,0,"span",8),i.Nb(),i.Ob(15,"button",9),i.Wb("click",(function(t){return e.toggleSearch()})),i.xc(16,L,1,0,"i",10),i.xc(17,N,1,0,"i",11),i.Nb(),i.Ob(18,"form",12,13),i.Wb("ngSubmit",(function(t){return e.onSubmit()})),i.Ob(20,"input",14,15),i.Wb("ngModelChange",(function(t){return e.search.query=t})),i.Nb(),i.Nb(),i.Nb(),i.Ob(22,"aside",16),i.Ob(23,"nav",17),i.Ob(24,"ul",18),i.Ob(25,"li",19),i.Ob(26,"div",20),i.Ob(27,"div",21),i.Ob(28,"form",22,13),i.Wb("ngSubmit",(function(t){return e.onSubmit()})),i.Ob(30,"input",23,15),i.Wb("ngModelChange",(function(t){return e.search.query=t})),i.Nb(),i.Ob(32,"button",24),i.Mb(33,"i",25),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(34,"li",26),i.Ob(35,"a",27),i.Mb(36,"span",28),i.zc(37," Home"),i.Nb(),i.Nb(),i.Ob(38,"li",29),i.Ob(39,"a",30),i.Mb(40,"span",31),i.zc(41," Letters"),i.Nb(),i.Nb(),i.Ob(42,"li",26),i.Ob(43,"a",32),i.Mb(44,"span",33),i.zc(45," Artists"),i.Nb(),i.Nb(),i.Ob(46,"li",26),i.Ob(47,"a",34),i.Mb(48,"span",35),i.zc(49," Albums"),i.Nb(),i.Nb(),i.Ob(50,"li",26),i.Ob(51,"a",36),i.Mb(52,"span",37),i.zc(53," Years"),i.Nb(),i.Nb(),i.Ob(54,"li",26),i.Ob(55,"a",38),i.Mb(56,"span",39),i.zc(57," Playlists"),i.Nb(),i.Nb(),i.Ob(58,"li",26),i.Ob(59,"a",40),i.Mb(60,"span",41),i.zc(61," Now playing"),i.Nb(),i.Nb(),i.xc(62,M,4,4,"li",42),i.Ob(63,"li",26),i.Ob(64,"a",43),i.Mb(65,"span",44),i.zc(66," Settings"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(67,"aside",45),i.Ob(68,"ul",18),i.Ob(69,"li",46),i.Ob(70,"a",47),i.Mb(71,"span",28),i.Nb(),i.Nb(),i.Ob(72,"li",48),i.Ob(73,"a",49),i.Mb(74,"span",31),i.Nb(),i.Nb(),i.Ob(75,"li",46),i.Ob(76,"a",50),i.Mb(77,"span",33),i.Nb(),i.Nb(),i.Ob(78,"li",46),i.Ob(79,"a",51),i.Mb(80,"span",35),i.Nb(),i.Nb(),i.Ob(81,"li",46),i.Ob(82,"a",52),i.Mb(83,"span",37),i.Nb(),i.Nb(),i.Ob(84,"li",46),i.Ob(85,"a",53),i.Mb(86,"span",39),i.Nb(),i.Nb(),i.Ob(87,"li",46),i.Ob(88,"a",54),i.Mb(89,"span",41),i.Nb(),i.Nb(),i.xc(90,j,3,4,"li",55),i.Ob(91,"li",46),i.Ob(92,"a",56),i.Mb(93,"span",44),i.Nb(),i.Nb(),i.Nb(),i.Nb()),2&t&&(i.zb(10),i.gc("ngIf",e.path&&e.path.album),i.zb(1),i.gc("ngIf",e.path&&e.path.artist&&!e.path.album),i.zb(1),i.gc("ngIf",e.path&&!e.path.artist),i.zb(1),i.gc("ngIf",!e.path&&e.page),i.zb(1),i.gc("ngIf",!e.path&&!e.page),i.zb(2),i.gc("ngIf",!e.topSearchVisible),i.zb(1),i.gc("ngIf",e.topSearchVisible),i.zb(1),i.gc("ngClass",i.jc(29,I,e.topSearchVisible)),i.zb(2),i.gc("ngModel",e.search.query),i.zb(2),i.gc("ngClass",i.jc(31,E,e.menuVisible)),i.zb(8),i.gc("ngModel",e.search.query),i.zb(4),i.gc("ngClass",i.jc(33,T,"Home"===e.page)),i.zb(4),i.gc("ngClass",i.jc(35,T,"Letters"===e.page)),i.zb(4),i.gc("ngClass",i.jc(37,T,"Artists"===e.page)),i.zb(4),i.gc("ngClass",i.jc(39,T,"Albums"===e.page)),i.zb(4),i.gc("ngClass",i.jc(41,T,"Years"===e.page)),i.zb(4),i.gc("ngClass",i.jc(43,T,"Playlists"===e.page)),i.zb(4),i.gc("ngClass",i.jc(45,T,"Now playing"===e.page)),i.zb(4),i.gc("ngIf",e.manualScrobblingList.length>0),i.zb(1),i.gc("ngClass",i.jc(47,T,"Settings"===e.page)),i.zb(6),i.gc("ngClass",i.jc(49,T,"Home"===e.page)),i.zb(3),i.gc("ngClass",i.jc(51,T,"Letters"===e.page)),i.zb(3),i.gc("ngClass",i.jc(53,T,"Artists"===e.page)),i.zb(3),i.gc("ngClass",i.jc(55,T,"Albums"===e.page)),i.zb(3),i.gc("ngClass",i.jc(57,T,"Years"===e.page)),i.zb(3),i.gc("ngClass",i.jc(59,T,"Playlists"===e.page)),i.zb(3),i.gc("ngClass",i.jc(61,T,"Now playing"===e.page)),i.zb(3),i.gc("ngIf",e.manualScrobblingList.length>0),i.zb(1),i.gc("ngClass",i.jc(63,T,"Settings"===e.page)))},directives:[y.l,n.p,n.g,n.h,y.j,n.a,n.f,n.i,w.d,o.a],encapsulation:2}),t})();const $=function(t){return{active:t}};function D(t,e){if(1&t){const t=i.Pb();i.Ob(0,"li",2),i.Ob(1,"a",3),i.Wb("click",(function(s){i.rc(t);const r=e.$implicit;return i.ac().onSelect(r)})),i.zc(2),i.Nb(),i.Nb()}if(2&t){const t=e.$implicit;i.zb(1),i.gc("ngClass",i.jc(2,$,t.active)),i.zb(1),i.Ac(t.letter)}}let R=(()=>{class t{constructor(t,e){this.coreService=t,this.router=e,this.activeLetter=null,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()})}ngOnInit(){this.letters=this.core.sortedLetters}onSelect(t){this.activeLetter&&(this.activeLetter.active=!1),this.activeLetter=t,this.router.navigate(["/letter",t.escapedLetter])}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(p.a),i.Lb(w.c))},t.\u0275cmp=i.Fb({type:t,selectors:[["mdb-letters"]],decls:2,vars:1,consts:[[1,"nav","d-none","d-md-flex","nav-letters"],["class","nav-item align-self-stretch flex-grow-1 text-center",4,"ngFor","ngForOf"],[1,"nav-item","align-self-stretch","flex-grow-1","text-center"],[3,"ngClass","click"]],template:function(t,e){1&t&&(i.Ob(0,"ul",0),i.xc(1,D,3,4,"li",1),i.Nb()),2&t&&(i.zb(1),i.gc("ngForOf",e.letters))},directives:[y.k,y.j],encapsulation:2}),t})();s("hR/0");var B=s("KI15"),U=s("meIv"),W=s("Pbcf");const V=t=>(t.r=Math.floor(t.r),t.g=Math.floor(t.g),t.b=Math.floor(t.b),t.a=1,t),H=(t,e)=>U.a.isReadable(t,e)?V(new U.a(t).toRgb()):H("#000"===e?new U.a(t).lighten(3):new U.a(t).darken(3),e);function F(t,e,s){if(window.runningInElectron&&!s)document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbuntaint",{detail:{url:t}}));else{const s=new Image;s.crossOrigin="Anonymous",s.addEventListener("load",t=>{const i=document.createElement("canvas"),r=i.getContext("2d");i.width=s.width,i.height=s.height,r.drawImage(s,0,0);const n=(new W.a).getColor(i).value;e(V({r:n[0],g:n[1],b:n[2]}))},!1),s.src=t}}function q(t){const e=V(new U.a(t).lighten().toRgb());return{rgba:t,textLight:H(t,"#fff"),textDark:H(t,"#000"),lighten:e,darken:V(new U.a(t).darken().toRgb()),letterColor:(s=new U.a(t),U.a.readability("#000",s)>U.a.readability("#fff",s)?"#000":"#fff")};var s}function X(t){const e=document.createElement("style"),{rgba:s,darken:i,lighten:r,textLight:n,textDark:a,letterColor:o}=t;e.setAttribute("type","text/css"),e.id="custom-css-node",e.textContent=`\n      @charset "UTF-8";\n      :root {\n        --primary: rgba(${s.r}, ${s.g}, ${s.b}, 1);\n        --darken: rgba(${i.r}, ${i.g}, ${i.b}, 1);\n        --lighten: rgba(${r.r}, ${r.g}, ${r.b}, 1);\n        --text-light: rgba(${n.r}, ${n.g}, ${n.b}, 1);\n        --text-dark: rgba(${a.r}, ${a.g}, ${a.b}, 1);\n        --letter-color: ${o};\n      }`,J(),document.querySelector("body").appendChild(e)}function J(){document.querySelector("#custom-css-node")&&document.querySelector("#custom-css-node").remove()}function G(t,e){1&t&&i.Mb(0,"i",26)}function K(t,e){1&t&&i.Mb(0,"i",27)}const Y=function(t){return{width:t}},Z=function(t,e){return{"glyph-volume":t,"glyph-mute":e}},Q=function(t){return{active:t}};function tt(t,e){if(1&t){const t=i.Pb();i.Ob(0,"div",1),i.Ob(1,"div",2),i.Ob(2,"div",3),i.Wb("click",(function(e){return i.rc(t),i.ac().jump(e)})),i.Mb(3,"div",4),i.Nb(),i.Nb(),i.Ob(4,"div",5),i.Ob(5,"div",6),i.Ob(6,"div",7),i.Wb("click",(function(e){return i.rc(t),i.ac().navigateToNowPlaying()})),i.Ob(7,"album-art",8),i.Wb("art",(function(e){return i.rc(t),i.ac().onChangeArt(e)})),i.Nb(),i.Nb(),i.Ob(8,"div",9),i.Ob(9,"h4"),i.zc(10),i.Nb(),i.Ob(11,"h5"),i.Ob(12,"a",10),i.Wb("click",(function(e){return i.rc(t),i.ac().navigateToArtist()})),i.zc(13),i.Nb(),i.Ob(14,"span",11),i.zc(15," \u2022 "),i.Ob(16,"a",10),i.Wb("click",(function(e){return i.rc(t),i.ac().navigateToAlbum()})),i.zc(17),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(18,"div",12),i.Ob(19,"a",13),i.Wb("click",(function(e){return i.rc(t),i.ac().prev()})),i.Mb(20,"span",14),i.Nb(),i.Ob(21,"a",13),i.Wb("click",(function(e){return i.rc(t),i.ac().togglePlayPause()})),i.xc(22,G,1,0,"i",15),i.xc(23,K,1,0,"i",16),i.Nb(),i.Ob(24,"a",13),i.Wb("click",(function(e){return i.rc(t),i.ac().next()})),i.Mb(25,"span",17),i.Nb(),i.Ob(26,"a",18),i.Wb("click",(function(e){return i.rc(t),i.ac().toggleVolumeWindow(e)})),i.Mb(27,"span",19),i.Nb(),i.Ob(28,"a",20),i.Wb("click",(function(e){return i.rc(t),i.ac().toggleLoved()})),i.Mb(29,"i",21),i.Nb(),i.Ob(30,"a",22),i.Wb("click",(function(e){return i.rc(t),i.ac().toggleShuffle()})),i.Mb(31,"i",23),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(32,"div",24),i.Ob(33,"input",25),i.Wb("ngModelChange",(function(e){return i.rc(t),i.ac().volume=e}))("input",(function(e){return i.rc(t),i.ac().setVolume()}))("change",(function(e){return i.rc(t),i.ac().setVolume()})),i.Nb(),i.Nb(),i.Nb()}if(2&t){const t=i.ac();i.zb(3),i.gc("ngStyle",i.jc(13,Y,t.track.position/t.track.duration*100+"%")),i.zb(4),i.gc("artist",t.track.trackArtist)("album",t.track.album.name),i.zb(3),i.Ac(t.track.title),i.zb(3),i.Ac(t.track.trackArtist),i.zb(4),i.Ac(t.track.album.name),i.zb(5),i.gc("ngIf",t.isPlaying),i.zb(1),i.gc("ngIf",t.isPaused),i.zb(4),i.gc("ngClass",i.kc(15,Z,t.volume>0,0==t.volume)),i.zb(1),i.gc("ngClass",i.jc(18,Q,t.track.isLoved)),i.zb(2),i.gc("ngClass",i.jc(20,Q,t.isShuffled)),i.zb(2),i.gc("hidden",!t.showVolumeWindow),i.zb(1),i.gc("ngModel",t.volume)}}let et=(()=>{class t{constructor(t,e,s,i,r,n,a){this.pathService=t,this.playerService=e,this.router=s,this.lastFMService=i,this.coreService=r,this.animationService=n,this.colorService=a,this.showPlayer=!1,this.usesDynamicAccentColor=this.booleanState("dynamic-accent-color"),this.isPlaying=!1,this.isPaused=!1,this.hasScrobbledCurrentTrack=!1,this.isCurrentPlaylistLoaded=!1,this.isShuffled=!1,this.forceRestart=!1,this.showVolumeWindow=!1,this.volume=100,this.isHostedApp="undefined"!=typeof Windows,this.subscription=this.playerService.playlistAnnounced$.subscribe(t=>{t?(this.playlist=t.playlist,this.trackIndex=t.startIndex,this.isPaused=t.isPaused,this.isPlaying=t.isPlaying,this.isShuffled=t.isShuffled,this.forceRestart=t.forceRestart,this.showPlayer=this.isPaused||this.isPlaying,this.setTrack(t.position)):(this.isPlaying=!1,this.showPlayer=!1,this.mediaObject.pause())}),this.subscription5=this.playerService.hideVolumeWindowAnnounced$.subscribe(()=>{this.showVolumeWindow=!1}),this.mediaObject=document.querySelector("audio"),this.mediaObject.crossOrigin="anonymous",this.mediaObject.canPlayType("audio/flac"),this.mediaObject.addEventListener("ended",()=>{this.next()}),this.mediaObject.addEventListener("timeupdate",()=>{this.updateTime()}),this.mediaObject.addEventListener("play",()=>{this.onplay()}),this.mediaObject.addEventListener("progress",()=>{this.onprogress()}),this.mediaObject.addEventListener("pause",()=>{this.onpause()}),this.mediaObject.addEventListener("ended",()=>{this.onstop()});const o=localStorage.getItem("dsm");if(o&&(this.url=o),this.core=this.coreService.getCore(),this.subscription2=this.core.coreParsed$.subscribe(t=>{const e=localStorage.getItem("save-playlist-state");e&&"true"===e&&this.readCurrentPlaylist()}),this.subscription3=this.playerService.volumeAnnounced.subscribe(t=>{this.volume=t,this.mediaObject.volume=this.volume/100}),this.subscription4=t.pageAnnounced$.subscribe(t=>{"Now playing"===t.page&&(this.showVolumeWindow=!1)}),this.isHostedApp&&(this.systemMediaControls=Windows.Media.SystemMediaTransportControls.getForCurrentView(),this.displayUpdater=this.systemMediaControls.displayUpdater,this.systemMediaControls.isEnabled=!0,this.systemMediaControls.isPlayEnabled=!0,this.systemMediaControls.isPauseEnabled=!0,this.systemMediaControls.isStopEnabled=!0,this.systemMediaControls.isNextEnabled=!0,this.systemMediaControls.isPreviousEnabled=!0,this.systemMediaControls.addEventListener("buttonpressed",t=>{const e=Windows.Media.SystemMediaTransportControlsButton;switch(t.button){case e.play:this.mediaObject.play();break;case e.pause:this.mediaObject.pause();break;case e.stop:this.playerService.stop();break;case e.next:this.next();break;case e.previous:this.prev();break;default:console.warn("key not mapped in application",t.button)}},!1),this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.closed),-1===navigator.userAgent.indexOf("Mobi")){const t=document.querySelector("canvas");let e=t.offsetWidth,s=t.offsetHeight;t.width=e,t.height=s,t.getContext("2d"),this.audioCtx=new(window.AudioContext||window.webkitAudioContext);const i=this.audioCtx.createScriptProcessor(2048,1,1);i.connect(this.audioCtx.destination);const r=this.audioCtx.createAnalyser(),n=this.audioCtx.createMediaElementSource(this.mediaObject);r.fftSize=128;const a=r.frequencyBinCount;n.connect(r),r.connect(i),n.connect(this.audioCtx.destination),i.onaudioprocess=()=>{const t=document.querySelector("canvas"),i=this.rgba||{r:0,g:110,b:205,a:1};e=t.offsetWidth,s=t.offsetHeight,t.width=e,t.height=s;const n=t.getContext("2d"),o=new Uint8Array(a);r.getByteFrequencyData(o),n.clearRect(0,0,e,s);const c=Math.floor(e/a*1.1);let l,h=0;const u=s/150*1.17;for(let e=0;e<a;e++)l=o[e]*u,n.fillStyle=`rgba(${i.r},${i.g},${i.b},${o[e]/255})`,n.fillRect(h,s-l/2,c,l/2),h+=c+1}}this.subscription6=this.colorService.color$.subscribe(t=>{this.rgba=t}),this.subscription7=this.colorService.blob$.subscribe(()=>{const t=new Blob([window.externalBlob],{type:"image/png"}),e=URL.createObjectURL(t),s=new Image;s.src=e,F(s.src,t=>{const e=q(t);this.colorService.setColor(e.rgba),X(e)},!0)})}setTrack(t){if(this.track=this.playlist.tracks[this.trackIndex],!this.currentTrack||this.track&&this.currentTrack.id!==this.track.id||this.forceRestart){const t=localStorage.getItem("dsm");t&&(this.url=t);const e=localStorage.getItem("jwt");this.mediaObject.src=`${this.url}/listen?path=${encodeURIComponent(this.track.source.url)}&jwt=${e}`,this.currentTrack=this.track,this.hasScrobbledCurrentTrack=!1,this.animationService.requestAnimation("enter",document.querySelector(".player h4")),this.animationService.requestAnimation("enter",document.querySelector(".player h5"))}this.isPlaying?this.mediaObject.play():this.mediaObject.pause(),this.isCurrentPlaylistLoaded&&(this.mediaObject.currentTime=localStorage.getItem("current-time")||0,this.isCurrentPlaylistLoaded=!1),t&&(this.mediaObject.currentTime=t)}readCurrentPlaylist(){Object(v.c)("current-playlist").then(t=>{const e=t;if(e){const t=this.coreService.getCore(),s=[];e.ids.forEach(e=>{s.push(t.tracks[e])});const i=new B.a;i.tracks=s,i.name="Current Playlist",i.isContinues=e.isContinues||!1,i.type=e.type,this.isShuffled=e.isShuffled,this.isCurrentPlaylistLoaded=!0,this.playerService.doPlayPlaylist(i,e.current,!1,e.isShuffled)}})}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe(),this.subscription3.unsubscribe(),this.subscription4.unsubscribe(),this.subscription5.unsubscribe(),this.subscription6.unsubscribe(),this.subscription7.unsubscribe(),this.mediaObject.removeEventListener("ended"),this.mediaObject.removeEventListener("timeupdate"),this.mediaObject.removeEventListener("play"),this.showVolumeWindow=!1}navigateToArtist(){this.router.navigate(["/letter",this.track.album.artist.letter.escapedLetter,"artist",this.track.album.artist.sortName])}navigateToAlbum(){this.router.navigate(["/letter",this.track.album.artist.letter.escapedLetter,"artist",this.track.album.artist.sortName,"album",this.track.album.sortName])}navigateToNowPlaying(){this.router.navigate(["/now-playing"])}next(){this.trackIndex<this.playlist.tracks.length-1?(this.trackIndex++,this.playerService.next()):this.playlist.isContinues?(this.trackIndex=0,"random"===this.playlist.type||"radio"===this.playlist.type?this.playerService.nextPlaylist(this.playlist.type):this.playerService.nextAlbum(this.track.album)):this.playerService.stop()}prev(){this.trackIndex>0&&(this.trackIndex--,this.playerService.prev())}togglePlayPause(){this.playerService.togglePlayPause()}updateTime(){if(this.track.position=1e3*this.mediaObject.currentTime,!this.hasScrobbledCurrentTrack&&(this.track.position>=t.SCROBBLETIME||this.track.position/this.track.duration>=.5&&performance.now()>t.SCROBBLETIME)){this.hasScrobbledCurrentTrack=!0;try{this.lastFMService.scrobbleTrack(this.track).subscribe(()=>{})}catch(e){console.error(e)}}localStorage.setItem("current-time",this.mediaObject.currentTime.toString())}onplay(){try{this.lastFMService.announceNowPlaying(this.track).subscribe()}catch(e){}var t;document.title=`${this.track.title} by ${this.track.trackArtist}`,"mediaSession"in navigator&&Object(v.c)(`art-${this.track.trackArtist}-${this.track.album.name}`).then(t=>{t&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.track.title,artist:this.track.trackArtist,album:this.track.album.name,artwork:[{src:t,sizes:"500x500",type:"image/png"}]})),navigator.mediaSession.setActionHandler("play",()=>{this.togglePlayPause()}),navigator.mediaSession.setActionHandler("pause",()=>{this.togglePlayPause()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.prev()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.next()})}),this.isHostedApp&&(this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.playing,this.displayUpdater.type=Windows.Media.MediaPlaybackType.music,Object(v.c)(`art-${this.track.trackArtist}-${this.track.album.name}`).then(t=>{try{void 0!==this.displayUpdater&&(this.displayUpdater.musicProperties.albumArtist=this.track.trackArtist,this.displayUpdater.musicProperties.artist=this.track.trackArtist,this.displayUpdater.musicProperties.albumTitle=this.track.album.name,this.displayUpdater.musicProperties.title=this.track.title,t&&(this.displayUpdater.thumbnail=Windows.Storage.Streams.RandomAccessStreamReference.createFromUri(new Windows.Foundation.Uri(t))),this.displayUpdater.update())}catch(e){console.error("error occurred",e)}this.updateWinTile(t)})),document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbplaying",{detail:this.track})),this.audioCtx&&this.audioCtx.resume(),this.usesDynamicAccentColor=this.booleanState("dynamic-accent-color"),this.usesDynamicAccentColor&&(t=this.rgba)&&X(q(t))}onstop(){document.querySelector("mdb-player").dispatchEvent(new Event("external.mdbstopped")),document.title="JSMusicDB Next",this.isHostedApp&&(this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.stopped),this.audioCtx&&this.audioCtx.suspend(),J()}onpause(){document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbpaused",{detail:this.track})),document.title="JSMusicDB Next",this.isHostedApp&&(this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.paused),this.audioCtx&&this.audioCtx.suspend(),J()}onChangeArt(t){if(this.usesDynamicAccentColor){const{art:e}=t.detail;F(e,t=>{const e=q(t);this.colorService.setColor(e.rgba),X(e)},!1)}else this.colorService.setColor({r:0,g:110,b:205,a:1}),J()}toggleShuffle(){this.isShuffled=!this.isShuffled,this.playerService.shufflePlaylist(this.isShuffled)}toggleLoved(){this.track.isLoved=!this.track.isLoved,this.lastFMService.toggleLoved(this.track).subscribe()}toggleVolumeWindow(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),this.showVolumeWindow=!this.showVolumeWindow}onprogress(){const t=this.mediaObject.buffered;0!==t.length&&(this.track.buffered.start=1e3*t.start(0!==t.length?t.length-1:0),this.track.buffered.end=1e3*t.end(0!==t.length?t.length-1:0))}setVolume(){this.mediaObject.volume=this.volume/100,this.playerService.setVolume(this.volume)}jump(t){const e=(t.clientX||t.changedTouches[0].clientX)/document.querySelector(".player").clientWidth;this.playerService.setPosition(this.track.duration/1e3*e)}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}updateWinTile(t){const e=Windows.UI.Notifications;e.TileUpdateManager.createTileUpdaterForApplication("App").clear();const s=e.TileUpdateManager.getTemplateContent(e.TileTemplateType.tileSquare150x150PeekImageAndText02);let i=s.getElementsByTagName("text")[0];i.innerText=this.track.title,i=s.getElementsByTagName("text")[1],i.innerText=this.track.trackArtist,t&&(s.getElementsByTagName("image")[0].attributes[1].value=t);const r=new Date,n=new Date(r.getTime()+Number(this.track.duration));let a=s.importNode(this.getTileContent(t,"tileSquare310x310ImageAndText02").getElementsByTagName("binding").item(0),!0);s.getElementsByTagName("visual").item(0).appendChild(a),a=s.importNode(this.getTileContent(t,"tileWide310x150PeekImage02").getElementsByTagName("binding").item(0),!0),s.getElementsByTagName("visual").item(0).appendChild(a),a=s.importNode(this.getTileContent(t,"tileSquare71x71Image").getElementsByTagName("binding").item(0),!0),s.getElementsByTagName("visual").item(0).appendChild(a);const o=new e.TileNotification(s);o.expirationTime=n,e.TileUpdateManager.createTileUpdaterForApplication("App").update(o)}getTileContent(t,e){const s=Windows.UI.Notifications,i=s.TileUpdateManager.getTemplateContent(s.TileTemplateType[e]);try{i.getElementsByTagName("text")[0].innerText=this.track.title}catch(r){console.error(r)}try{i.getElementsByTagName("text")[1].innerText=this.track.trackArtist}catch(r){console.error(r)}return t&&(i.getElementsByTagName("image")[0].attributes[1].value=t),i}}return t.SCROBBLETIME=24e4,t.\u0275fac=function(e){return new(e||t)(i.Lb(f.a),i.Lb(l.a),i.Lb(w.c),i.Lb(g.a),i.Lb(p.a),i.Lb(u.a),i.Lb(b.a))},t.\u0275cmp=i.Fb({type:t,selectors:[["mdb-player"]],decls:1,vars:1,consts:[["class","player",4,"ngIf"],[1,"player"],[1,"row"],[1,"progress",3,"click"],["role","progressbar",1,"progress-bar",3,"ngStyle"],[1,"container-fluid"],[1,"row","row-sm"],[1,"col-xs-4","col-player-art",3,"click"],[3,"artist","album","art"],[1,"col-xs-11","col-player-special"],[3,"click"],[1,"hidden-xs","color-type-secondary"],[1,"col-xs-9","text-right","col-player-controls"],[1,"btn","btn-link",3,"click"],[1,"glyph","glyph-previous"],["class","glyph glyph-pause",4,"ngIf"],["class","glyph glyph-play",4,"ngIf"],[1,"glyph","glyph-next"],[1,"btn","btn-link","d-none","d-md-inline-block",3,"click"],[1,"glyph",3,"ngClass"],[1,"btn","btn-link","d-none","d-md-inline-block","btn-love",3,"ngClass","click"],[1,"glyph","glyph-star-outline"],[1,"btn","btn-link","d-none","d-md-inline-block","btn-shuffle",3,"ngClass","click"],[1,"glyph","glyph-shuffle"],[1,"volume-control",3,"hidden"],["type","range","min","0","max","100",3,"ngModel","ngModelChange","input","change"],[1,"glyph","glyph-pause"],[1,"glyph","glyph-play"]],template:function(t,e){1&t&&i.xc(0,tt,34,22,"div",0),2&t&&i.gc("ngIf",e.showPlayer)},directives:[y.l,y.m,y.j,n.l,n.a,n.f,n.i],encapsulation:2}),t})();function st(t,e){if(1&t&&(i.Ob(0,"div"),i.zc(1),i.Nb()),2&t){const t=i.ac(2);i.zb(1),i.Bc(" progress: ",t.scanperc,"% ")}}function it(t,e){if(1&t&&(i.Ob(0,"div",6),i.Ob(1,"div",7),i.Ob(2,"div",8),i.Ob(3,"div",9),i.zc(4," Collection is being reloaded, please wait. "),i.xc(5,st,2,1,"div",10),i.Ob(6,"div",11),i.Mb(7,"div",12),i.Mb(8,"div",12),i.Mb(9,"div",12),i.Mb(10,"div",12),i.Mb(11,"div",12),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb()),2&t){const t=i.ac();i.zb(5),i.gc("ngIf",t.scanperc)}}const rt=function(t){return{isPlaying:t}};let nt=(()=>{class t{constructor(t,e,s,i,r,n,a){this.collectionService=t,this.coreService=e,this.loginService=s,this.configService=i,this.playerService=r,this.colorService=n,this.isPlaying=!1,this.scanperc=0,this.isReloading=!1,this.letter="N",this.path="JSMusicDB Next",this.isLoading=!1,this.hasBeenReloading=!1,this.isHostedApp="undefined"!=typeof Windows,this.loginService.hasToken&&(this.isLoading=!0,this.poll()),this.viewContainerRef=a,this.subscription=this.playerService.playlistAnnounced$.subscribe(t=>{this.isPlaying=!!t}),this.booleanState("tracking-state")?navigator.geolocation.getCurrentPosition(t=>{this.configService.getSunriseInfo(t.coords.latitude,t.coords.longitude).subscribe(t=>{this.configService.startDate=new Date(t.results.sunset),this.configService.stopDate=new Date(t.results.sunrise),this.configService.stopDate.setDate(this.configService.stopDate.getDate()+1),this.configService.geoSource.next(),this.configService.applyTheme()})},t=>{this.configService.startDate=new Date,this.configService.startDate.setHours(21,0,0),this.configService.stopDate=new Date,this.configService.stopDate.setDate(this.configService.stopDate.getDate()+1),this.configService.stopDate.setHours(7,0,0),this.configService.geoSource.next(),this.configService.applyTheme()}):(this.configService.startDate=new Date,this.configService.startDate.setHours(21,0,0),this.configService.stopDate=new Date,this.configService.stopDate.setDate(this.configService.stopDate.getDate()+1),this.configService.stopDate.setHours(7,0,0),this.configService.geoSource.next(),this.configService.applyTheme())}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.mediaObject=document.querySelector("audio");const t=this.mediaObject.canPlayType("audio/flac");this.isFlacSupported="probably"===t||"maybe"===t}getCollection(){this.collectionService.getCollection().subscribe(t=>this.fillCollection(t),t=>console.error(t))}fillCollection(t){localStorage.setItem("lastParsed",(new Date).getTime().toString()),this.coreService.getCore().parseSourceJson(t,this.isFlacSupported),this.isLoading=!1}hideVolumeWindow(){this.playerService.hideVolumeControl()}poll(){this.collectionService.poll().subscribe(t=>{this.scanperc=t.progress,"ready"!==t.status?(this.isReloading=!0,document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbscanning",{detail:{percentage:this.scanperc}})),setTimeout(t=>{this.poll()},5e3),this.hasBeenReloading=!0):(this.isReloading=!1,this.hasBeenReloading&&document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbscanstop")),this.getCollection())})}onExternalPrev(t){this.playerService.prev()}onExternalNext(t){this.playerService.next()}onExternalToggle(t){this.playerService.togglePlayPause()}onExternalStop(t){this.playerService.stop()}onExternalBlob(){this.colorService.setBlob()}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(d.a),i.Lb(p.a),i.Lb(c.a),i.Lb(m.a),i.Lb(l.a),i.Lb(b.a),i.Lb(i.N))},t.\u0275cmp=i.Fb({type:t,selectors:[["mdb-root"]],features:[i.yb([d.a,p.a,f.a,l.a,g.a,u.a,m.a,h.a,b.a])],decls:10,vars:7,consts:[["id","reloading",4,"ngIf"],[3,"ngClass","click"],[1,"fixed-top",2,"z-index","1029",3,"click"],[1,"main-content",3,"ngClass","click"],[2,"display","none"],[3,"mdbprev","mdbnext","mdbtoggle","mdbstop","click","mdbblob"],["id","reloading"],[1,"container"],[1,"row"],[1,"col"],[4,"ngIf"],[1,"progress-bar"],[1,"progress-circle"]],template:function(t,e){1&t&&(i.xc(0,it,12,1,"div",0),i.Ob(1,"div",1),i.Wb("click",(function(t){return e.hideVolumeWindow})),i.Mb(2,"mdb-topmenu"),i.Nb(),i.Ob(3,"div",2),i.Wb("click",(function(t){return e.hideVolumeWindow})),i.Mb(4,"mdb-letters"),i.Nb(),i.Ob(5,"div",3),i.Wb("click",(function(t){return e.hideVolumeWindow})),i.Mb(6,"router-outlet"),i.Nb(),i.Mb(7,"audio",4),i.Mb(8,"canvas"),i.Ob(9,"mdb-player",5),i.Wb("mdbprev",(function(t){return e.onExternalPrev(t)}))("mdbnext",(function(t){return e.onExternalNext(t)}))("mdbtoggle",(function(t){return e.onExternalToggle(t)}))("mdbstop",(function(t){return e.onExternalStop(t)}))("click",(function(t){return e.hideVolumeWindow()}))("mdbblob",(function(t){return e.onExternalBlob()})),i.Nb()),2&t&&(i.gc("ngIf",e.isReloading),i.zb(1),i.gc("ngClass",i.jc(3,rt,e.isPlaying)),i.zb(4),i.gc("ngClass",i.jc(5,rt,e.isPlaying)))},directives:[y.l,y.j,z,R,w.f,et],encapsulation:2}),t})(),at=(()=>{class t{constructor(t,e){this.loginService=t,this.router=e}canActivate(t,e){return new Promise(t=>{const s=e.url;window.scrollTo(0,0),t(this.checkLogin(s))})}checkLogin(t){return!!localStorage.getItem("jwt")||(this.router.navigate(["/login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(i.Sb(c.a),i.Sb(w.c))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();const ot=[at,c.a],ct=w.e.forRoot([{path:"login",loadChildren:()=>s.e(9).then(s.bind(null,"X3zk")).then(t=>t.LoginModule)},{path:"home",loadChildren:()=>Promise.all([s.e(0),s.e(6)]).then(s.bind(null,"ct+p")).then(t=>t.HomeModule),canActivate:[at]},{path:"letters",loadChildren:()=>s.e(8).then(s.bind(null,"mCIM")).then(t=>t.LettersModule),canActivate:[at]},{path:"artists",loadChildren:()=>Promise.all([s.e(0),s.e(5)]).then(s.bind(null,"3r4j")).then(t=>t.ArtistsModule),canActivate:[at]},{path:"albums",loadChildren:()=>Promise.all([s.e(0),s.e(3)]).then(s.bind(null,"fX0g")).then(t=>t.AlbumsModule),canActivate:[at]},{path:"years",loadChildren:()=>Promise.all([s.e(0),s.e(20)]).then(s.bind(null,"ZutQ")).then(t=>t.YearsModule),canActivate:[at]},{path:"playlists",loadChildren:()=>Promise.all([s.e(0),s.e(12)]).then(s.bind(null,"kez3")).then(t=>t.PlaylistsModule),canActivate:[at]},{path:"now-playing",loadChildren:()=>Promise.all([s.e(0),s.e(11)]).then(s.bind(null,"YxDV")).then(t=>t.NowPlayingModule),canActivate:[at]},{path:"settings",loadChildren:()=>Promise.all([s.e(0),s.e(17)]).then(s.bind(null,"7wo0")).then(t=>t.SettingsModule),canActivate:[at]},{path:"scrobble-cache",loadChildren:()=>s.e(15).then(s.bind(null,"BSpc")).then(t=>t.ScrobbleCacheModule),canActivate:[at]},{path:"search/:query",loadChildren:()=>Promise.all([s.e(0),s.e(16)]).then(s.bind(null,"RmqX")).then(t=>t.SearchModule),canActivate:[at]},{path:"letter/:letter",loadChildren:()=>Promise.all([s.e(0),s.e(7)]).then(s.bind(null,"pJo8")).then(t=>t.LetterDetailModule),canActivate:[at]},{path:"letter/:letter/artist/:artist",loadChildren:()=>Promise.all([s.e(0),s.e(4)]).then(s.bind(null,"2+yB")).then(t=>t.ArtistDetailModule),canActivate:[at]},{path:"letter/:letter/artist/:artist/album/:album",loadChildren:()=>Promise.all([s.e(0),s.e(2)]).then(s.bind(null,"jJnS")).then(t=>t.AlbumDetailModule),canActivate:[at]},{path:"",loadChildren:()=>Promise.all([s.e(0),s.e(6)]).then(s.bind(null,"ct+p")).then(t=>t.HomeModule),canActivate:[at]}],{preloadingStrategy:w.b});let lt=(()=>{class t{supports(t){let e=!1;return 0===t.indexOf("mdb")&&(e=!0),e}addEventListener(t,e,s){const i=this.manager.getZone(),r=t=>{i.run(()=>s(t))};return this.manager.getZone().runOutsideAngular(()=>{this.manager.addEventListener(t,"external."+e,r)})}addGlobalEventListener(t,e,s){const i=this.manager.getZone(),r=t=>i.run(()=>s(t));return this.manager.getZone().runOutsideAngular(()=>{this.manager.addGlobalEventListener(t,e,r)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();var ht=s("hDf6");let ut=(()=>{class t{constructor(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{}).catch(t=>{console.error("Registration failed with "+t)})}}return t.\u0275mod=i.Jb({type:t,bootstrap:[nt]}),t.\u0275inj=i.Ib({factory:function(e){return new(e||t)},providers:[ot,{provide:a.b,useClass:lt,multi:!0},{provide:i.u,useValue:"en-GB"}],imports:[[a.a,r.b,n.b,ct,o.b.forRoot(),ht.a]]}),t})();Object(i.R)(),window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.deferredPrompt=t}),a.c().bootstrapModule(ut).catch(t=>console.error(t))}},[[0,1,19]]]);