(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+ooL":function(t,e,l){"use strict";l.d(e,"a",function(){return s});var n=l("XNiG");class s{constructor(){this.colorSource=new n.a,this.blobSource=new n.a,this.color$=this.colorSource.asObservable(),this.blob$=this.blobSource.asObservable()}setColor(t){this.colorSource.next(t)}setBlob(){this.blobSource.next(!0)}}},"/1T7":function(t,e,l){"use strict";l.d(e,"a",function(){return n});class n{constructor(t){this.tracks=[],this.discs=[],this.sortedDiscs=[],this.modified=0,this.isContinues=!0,t.album&&t.title&&(this.name=t.album,this.sortName=this.name.toUpperCase(),this.year=t.year,this.modified=t.modified,this.year&&-1!==this.year.indexOf("-")&&(this.year=this.year.split("-")[0]))}url(){return`/letter/${this.artist.letter.escapedLetter}/artist/${encodeURIComponent(this.artist.name)}/album/${encodeURIComponent(this.name)}`}}},0:function(t,e,l){t.exports=l("zUnb")},"1gFc":function(t,e,l){"use strict";l.d(e,"a",function(){return s});const n=150;class s{requestAnimation(t="enter",e,l=!0){e&&(e.classList.contains(t)&&e.classList.remove(t),setTimeout(()=>{e.classList.add(t)},10),l&&setTimeout(()=>{e.classList.remove(t)},n))}}},Gcu2:function(t,e,l){"use strict";l.d(e,"a",function(){return r});var n=l("XNiG"),s=l("LNEh"),i=(l("ktVm"),l("t083"),l("KI15"));class r{constructor(t,e){this.coreService=t,this.lastfmservice=e,this.playlistSubject=new n.a,this.playlistAnnounced$=this.playlistSubject.asObservable(),this.numberOfTracksInAPlaylist=100,this.username=localStorage.getItem("lastfm-username"),this.core=this.coreService.getCore()}generateRandom(){const t=Object.keys(this.core.tracks),e=this.shuffle(t).splice(0,this.numberOfTracksInAPlaylist),l=new i.a;return l.name=`${this.numberOfTracksInAPlaylist} random tracks`,e.map(t=>{l.tracks.push(this.core.tracks[t])}),l}generateRadio(){this.lastfmservice.getTopArtists(this.username).subscribe(t=>{this.playlistSubject.next(this.extractArtists(t))})}extractTracks(t){const e=new i.a;return e.name="Loved tracks on Last.FM",t.map(t=>{const l=this.core.getTrackByArtistAndName(t.artist.name,t.name);l&&e.tracks.push(l)}),e}extractArtists(t){const e=[],l=[];return t.forEach((t,n)=>{t.dummy=!0;const i=new s.a(t),r=this.core.artists[i.sortName];r&&n<10?e.push(r):l.push(r)}),this.generateRadioList(e,l)}generateRadioList(t,e){const l=new i.a;l.name=`${this.numberOfTracksInAPlaylist} random tracks based on your recently listened tracks`;for(let n=0;n<this.numberOfTracksInAPlaylist;n++)l.tracks.push(this.getRandomTrackFromList(n%3==0||n%5==0?t:n%4==0||n%7==0?e:this.core.artistsList()));return l}getRandomTrackFromList(t){const e=this.shuffle(t)[0];if(e){const l=this.shuffle(e.albums)[0],n=this.shuffle(l.tracks)[0];return n.duration<=6e5?n:this.getRandomTrackFromList(t)}return this.getRandomTrackFromList(t)}shuffle(t){for(let e=t.length-1;e>0;e--){const l=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[l],t[l]=n}return t}getNextTrackForPlaylist(t,e){const l=this.getRandomTrackFromList(t);if(l){const n=l.artist;return e.tracks.length>1&&e.tracks[e.tracks.length-1].artist===n&&t.length>1?this.getNextTrackForPlaylist(t,e):l}return null}}},KI15:function(t,e,l){"use strict";l.d(e,"a",function(){return n});class n{constructor(){this.tracks=[],this.isOwn=!1,this.isContinues=!1}}},LNEh:function(t,e,l){"use strict";l.d(e,"a",function(){return n});class n{constructor(t){this.albums=[],(t.album&&t.title||t.dummy)&&(this.name=t.name||t.artist||"",this.albumArtist=t.albumartist||t.albumArtist||"",this.sortName=this.stripFromName(this.albumArtist?this.albumArtist.toUpperCase():t.sortName?t.sortName.toUpperCase():this.name.toUpperCase(),["the ",'"',"a "]),this.bio=t.bio,this.isCollection=!!this.albumArtist&&this.name!==this.albumArtist)}url(){return`/letter/${this.letter.escapedLetter}/artist/${encodeURIComponent(this.albumArtist||this.name)}/`}sortAlbumsBy(t="name",e="asc"){this.albums.sort((l,n)=>{if(-1!==t.indexOf(".")){const s=t.split(".");return l[s[0]][s[1]]<n[s[0]][s[1]]?"asc"===e?-1:1:l[s[0]][s[1]]>n[s[0]][s[1]]?"asc"===e?1:-1:0}return l[t]<n[t]?"asc"===e?-1:1:l[t]>n[t]?"asc"===e?1:-1:0})}sortAndReturnAlbumsBy(t="name",e="asc"){return this.sortAlbumsBy(t,e),this.albums}stripFromName(t,e){let l=t?t.toUpperCase():"";return l=l.trim(),e.forEach(t=>{const e=t.toUpperCase();0===l.indexOf(e)&&(l=l.substring(e.length))}),l}}},MDLy:function(t,e,l){"use strict";l.d(e,"a",function(){return r});var n=l("z6cu"),s=l("JIr8"),i=l("Kj3r");class r{constructor(t){this.http=t,this.collectionUrl="/data/node-music.json",this.reloadUrl="/rescan",this.pollUrl="/progress",this.dsm=localStorage.getItem("dsm")}getCollection(){return this.dsm=localStorage.getItem("dsm"),this.http.get(this.dsm+this.collectionUrl).pipe(Object(s.a)(this.handleError))}reload(){const t=this.dsm+this.reloadUrl,e=localStorage.getItem("jwt");return this.http.get(`${t}?_ts=${(new Date).getTime()}&jwt=${e}`).pipe(Object(s.a)(this.handleError))}poll(){const t=this.dsm+this.pollUrl,e=localStorage.getItem("jwt");return this.http.get(`${t}?_ts=${(new Date).getTime()}&jwt=${e}`).pipe(Object(i.a)(300),Object(s.a)(this.handleError))}handleError(t){const e=t.message?t.message:t.status?`${t.status} - ${t.statusText}`:"Server error";return Object(n.a)(e)}}},OgP6:function(t,e,l){"use strict";l.d(e,"a",function(){return r});var n=l("XNiG"),s=l("z6cu"),i=l("JIr8");class r{constructor(t){this.http=t,this.geoSource=new n.a,this.themeSource=new n.a,this.modeSource=new n.a,this.theme$=this.themeSource.asObservable(),this.mode$=this.modeSource.asObservable(),this.geo$=this.geoSource.asObservable(),this._theme=localStorage.getItem("theme")||"light",this._mode="light",this.counter=0,this.COUNTERTIMER=6e4}get theme(){return this._theme}get mode(){return this._mode}set theme(t){this._theme!==t&&(this._theme=t),"auto"!==this._theme||this.counter?"auto"===this._theme||(this.setStyleSheet(this._theme),clearInterval(this.counter),this.counter=0,this._mode=this._theme):(this.counter=setInterval(()=>{this.checkTheme()},this.COUNTERTIMER),this.checkTheme())}getSunriseInfo(t=51,e=5){return this.http.get(`https://api.sunrise-sunset.org/json?lat=${t}&lng=${e}&formatted=0`).pipe(Object(i.a)(this.handleError))}applyTheme(){"auto"===this._theme?(this.counter||(this.counter=setInterval(()=>{this.checkTheme()},this.COUNTERTIMER)),this.checkTheme(!0)):this.setStyleSheet(this._theme)}checkTheme(t=!1){const e=new Date;e<this.stopDate&&e>this.startDate&&"dark"!==this._mode?(this._mode="dark",this.setStyleSheet(this._mode)):(e>this.stopDate||e<this.startDate)&&"light"!==this._mode&&(this._mode="light",this.setStyleSheet(this._mode)),t&&this.setStyleSheet(this._mode)}handleError(t){return Object(s.a)(null)}setStyleSheet(t){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href","prod"!==window.ENV&&window.ENV?`/dist/sass/${t}.css`:`global/css/${t}.css`),e.setAttribute("id","customStylesheet");const l=document.getElementById("customStylesheet");l&&document.getElementsByTagName("head")[0].removeChild(l),document.getElementsByTagName("head")[0].appendChild(e),localStorage.setItem("theme",this._theme),localStorage.setItem("style",t),this.themeSource.next(this._theme),this.modeSource.next(t)}}},XNvx:function(t,e,l){"use strict";var n=l("z6cu"),s=l("IheW"),i=l("JIr8"),r={cipher:{},hash:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t}}};r.cipher.aes=function(t){this.h[0][0][0]||this.w();var e,l,n,s,i=this.h[0][4],a=this.h[1],u=1;if(4!==(e=t.length)&&6!==e&&8!==e)throw new r.exception.invalid("invalid aes key size");for(this.a=[n=t.slice(0),s=[]],t=e;t<4*e+28;t++)l=n[t-1],(t%e==0||8===e&&t%e==4)&&(l=i[l>>>24]<<24^i[l>>16&255]<<16^i[l>>8&255]<<8^i[255&l],t%e==0&&(l=l<<8^l>>>24^u<<24,u=u<<1^283*(u>>7))),n[t]=n[t-e]^l;for(e=0;t;e++,t--)l=n[3&e?t:t-4],s[e]=t<=4||e<4?l:a[0][i[l>>>24]]^a[1][i[l>>16&255]]^a[2][i[l>>8&255]]^a[3][i[255&l]]},r.cipher.aes.prototype={encrypt:function(t){return this.H(t,0)},decrypt:function(t){return this.H(t,1)},h:[[[],[],[],[],[]],[[],[],[],[],[]]],w:function(){var t,e,l,n,s,i,r,a=this.h[0],u=this.h[1],o=a[4],c=u[4],h=[],d=[];for(t=0;t<256;t++)d[(h[t]=t<<1^283*(t>>7))^t]=t;for(e=l=0;!o[e];e^=n||1,l=d[l]||1)for(o[e]=i=(i=l^l<<1^l<<2^l<<3^l<<4)>>8^255&i^99,c[i]=e,r=16843009*(s=h[t=h[n=h[e]]])^65537*t^257*n^16843008*e,s=257*h[i]^16843008*i,t=0;t<4;t++)a[t][e]=s=s<<24^s>>>8,u[t][i]=r=r<<24^r>>>8;for(t=0;t<5;t++)a[t]=a[t].slice(0),u[t]=u[t].slice(0)},H:function(t,e){if(4!==t.length)throw new r.exception.invalid("invalid aes block size");var l=this.a[e],n=t[0]^l[0],s=t[e?3:1]^l[1],i=t[2]^l[2];t=t[e?1:3]^l[3];var a,u,o,c,h=l.length/4-2,d=4,b=[0,0,0,0],m=(a=this.h[e])[0],g=a[1],p=a[2],f=a[3],y=a[4];for(c=0;c<h;c++)a=m[n>>>24]^g[s>>16&255]^p[i>>8&255]^f[255&t]^l[d],u=m[s>>>24]^g[i>>16&255]^p[t>>8&255]^f[255&n]^l[d+1],o=m[i>>>24]^g[t>>16&255]^p[n>>8&255]^f[255&s]^l[d+2],t=m[t>>>24]^g[n>>16&255]^p[s>>8&255]^f[255&i]^l[d+3],d+=4,n=a,s=u,i=o;for(c=0;c<4;c++)b[e?3&-c:c]=y[n>>>24]<<24^y[s>>16&255]<<16^y[i>>8&255]<<8^y[255&t]^l[d++],a=n,n=s,s=i,i=t,t=a;return b}},r.bitArray={bitSlice:function(t,e,l){return t=r.bitArray.P(t.slice(e/32),32-(31&e)).slice(1),void 0===l?t:r.bitArray.clamp(t,l-e)},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var l=t[t.length-1],n=r.bitArray.getPartial(l);return 32===n?t.concat(e):r.bitArray.P(e,n,0|l,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:32*(e-1)+r.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;var l=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,l>0&&e&&(t[l-1]=r.bitArray.partial(e,t[l-1]&2147483648>>e-1,1)),t},partial:function(t,e,l){return 32===t?e:(l?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(r.bitArray.bitLength(t)!==r.bitArray.bitLength(e))return!1;var l,n=0;for(l=0;l<t.length;l++)n|=t[l]^e[l];return 0===n},P:function(t,e,l,n){var s;for(s=0,void 0===n&&(n=[]);e>=32;e-=32)n.push(l),l=0;if(0===e)return n.concat(t);for(s=0;s<t.length;s++)n.push(l|t[s]>>>e),l=t[s]<<32-e;return t=r.bitArray.getPartial(s=t.length?t[t.length-1]:0),n.push(r.bitArray.partial(e+t&31,e+t>32?l:n.pop(),1)),n},k:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},r.codec.utf8String={fromBits:function(t){var e,l,n="",s=r.bitArray.bitLength(t);for(e=0;e<s/8;e++)0==(3&e)&&(l=t[e/4]),n+=String.fromCharCode(l>>>24),l<<=8;return decodeURIComponent(escape(n))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,l=[],n=0;for(e=0;e<t.length;e++)n=n<<8|t.charCodeAt(e),3==(3&e)&&(l.push(n),n=0);return 3&e&&l.push(r.bitArray.partial(8*(3&e),n)),l}},r.codec.hex={fromBits:function(t){var e,l="";for(e=0;e<t.length;e++)l+=(0xf00000000000+(0|t[e])).toString(16).substr(4);return l.substr(0,r.bitArray.bitLength(t)/4)},toBits:function(t){var e,l,n=[];for(l=(t=t.replace(/\s|0x/g,"")).length,t+="00000000",e=0;e<t.length;e+=8)n.push(0^parseInt(t.substr(e,8),16));return r.bitArray.clamp(n,4*l)}},r.codec.base64={D:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e){var l,n="",s=0,i=r.codec.base64.D,a=0,u=r.bitArray.bitLength(t);for(l=0;6*n.length<u;)n+=i.charAt((a^t[l]>>>s)>>>26),s<6?(a=t[l]<<6-s,s+=26,l++):(a<<=6,s-=6);for(;3&n.length&&!e;)n+="=";return n},toBits:function(t){t=t.replace(/\s|=/g,"");var e,l,n=[],s=0,i=r.codec.base64.D,a=0;for(e=0;e<t.length;e++){if((l=i.indexOf(t.charAt(e)))<0)throw new r.exception.invalid("this isn't base64!");s>26?(n.push(a^l>>>(s-=26)),a=l<<32-s):a^=l<<32-(s+=6)}return 56&s&&n.push(r.bitArray.partial(56&s,a,1)),n}},r.hash.sha256=function(t){this.a[0]||this.w(),t?(this.n=t.n.slice(0),this.i=t.i.slice(0),this.e=t.e):this.reset()},r.hash.sha256.hash=function(t){return(new r.hash.sha256).update(t).finalize()},r.hash.sha256.prototype={blockSize:512,reset:function(){return this.n=this.N.slice(0),this.i=[],this.e=0,this},update:function(t){"string"==typeof t&&(t=r.codec.utf8String.toBits(t));var e,l=this.i=r.bitArray.concat(this.i,t);for(t=this.e=(e=this.e)+r.bitArray.bitLength(t),e=512+e&-512;e<=t;e+=512)this.C(l.splice(0,16));return this},finalize:function(){var t,e=this.i,l=this.n;for(t=(e=r.bitArray.concat(e,[r.bitArray.partial(1,1)])).length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.e/4294967296)),e.push(0|this.e);e.length;)this.C(e.splice(0,16));return this.reset(),l},N:[],a:[],w:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,l=0,n=2;t:for(;l<64;n++){for(e=2;e*e<=n;e++)if(n%e==0)continue t;l<8&&(this.N[l]=t(Math.pow(n,.5))),this.a[l]=t(Math.pow(n,1/3)),l++}},C:function(t){var e,l,n=t.slice(0),s=this.n,i=this.a,r=s[0],a=s[1],u=s[2],o=s[3],c=s[4],h=s[5],d=s[6],b=s[7];for(t=0;t<64;t++)e=(e=t<16?n[t]:n[15&t]=((e=n[t+1&15])>>>7^e>>>18^e>>>3^e<<25^e<<14)+((l=n[t+14&15])>>>17^l>>>19^l>>>10^l<<15^l<<13)+n[15&t]+n[t+9&15]|0)+b+(c>>>6^c>>>11^c>>>25^c<<26^c<<21^c<<7)+(d^c&(h^d))+i[t],b=d,d=h,h=c,c=o+e|0,o=u,u=a,r=e+((a=r)&u^o&(a^u))+(a>>>2^a>>>13^a>>>22^a<<30^a<<19^a<<10)|0;s[0]=s[0]+r|0,s[1]=s[1]+a|0,s[2]=s[2]+u|0,s[3]=s[3]+o|0,s[4]=s[4]+c|0,s[5]=s[5]+h|0,s[6]=s[6]+d|0,s[7]=s[7]+b|0}},r.mode.ccm={name:"ccm",encrypt:function(t,e,l,n,s){var i,a=e.slice(0),u=r.bitArray,o=u.bitLength(l)/8,c=u.bitLength(a)/8;if(s=s||64,n=n||[],o<7)throw new r.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&c>>>8*i;i++);return i<15-o&&(i=15-o),l=u.clamp(l,8*(15-i)),e=r.mode.ccm.G(t,e,l,n,s,i),a=r.mode.ccm.I(t,a,l,e,s,i),u.concat(a.data,a.tag)},decrypt:function(t,e,l,n,s){s=s||64,n=n||[];var i=r.bitArray,a=i.bitLength(l)/8,u=i.bitLength(e),o=i.clamp(e,u-s),c=i.bitSlice(e,u-s);if(u=(u-s)/8,a<7)throw new r.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;e<4&&u>>>8*e;e++);if(e<15-a&&(e=15-a),l=i.clamp(l,8*(15-e)),o=r.mode.ccm.I(t,o,l,c,s,e),t=r.mode.ccm.G(t,o.data,l,n,s,e),!i.equal(o.tag,t))throw new r.exception.corrupt("ccm: tag doesn't match");return o.data},G:function(t,e,l,n,s,i){var a=[],u=r.bitArray,o=u.k;if((s/=8)%2||s<4||s>16)throw new r.exception.invalid("ccm: invalid tag length");if(n.length>4294967295||e.length>4294967295)throw new r.exception.bug("ccm: can't deal with 4GiB or more data");if(i=[u.partial(8,(n.length?64:0)|s-2<<2|i-1)],(i=u.concat(i,l))[3]|=u.bitLength(e)/8,i=t.encrypt(i),n.length)for((l=u.bitLength(n)/8)<=65279?a=[u.partial(16,l)]:l<=4294967295&&(a=u.concat([u.partial(16,65534)],[l])),a=u.concat(a,n),n=0;n<a.length;n+=4)i=t.encrypt(o(i,a.slice(n,n+4)));for(n=0;n<e.length;n+=4)i=t.encrypt(o(i,e.slice(n,n+4)));return u.clamp(i,8*s)},I:function(t,e,l,n,s,i){var a,u=r.bitArray;a=u.k;var o=e.length,c=u.bitLength(e);if(l=u.concat([u.partial(8,i-1)],l).concat([0,0,0]).slice(0,4),n=u.bitSlice(a(n,t.encrypt(l)),0,s),!o)return{tag:n,data:[]};for(a=0;a<o;a+=4)l[3]++,s=t.encrypt(l),e[a]^=s[0],e[a+1]^=s[1],e[a+2]^=s[2],e[a+3]^=s[3];return{tag:n,data:u.clamp(e,c)}}},r.mode.ocb2={name:"ocb2",encrypt:function(t,e,l,n,s,i){if(128!==r.bitArray.bitLength(l))throw new r.exception.invalid("ocb iv must be 128 bits");var a,u=r.mode.ocb2.A,o=r.bitArray,c=o.k,h=[0,0,0,0];l=u(t.encrypt(l));var d,b=[];for(n=n||[],s=s||64,a=0;a+4<e.length;a+=4)h=c(h,d=e.slice(a,a+4)),b=b.concat(c(l,t.encrypt(c(l,d)))),l=u(l);return d=e.slice(a),e=o.bitLength(d),a=t.encrypt(c(l,[0,0,0,e])),d=o.clamp(c(d,a),e),h=c(h,c(d,a)),h=t.encrypt(c(h,c(l,u(l)))),n.length&&(h=c(h,i?n:r.mode.ocb2.pmac(t,n))),b.concat(o.concat(d,o.clamp(h,s)))},decrypt:function(t,e,l,n,s,i){if(128!==r.bitArray.bitLength(l))throw new r.exception.invalid("ocb iv must be 128 bits");s=s||64;var a,u,o=r.mode.ocb2.A,c=r.bitArray,h=c.k,d=[0,0,0,0],b=o(t.encrypt(l)),m=r.bitArray.bitLength(e)-s,g=[];for(n=n||[],l=0;l+4<m/32;l+=4)a=h(b,t.decrypt(h(b,e.slice(l,l+4)))),d=h(d,a),g=g.concat(a),b=o(b);if(a=t.encrypt(h(b,[0,0,0,u=m-32*l])),a=h(a,c.clamp(e.slice(l),u)),d=h(d,a),d=t.encrypt(h(d,h(b,o(b)))),n.length&&(d=h(d,i?n:r.mode.ocb2.pmac(t,n))),!c.equal(c.clamp(d,s),c.bitSlice(e,m)))throw new r.exception.corrupt("ocb: tag doesn't match");return g.concat(c.clamp(a,u))},pmac:function(t,e){var l,n=r.mode.ocb2.A,s=r.bitArray,i=s.k,a=[0,0,0,0],u=t.encrypt([0,0,0,0]);for(u=i(u,n(n(u))),l=0;l+4<e.length;l+=4)u=n(u),a=i(a,t.encrypt(i(u,e.slice(l,l+4))));return e=e.slice(l),s.bitLength(e)<128&&(u=i(u,n(u)),e=s.concat(e,[-2147483648])),a=i(a,e),t.encrypt(i(n(i(u,n(u))),a))},A:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},r.misc.hmac=function(t,e){this.M=e=e||r.hash.sha256;var l=[[],[]],n=e.prototype.blockSize/32;for(this.l=[new e,new e],t.length>n&&(t=e.hash(t)),e=0;e<n;e++)l[0][e]=909522486^t[e],l[1][e]=1549556828^t[e];this.l[0].update(l[0]),this.l[1].update(l[1])},r.misc.hmac.prototype.encrypt=r.misc.hmac.prototype.mac=function(t,e){return t=new this.M(this.l[0]).update(t,e).finalize(),new this.M(this.l[1]).update(t).finalize()},r.misc.pbkdf2=function(t,e,l,n,s){if(l=l||1e3,n<0||l<0)throw r.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=r.codec.utf8String.toBits(t)),t=new(s=s||r.misc.hmac)(t);var i,a,u,o,c=[],h=r.bitArray;for(o=1;32*c.length<(n||1);o++){for(s=i=t.encrypt(h.concat(e,[o])),a=1;a<l;a++)for(i=t.encrypt(i),u=0;u<i.length;u++)s[u]^=i[u];c=c.concat(s)}return n&&(c=h.clamp(c,n)),c},r.random={randomWords:function(t,e){var l,n=[];if(0===(e=this.isReady(e)))throw new r.exception.notready("generator isn't seeded");for(2&e&&this.U(!(1&e)),e=0;e<t;e+=4)(e+1)%65536==0&&this.L(),l=this.u(),n.push(l[0],l[1],l[2],l[3]);return this.L(),n.slice(0,t)},setDefaultParanoia:function(t){this.t=t},addEntropy:function(t,e,l){l=l||"user";var n,s,i=(new Date).valueOf(),a=this.q[l],u=this.isReady();switch(void 0===(n=this.F[l])&&(n=this.F[l]=this.R++),void 0===a&&(a=this.q[l]=0),this.q[l]=(this.q[l]+1)%this.b.length,typeof t){case"number":break;case"object":if(void 0===e)for(l=e=0;l<t.length;l++)for(s=t[l];s>0;)e++,s>>>=1;this.b[a].update([n,this.J++,2,e,i,t.length].concat(t));break;case"string":void 0===e&&(e=t.length),this.b[a].update([n,this.J++,3,e,i,t.length]),this.b[a].update(t);break;default:throw new r.exception.bug("random: addEntropy only supports number, array or string")}this.j[a]+=e,this.f+=e,0===u&&(0!==this.isReady()&&this.K("seeded",Math.max(this.g,this.f)),this.K("progress",this.getProgress()))},isReady:function(t){return t=this.B[void 0!==t?t:this.t],this.g&&this.g>=t?this.j[0]>80&&(new Date).valueOf()>this.O?3:1:this.f>=t?2:0},getProgress:function(t){return this.g>=(t=this.B[t||this.t])?1[0]:this.f>t?1[0]:this.f/t},startCollectors:function(){if(!this.m){if(window.addEventListener)window.addEventListener("load",this.o,!1),window.addEventListener("mousemove",this.p,!1);else{if(!document.attachEvent)throw new r.exception.bug("can't attach event");document.attachEvent("onload",this.o),document.attachEvent("onmousemove",this.p)}this.m=!0}},stopCollectors:function(){this.m&&(window.removeEventListener?(window.removeEventListener("load",this.o),window.removeEventListener("mousemove",this.p)):window.detachEvent&&(window.detachEvent("onload",this.o),window.detachEvent("onmousemove",this.p)),this.m=!1)},addEventListener:function(t,e){this.r[t][this.Q++]=e},removeEventListener:function(t,e){var l;t=this.r[t];var n=[];for(l in t)t.hasOwnProperty[l]&&t[l]===e&&n.push(l);for(e=0;e<n.length;e++)delete t[l=n[e]]},b:[new r.hash.sha256],j:[0],z:0,q:{},J:0,F:{},R:0,g:0,f:0,O:0,a:[0,0,0,0,0,0,0,0],d:[0,0,0,0],s:void 0,t:6,m:!1,r:{progress:{},seeded:{}},Q:0,B:[0,48,64,96,128,192,256,384,512,768,1024],u:function(){for(var t=0;t<4&&(this.d[t]=this.d[t]+1|0,!this.d[t]);t++);return this.s.encrypt(this.d)},L:function(){this.a=this.u().concat(this.u()),this.s=new r.cipher.aes(this.a)},T:function(t){for(this.a=r.hash.sha256.hash(this.a.concat(t)),this.s=new r.cipher.aes(this.a),t=0;t<4&&(this.d[t]=this.d[t]+1|0,!this.d[t]);t++);},U:function(t){var e,l=[],n=0;for(this.O=l[0]=(new Date).valueOf()+3e4,e=0;e<16;e++)l.push(4294967296*Math.random()|0);for(e=0;e<this.b.length&&(l=l.concat(this.b[e].finalize()),n+=this.j[e],this.j[e]=0,t||!(this.z&1<<e));e++);this.z>=1<<this.b.length&&(this.b.push(new r.hash.sha256),this.j.push(0)),this.f-=n,n>this.g&&(this.g=n),this.z++,this.T(l)},p:function(t){r.random.addEntropy([t.x||t.clientX||t.offsetX,t.y||t.clientY||t.offsetY],2,"mouse")},o:function(){r.random.addEntropy(new Date,2,"loadtime")},K:function(t,e){var l;t=r.random.r[t];var n=[];for(l in t)t.hasOwnProperty(l)&&n.push(t[l]);for(l=0;l<n.length;l++)n[l](e)}},r.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(t,e,l,n){l=l||{},n=n||{};var s=r.json,i=s.c({iv:r.random.randomWords(4,0)},s.defaults);if(s.c(i,l),"string"==typeof i.salt&&(i.salt=r.codec.base64.toBits(i.salt)),"string"==typeof i.iv&&(i.iv=r.codec.base64.toBits(i.iv)),!r.mode[i.mode]||!r.cipher[i.cipher]||"string"==typeof t&&i.iter<=100||64!==i.ts&&96!==i.ts&&128!==i.ts||128!==i.ks&&192!==i.ks&&256!==i.ks||i.iv.length<2||i.iv.length>4)throw new r.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t&&(t=(l=r.misc.cachedPbkdf2(t,i)).key.slice(0,i.ks/32),i.salt=l.salt),"string"==typeof e&&(e=r.codec.utf8String.toBits(e)),l=new r.cipher[i.cipher](t),s.c(n,i),n.key=t,i.ct=r.mode[i.mode].encrypt(l,e,i.iv,i.adata,i.tag),s.encode(s.V(i,s.defaults))},decrypt:function(t,e,l,n){l=l||{},n=n||{};var s=r.json;if("string"==typeof(e=s.c(s.c(s.c({},s.defaults),s.decode(e)),l,!0)).salt&&(e.salt=r.codec.base64.toBits(e.salt)),"string"==typeof e.iv&&(e.iv=r.codec.base64.toBits(e.iv)),!r.mode[e.mode]||!r.cipher[e.cipher]||"string"==typeof t&&e.iter<=100||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||!e.iv||e.iv.length<2||e.iv.length>4)throw new r.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t&&(t=(l=r.misc.cachedPbkdf2(t,e)).key.slice(0,e.ks/32),e.salt=l.salt),l=new r.cipher[e.cipher](t),l=r.mode[e.mode].decrypt(l,e.ct,e.iv,e.adata,e.tag),s.c(n,e),n.key=t,r.codec.utf8String.fromBits(l)},encode:function(t){var e,l="{",n="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new r.exception.invalid("json encode: invalid property name");switch(l+=n+e+":",n=",",typeof t[e]){case"number":case"boolean":l+=t[e];break;case"string":l+='"'+escape(t[e])+'"';break;case"object":l+='"'+r.codec.base64.fromBits(t[e],1)+'"';break;default:throw new r.exception.bug("json encode: unsupported type")}}return l+"}"},decode:function(t){if(!(t=t.replace(/\s/g,"")).match(/^\{.*\}$/))throw new r.exception.invalid("json decode: this isn't json!");t=t.replace(/^\{|\}$/g,"").split(/,/);var e,l,n={};for(e=0;e<t.length;e++){if(!(l=t[e].match(/^([a-z][a-z0-9]*):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new r.exception.invalid("json decode: this isn't json!");n[l[1]]=l[2]?parseInt(l[2],10):l[1].match(/^(ct|salt|iv)$/)?r.codec.base64.toBits(l[3]):unescape(l[3])}return n},c:function(t,e,l){if(void 0===t&&(t={}),void 0===e)return t;var n;for(n in e)if(e.hasOwnProperty(n)){if(l&&void 0!==t[n]&&t[n]!==e[n])throw new r.exception.invalid("required parameter overridden");t[n]=e[n]}return t},V:function(t,e){var l,n={};for(l in t)t.hasOwnProperty(l)&&t[l]!==e[l]&&(n[l]=t[l]);return n},W:function(t,e){var l,n={};for(l=0;l<e.length;l++)void 0!==t[e[l]]&&(n[e[l]]=t[e[l]]);return n}},r.encrypt=r.json.encrypt,r.decrypt=r.json.decrypt,r.misc.S={},r.misc.cachedPbkdf2=function(t,e){var l,n=r.misc.S;return l=(e=e||{}).iter||1e3,(l=(n=n[t]=n[t]||{})[l]=n[l]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):r.random.randomWords(2,0)})[n=void 0===e.salt?l.firstSalt:e.salt]=l[n]||r.misc.pbkdf2(t,n,e.iter),{key:l[n].slice(0),salt:n.slice(0)}};var a={};!function(){function t(t){var e=window.btoa(t);return(e=(e=e.split("=")[0]).replace(/\+/g,"-")).replace(/\//g,"_")}function e(t){var e=t;switch((e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new s("Illegal base64url string!")}return window.atob(e)}function l(t){this.message=t,this.toString=function(){return"No such algorithm: "+this.message}}function n(t){this.message=t,this.toString=function(){return"Not implemented: "+this.message}}function s(t){this.message=t,this.toString=function(){return"Malformed input: "+this.message}}function i(t,e){if("sha256"!=t)throw new l("HMAC does not support hash "+t);this.hash=r.hash.sha256,this.key=r.codec.utf8String.toBits(e)}function u(t,e){if("sha1"==t)this.hash="sha1";else{if("sha256"!=t)throw new l("JWT algorithm: "+t);this.hash="sha256"}this.keyPEM=e}function o(t,e){this.objectStr=t,this.pkAlgorithm=e}i.prototype={update:function(t){this.data=t},finalize:function(){},sign:function(){var e=new r.misc.hmac(this.key,this.hash).encrypt(this.data);return t(window.atob(r.codec.base64.fromBits(e)))},verify:function(e){var l=new r.misc.hmac(this.key,this.hash).encrypt(this.data);return t(window.atob(r.codec.base64.fromBits(l)))==e}},u.prototype={update:function(t){this.data=t},finalize:function(){},sign:function(){var l=new RSAKey;l.readPrivateKeyFromPEMString(this.keyPEM);var n=l.signString(this.data,this.hash);return t(e(hex2b64(n)))},verify:function(t){return this.keyPEM.verifyString(this.data,function(t){var e,l,n="",s=0;for(e=0;e<t.length;++e){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t.charAt(e));i<0||(0==s?(n+=int2char(i>>2),l=3&i,s=1):1==s?(n+=int2char(l<<2|i>>4),l=15&i,s=2):2==s?(n+=int2char(l),n+=int2char(i>>2),l=3&i,s=3):(n+=int2char(l<<2|i>>4),n+=int2char(15&i),s=0))}return 1==s&&(n+=int2char(l<<2)),n}(t))}};var c={parse:function(t){var l=t.split(".");if(3!=l.length)throw new MalformedWebToken("Must have three parts");var n=new o;return n.headerSegment=l[0],n.payloadSegment=l[1],n.cryptoSegment=l[2],n.pkAlgorithm=e(l[0]),n}};function h(t){return"string"==typeof t?JSON.parse(t):t}function d(t,e){if("ES256"===t)throw new n("ECDSA-SHA256 not yet implemented");if("ES384"===t)throw new n("ECDSA-SHA384 not yet implemented");if("ES512"===t)throw new n("ECDSA-SHA512 not yet implemented");if("HS256"===t)return new i("sha256",e);if("HS384"===t)throw new n("HMAC-SHA384 not yet implemented");if("HS512"===t)throw new n("HMAC-SHA512 not yet implemented");if("RS256"===t)return new u("sha256",e);throw"RS384"===t?new n("RSA-SHA384 not yet implemented"):"RS512"===t?new n("RSA-SHA512 not yet implemented"):new l("Unknown algorithm: "+t)}o.prototype={serialize:function(e){var l=d(h(this.pkAlgorithm).alg,e),n=t(this.pkAlgorithm),s=t(this.objectStr);return l.update(n+"."+s),l.finalize(),n+"."+s+"."+l.sign()},verify:function(t){var e=d(h(this.pkAlgorithm).alg,t);return e.update(this.headerSegment+"."+this.payloadSegment),e.finalize(),e.verify(this.cryptoSegment)}},a.WebToken=o,a.WebTokenParser=c,a.base64urlencode=t,a.base64urldecode=e}(),l.d(e,"a",function(){return u});class u{constructor(t){this.http=t,this.hasToken=!1,localStorage.getItem("jwt")&&(this.hasToken=!0)}doLogin(t,e=!1){let l=t;e||(localStorage.setItem("dsm",t.dsmport),l=this.encode(t));const n={headers:new s.g({"X-Cred":l})};return this.http.post(`${localStorage.getItem("dsm")}/login`,null,n).pipe(Object(i.a)(this.handleError))}autoLogin(){const t=localStorage.getItem("jwt");return t?this.doLogin(t,!0):(localStorage.removeItem("jwt"),Object(n.a)(null))}encode(t){return new a.WebToken(JSON.stringify(t),JSON.stringify({alg:"HS256",typ:"JWT"})).serialize("jsmusicdbnext")}handleError(t){return Object(n.a)(null)}}},XtVx:function(t,e,l){"use strict";l.d(e,"a",function(){return s});var n=l("XNiG");class s{constructor(){this.pathAnnouncementSource=new n.a,this.pageAnnouncementSource=new n.a,this.pathAnnounced$=this.pathAnnouncementSource.asObservable(),this.pageAnnounced$=this.pageAnnouncementSource.asObservable()}announcePath(t){this.pathAnnouncementSource.next(t)}announcePage(t,e=null){this.pageAnnouncementSource.next({page:t,letter:e})}}},crnd:function(t,e){function l(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}l.keys=function(){return[]},l.resolve=l,t.exports=l,l.id="crnd"},hDf6:function(t,e,l){"use strict";l.d(e,"a",function(){return n});class n{}},ktVm:function(t,e,l){"use strict";var n=l("XNiG"),s=l("/1T7"),i=l("LNEh");class r{constructor(t){this.artists=[],this.active=!1,t.album&&t.title&&(this.letter=t.letter||this.getFirstLetterOf(t.albumArtist||t.albumartist||t.artist),"1"===this.letter&&(this.letter="#"),this.escapedLetter=encodeURIComponent(this.letter))}url(){return`/letter/${this.escapedLetter}/`}sortArtistsBy(t="sortName",e="asc"){this.artists.sort("albums"===t?(t,l)=>t.albums.length>l.albums.length?"asc"===e?-1:1:t.albums.length<l.albums.length?"asc"===e?1:-1:0:(l,n)=>{if(-1!==t.indexOf(".")){const s=t.split(".");return l[s[0]][s[1]]<n[s[0]][s[1]]?"asc"===e?-1:1:l[s[0]][s[1]]>n[s[0]][s[1]]?"asc"===e?1:-1:0}return l[t].toUpperCase()<n[t].toUpperCase()?"asc"===e?-1:1:l[t].toUpperCase()>n[t].toUpperCase()?"asc"===e?1:-1:0})}sortAndReturnArtistsBy(t="name",e="asc"){return this.sortArtistsBy(t,e),this.artists}getFirstLetterOf(t){let e="";return e=this.stripFromName(t,["the ",'"',"a "]),this.groupIfSpecialChar(e.substr(0,1))}stripFromName(t,e){let l=t?t.toUpperCase():"";return l=l.trim(),e.forEach(t=>{const e=t.toUpperCase();0===l.indexOf(e)&&(l=l.substring(e.length))}),l}groupIfSpecialChar(t){return-1!==["1","2","3","4","5","6","7","8","9","0","(",")","[","]","{","}","_","-","."].indexOf(t)?"#":t}}var a=l("uwnU");class u{constructor(t){this.albums=[],this.sanitize=t=>{let e=parseInt(t,10);return isNaN(e)&&(e=0),e},t.year&&(this.year=this.sanitize(t.year))}}const o="1.4.0";class c{constructor(){this.artists={},this.albums={},this.tracks={},this.letters={},this.years={},this.sortedLetters=[],this.sortedAlbums=[],this.isCoreParsed=!1,this.coreParsedSource=new n.a,this.coreParsed$=this.coreParsedSource.asObservable(),this.totals={artists:0,albums:0,tracks:0,playingTime:0,parsingTime:0},this.latestAdditions=[],console.info(`Core init ${o}`)}resetCollection(){this.artists={},this.albums={},this.tracks={},this.letters={},this.years={},this.sortedLetters=[],this.sortedAlbums=[],this.totals={artists:0,albums:0,tracks:0,playingTime:0,parsingTime:0},this.latestAdditions=[]}parseSourceJson(t,e=!0){const l=(new Date).getTime();if(t.length)for(const i of t)this.parseLine(i,e);else t.tree&&this.parseTree(t.tree);const n=Object.keys(this.letters).sort((t,e)=>t<e?-1:1),s=[];n.forEach((t,e)=>{s.push(this.letters[t]),this.letters[t].sortAndReturnArtistsBy("name","asc")}),this.sortedLetters=s,this.totals.parsingTime+=(new Date).getTime()-l,this.coreParsedSource.next(!0),this.isCoreParsed=!0}getTrackByArtistAndName(t,e){const l=new i.a({name:t,dummy:!0}),n=this.artists[l.sortName];let s=null;return n&&n.albums.some(t=>{t.tracks.some(t=>{if(t.title&&t.title.toLowerCase()===e.toLowerCase())return s||(s=t),!0})}),s}getTrackById(t){let e=new a.a({});return this.tracks.forEach(l=>{l.id===t&&(e=l)}),e}getArtistByName(t){const e=new i.a({name:t,dummy:!0});return this.artists[e.sortName]}getAlbumByArtistAndName(t,e){let l=null;return t.albums.forEach(t=>{t.name.toLowerCase()===e.toLowerCase()&&(l=t)}),l}getTrackByAlbumAndName(t,e){let l=null;return t.tracks.forEach(t=>{t.title.toLowerCase()===e.toLowerCase()&&(l=t)}),l}artistsList(){const t=[];return Object.keys(this.artists).sort((t,e)=>t<e?-1:1).forEach((e,l)=>{t.push(this.artists[e])}),t}searchArtist(t){const e=[];let l=Object.keys(this.artists);return(l=l.filter(e=>{if(-1!==e.indexOf(t.toUpperCase()))return!0})).forEach(t=>{e.push(this.artists[t])}),e}searchAlbum(t){const e=[];let l=Object.keys(this.albums);return(l=l.filter(e=>{if(-1!==(e=e.substring(e.indexOf("|"))).indexOf(t.toUpperCase()))return!0})).forEach(t=>{e.push(this.albums[t])}),e}searchTrack(t){const e=[];let l=Object.keys(this.tracks);return(l=l.filter(e=>{if(-1!==this.tracks[e].title.toLowerCase().indexOf(t.toLowerCase()))return!0})).forEach(t=>{e.push(this.tracks[t])}),e}getLatestAdditions(t=14){return 0!==this.latestAdditions.length?this.latestAdditions:(this.sortedAlbums.sort((t,e)=>t.modified>e.modified?-1:t.modified<e.modified?1:0),this.latestAdditions=this.sortedAlbums.splice(0,t),this.latestAdditions)}getNextAlbum(t){const e=t.artist,l=e.albums.indexOf(t);let n=e.albums[l+1];return n||(n=this.getNextArtist(e).albums[0]),n}getNextArtist(t){const e=t.letter,l=e.artists.indexOf(t);let n=e.artists[l+1];return n||(n=this.getNextLetter(e).artists[0]),n}getNextLetter(t){const e=this.sortedLetters.indexOf(t);let l=this.sortedLetters[e+1];return l||(l=this.sortedLetters[0]),l}instanceIfPresent(t,e,l,n,s){let i=null;return l[e]?i=l[e]:(l[e]=n,i=n,s(t)),i}handleLetter(t){return this.instanceIfPresent(this,t.letter,this.letters,t,t=>{})}handleArtist(t,e){return this.instanceIfPresent(this,e.sortName,this.artists,e,l=>{t.artists.push(e),e.letter=t,l.totals.artists++})}handleAlbum(t,e,l=!0){return this.instanceIfPresent(this,t.sortName+"|"+e.sortName,this.albums,e,n=>{if("flac"===e.type&&l||"flac"!==e.type)if(e.artist=t,t.albums.push(e),t.sortAndReturnAlbumsBy("year","asc"),n.sortedAlbums.push(e),n.totals.albums++,n.years[e.year])n.years[e.year].albums.push(e);else{const t=new u(e);t.albums.push(e),n.years[t.year]=t}})}handleTrack(t,e,l,n=!0){return this.instanceIfPresent(this,l.id,this.tracks,l,s=>{if(e.type=e.type&&e.type!==l.type?"mixed":l.type,"flac"===l.type&&n||"flac"!==l.type){s.totals.tracks++,s.totals.playingTime+=l.duration,l.artist=t,l.album=e,e.tracks.push(l);const n=l.disc;e.discs[`disc-${n}`]?e.discs[`disc-${n}`].push(l):(e.discs[`disc-${n}`]=[],e.discs[`disc-${n}`].push(l)),e.discs[`disc-${n}`].sort((t,e)=>t.number<e.number?-1:1),e.tracks.sort((t,e)=>t.disc<e.disc?-1:t.disc===e.disc&&t.number<e.number?-1:1)}else console.warn("skipping flac track, flac is not supported")})}parseLine(t,e=!0){let l=new r(t);l.letter&&(l=this.handleLetter(l));let n=new i.a(t);n.name&&(n=this.handleArtist(l,n));let u=new s.a(t);u.name&&(u=this.handleAlbum(n,u,e));let o=new a.a(t);o.title&&(o=this.handleTrack(n,u,o,e))}parseTree(t){for(const e in t){let l=new r(t[e]);l=this.handleLetter(l);for(const n in t[e].artists){let r=new i.a(t[e].artists[n]);r=this.handleArtist(l,r);for(const l in t[e].artists[n].albums){let i=new s.a(t[e].artists[n].albums[l]);i=this.handleAlbum(r,i);for(const s in t[e].artists[n].albums[l].tracks){let u=new a.a(t[e].artists[n].albums[l].tracks[s]);u=this.handleTrack(r,i,u)}}}}}}l.d(e,"a",function(){return h});class h{constructor(){this.core=new c}getCore(){return this.core}}},t083:function(t,e,l){"use strict";var n=l("XNiG"),s=l("z6cu"),i=l("JIr8"),r=l("IheW"),a=l("ztCj");class u{encodeKey(t){return encodeURIComponent(t)}encodeValue(t){return encodeURIComponent(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}l.d(e,"a",function(){return d});const o="956c1818ded606576d6941de5ff793a5",c="4d183e73f7578dee78557665e9be3acc",h="global/images/no-cover.png";class d{constructor(t){this.http=t,this.manualScrobbleListSource=new n.a,this.manualScrobbleList$=this.manualScrobbleListSource.asObservable(),this.hexcase=0,this.b64pad=""}getLovedTracks(t){return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:{api_key:o,format:"json",limit:"1000",method:"user.getlovedtracks",user:t}}).pipe(Object(i.a)(this.handleError))}toggleLoved(t){const e=localStorage.getItem("lastfm-token"),l=(new URLSearchParams,t.isLoved?"track.love":"track.unlove"),n=new r.h({encoder:new u}).set("method",l).set("api_key",o).set("api_sig",this.signTrack(t.trackArtist,t.album.name,t.title,null,e,l)).set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("sk",e),s=new r.g({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:n,headers:s}).pipe(Object(i.a)(this.handleError))}getTrackInfo(t,e){if(t){const l=new r.h({encoder:new u}).set("method","track.getInfo").set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("api_key",o).set("format","json").set("user",e);return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:l}).pipe(Object(i.a)(this.handleError))}return Object(s.a)(null)}getTopArtists(t){const e=new r.h({encoder:new u}).set("api_key",o).set("format","json").set("limit","50").set("method","user.gettopartists").set("period","1month").set("user",t);return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:e}).pipe(Object(i.a)(this.handleError))}getSimilairArtists(t){const e=new r.h({encoder:new u}).set("api_key",o).set("format","json").set("limit","20").set("autocorrect","1").set("method","artist.getSimilar").set("artist",t.name);return this.http.get("https://ws.audioscrobbler.com/2.0/",{params:e}).pipe(Object(i.a)(this.handleError))}authenticate(t){const e=new r.h({encoder:new u}).set("api_key",o).set("api_sig",this.signAuthentication(t.user,t.password)).set("format","json").set("username",t.user).set("password",t.password),l=new r.g({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post("https://ws.audioscrobbler.com/2.0/?method=auth.getMobileSession",null,{params:e,headers:l}).pipe(Object(i.a)(this.handleError))}announceNowPlaying(t){if("mdb-skipped"!==localStorage.getItem("lastfm-username")){const e=new Date,l=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+e.getTimezoneOffset(),e.getSeconds())/1e3,n=localStorage.getItem("lastfm-token"),s=new r.g({"Content-Type":"application/x-www-form-urlencoded"}),a=new r.h({encoder:new u}).set("method","track.updateNowPlaying").set("api_key",o).set("api_sig",this.signTrack(t.trackArtist,t.album.name,t.title,l,n,"track.updateNowPlaying")).set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("timestamp",l.toString()).set("sk",n);return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:a,headers:s}).pipe(Object(i.a)(this.handleError))}}scrobbleTrack(t){const e=localStorage.getItem("lastfm-username"),l=new Date,n=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes()+l.getTimezoneOffset(),l.getSeconds())/1e3;if("mdb-skipped"!==e){const e=localStorage.getItem("lastfm-token");if(!this.booleanState("manual-scrobble-state")){const l=new r.g({"Content-Type":"application/x-www-form-urlencoded"}),s=new r.h({encoder:new u}).set("method","track.scrobble").set("api_key",o).set("api_sig",this.signTrack(t.trackArtist,t.album.name,t.title,n,e,"track.scrobble")).set("artist",t.trackArtist).set("album",t.album.name).set("track",t.title).set("timestamp",n.toString()).set("sk",e);return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:s,headers:l}).pipe(Object(i.a)(this.handleError))}Object(a.c)("manual-scrobble-list").then(e=>{const l=e||[],s={artist:t.trackArtist,album:t.album.name,track:t.title,timestamp:n.toString()};l.unshift(s),Object(a.d)("manual-scrobble-list",l),this.manualScrobbleListSource.next(l)})}else{const e=`art-${t.trackArtist}-${t.album.name}`;Object(a.c)(e).then(e=>{this.saveInLocal(t,n,e||h)})}}updateManualScrobbleList(){Object(a.c)("manual-scrobble-list").then(t=>{this.manualScrobbleListSource.next(t||[])})}saveInLocal(t,e,l){const n={artist:{"#text":t.trackArtist},album:{"#text":t.album.name},image:[{"#text":l}],name:t.title,date:{uts:e}};let s=[],i=null;Object(a.c)("recentlyListened").then(t=>{t&&((s=t.tracks).length>10&&(s=s.splice(0,10)),i=t._rev),s.unshift(n);const e={_id:"recentlyListened",tracks:s};Object(a.d)(e._id,e.tracks)})}scrobbleCachedTrack(t){const e=localStorage.getItem("lastfm-token"),l=new r.g({"Content-Type":"application/x-www-form-urlencoded"}),n=new r.h({encoder:new u}).set("method","track.scrobble").set("api_key",o).set("api_sig",this.signTrack(t.artist,t.album,t.track,t.timestamp,e,"track.scrobble")).set("artist",t.artist).set("album",t.album).set("track",t.track).set("timestamp",t.timestamp.toString()).set("sk",e);return this.http.post("https://ws.audioscrobbler.com/2.0/",null,{params:n,headers:l,responseType:"text"}).pipe(Object(i.a)(this.handleError))}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}signAuthentication(t,e){return this.hex_md5(`api_key${o}methodauth.getMobileSessionpassword${e}username${t}${c}`)}signTrack(t,e,l,n,s,i){return this.hex_md5(n?`album${e}api_key${o}artist${t}method${i}sk${s}timestamp${n}track${l}${c}`:`album${e}api_key${o}artist${t}method${i}sk${s}track${l}${c}`)}handleError(t){return Object(s.a)(null)}hex_md5(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))}rstr2hex(t){try{this.hexcase=this.hexcase}catch(s){this.hexcase=0}const e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";let l,n="";for(let i=0;i<t.length;i++)l=t.charCodeAt(i),n+=e.charAt(l>>>4&15)+e.charAt(15&l);return n}rstr_md5(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))}str2rstr_utf8(t){let e,l,n="",s=-1;for(;++s<t.length;)e=t.charCodeAt(s),l=s+1<t.length?t.charCodeAt(s+1):0,55296<=e&&e<=56319&&56320<=l&&l<=57343&&(e=65536+((1023&e)<<10)+(1023&l),s++),e<=127?n+=String.fromCharCode(e):e<=2047?n+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n}binl2rstr(t){let e="";for(let l=0;l<32*t.length;l+=8)e+=String.fromCharCode(t[l>>5]>>>l%32&255);return e}binl_md5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let l=1732584193,n=-271733879,s=-1732584194,i=271733878;for(let r=0;r<t.length;r+=16){const e=l,a=n,u=s,o=i;l=this.md5_ff(l,n,s,i,t[r+0],7,-680876936),i=this.md5_ff(i,l,n,s,t[r+1],12,-389564586),s=this.md5_ff(s,i,l,n,t[r+2],17,606105819),n=this.md5_ff(n,s,i,l,t[r+3],22,-1044525330),l=this.md5_ff(l,n,s,i,t[r+4],7,-176418897),i=this.md5_ff(i,l,n,s,t[r+5],12,1200080426),s=this.md5_ff(s,i,l,n,t[r+6],17,-1473231341),n=this.md5_ff(n,s,i,l,t[r+7],22,-45705983),l=this.md5_ff(l,n,s,i,t[r+8],7,1770035416),i=this.md5_ff(i,l,n,s,t[r+9],12,-1958414417),s=this.md5_ff(s,i,l,n,t[r+10],17,-42063),n=this.md5_ff(n,s,i,l,t[r+11],22,-1990404162),l=this.md5_ff(l,n,s,i,t[r+12],7,1804603682),i=this.md5_ff(i,l,n,s,t[r+13],12,-40341101),s=this.md5_ff(s,i,l,n,t[r+14],17,-1502002290),n=this.md5_ff(n,s,i,l,t[r+15],22,1236535329),l=this.md5_gg(l,n,s,i,t[r+1],5,-165796510),i=this.md5_gg(i,l,n,s,t[r+6],9,-1069501632),s=this.md5_gg(s,i,l,n,t[r+11],14,643717713),n=this.md5_gg(n,s,i,l,t[r+0],20,-373897302),l=this.md5_gg(l,n,s,i,t[r+5],5,-701558691),i=this.md5_gg(i,l,n,s,t[r+10],9,38016083),s=this.md5_gg(s,i,l,n,t[r+15],14,-660478335),n=this.md5_gg(n,s,i,l,t[r+4],20,-405537848),l=this.md5_gg(l,n,s,i,t[r+9],5,568446438),i=this.md5_gg(i,l,n,s,t[r+14],9,-1019803690),s=this.md5_gg(s,i,l,n,t[r+3],14,-187363961),n=this.md5_gg(n,s,i,l,t[r+8],20,1163531501),l=this.md5_gg(l,n,s,i,t[r+13],5,-1444681467),i=this.md5_gg(i,l,n,s,t[r+2],9,-51403784),s=this.md5_gg(s,i,l,n,t[r+7],14,1735328473),n=this.md5_gg(n,s,i,l,t[r+12],20,-1926607734),l=this.md5_hh(l,n,s,i,t[r+5],4,-378558),i=this.md5_hh(i,l,n,s,t[r+8],11,-2022574463),s=this.md5_hh(s,i,l,n,t[r+11],16,1839030562),n=this.md5_hh(n,s,i,l,t[r+14],23,-35309556),l=this.md5_hh(l,n,s,i,t[r+1],4,-1530992060),i=this.md5_hh(i,l,n,s,t[r+4],11,1272893353),s=this.md5_hh(s,i,l,n,t[r+7],16,-155497632),n=this.md5_hh(n,s,i,l,t[r+10],23,-1094730640),l=this.md5_hh(l,n,s,i,t[r+13],4,681279174),i=this.md5_hh(i,l,n,s,t[r+0],11,-358537222),s=this.md5_hh(s,i,l,n,t[r+3],16,-722521979),n=this.md5_hh(n,s,i,l,t[r+6],23,76029189),l=this.md5_hh(l,n,s,i,t[r+9],4,-640364487),i=this.md5_hh(i,l,n,s,t[r+12],11,-421815835),s=this.md5_hh(s,i,l,n,t[r+15],16,530742520),n=this.md5_hh(n,s,i,l,t[r+2],23,-995338651),l=this.md5_ii(l,n,s,i,t[r+0],6,-198630844),i=this.md5_ii(i,l,n,s,t[r+7],10,1126891415),s=this.md5_ii(s,i,l,n,t[r+14],15,-1416354905),n=this.md5_ii(n,s,i,l,t[r+5],21,-57434055),l=this.md5_ii(l,n,s,i,t[r+12],6,1700485571),i=this.md5_ii(i,l,n,s,t[r+3],10,-1894986606),s=this.md5_ii(s,i,l,n,t[r+10],15,-1051523),n=this.md5_ii(n,s,i,l,t[r+1],21,-2054922799),l=this.md5_ii(l,n,s,i,t[r+8],6,1873313359),i=this.md5_ii(i,l,n,s,t[r+15],10,-30611744),s=this.md5_ii(s,i,l,n,t[r+6],15,-1560198380),n=this.md5_ii(n,s,i,l,t[r+13],21,1309151649),l=this.md5_ii(l,n,s,i,t[r+4],6,-145523070),i=this.md5_ii(i,l,n,s,t[r+11],10,-1120210379),s=this.md5_ii(s,i,l,n,t[r+2],15,718787259),n=this.md5_ii(n,s,i,l,t[r+9],21,-343485551),l=this.safe_add(l,e),n=this.safe_add(n,a),s=this.safe_add(s,u),i=this.safe_add(i,o)}return Array(l,n,s,i)}rstr2binl(t){const e=Array(t.length>>2);for(let l=0;l<e.length;l++)e[l]=0;for(let l=0;l<8*t.length;l+=8)e[l>>5]|=(255&t.charCodeAt(l/8))<<l%32;return e}md5_cmn(t,e,l,n,s,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,i)),s),l)}md5_ff(t,e,l,n,s,i,r){return this.md5_cmn(e&l|~e&n,t,e,s,i,r)}md5_gg(t,e,l,n,s,i,r){return this.md5_cmn(e&n|l&~n,t,e,s,i,r)}md5_hh(t,e,l,n,s,i,r){return this.md5_cmn(e^l^n,t,e,s,i,r)}md5_ii(t,e,l,n,s,i,r){return this.md5_cmn(l^(e|~n),t,e,s,i,r)}safe_add(t,e){const l=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(l>>16)<<16|65535&l}bit_rol(t,e){return t<<e|t>>>32-e}}},ufXC:function(t,e,l){"use strict";l.d(e,"a",function(){return r});var n=l("ztCj"),s=l("XNiG"),i=l("KI15");l("Gcu2"),l("ktVm"),l("t083");class r{constructor(t,e,l){this.lastFMService=t,this.coreService=e,this.playlistService=l,this.playlistSource=new s.a,this.volumeSource=new s.a,this.hideVolumeWindowAsSource=new s.a,this.playlistAnnounced$=this.playlistSource.asObservable(),this.volumeAnnounced=this.volumeSource.asObservable(),this.hideVolumeWindowAnnounced$=this.hideVolumeWindowAsSource.asObservable(),this.isPlaying=!1,this.isPaused=!1,this.isShuffled=!1,this.forceRestart=!1,this.volume=100,this.lastfmUserName=localStorage.getItem("lastfm-username"),this.subscription=this.playlistService.playlistAnnounced$.subscribe(t=>{this.doPlayPlaylist(t,0,!0,this.isShuffled)})}setPosition(t){this.position=t,this.announce(),this.position=null}doPlayAlbum(t,e,l=!1,n=!1){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.setPlaylist(t,e,l,n,"album"),this.announce()}doQueueAlbum(t){const{playlist:e,startIndex:l}=this.currentPlaylist,n=new i.a;n.name="queued playlist",n.type="queue",n.tracks=[...e.tracks,...t.tracks],this.setPlaylist(n,l,!1,!1,"playlist")}doPlayPlaylist(t,e,l=!1,n=!1){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.setPlaylist(t,e,l,n,"playlist"),this.announce()}doPlayTrack(t){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1);const e=new i.a;e.isOwn=!0,e.name=t.title,e.tracks.push(t),this.currentPlaylist={playlist:e,startIndex:0,isPlaying:this.isPlaying=!0,isPaused:this.isPaused=!1,isShuffled:!1,forceRestart:this.forceRestart=!0,isContinues:!1},this.announce()}nextPlaylist(t){if(this.booleanState("continues-play"))if("random"===t){const t=this.playlistService.generateRandom();this.doPlayPlaylist(t,0,!0,this.isShuffled)}else this.playlistService.generateRadio();else this.stop()}nextAlbum(t){if(this.booleanState("continues-play")){const e=this.coreService.getCore().getNextAlbum(t);e?this.doPlayAlbum(e,0,!0,this.isShuffled):(console.warn("no new album found, stopping playback"),this.stop())}else this.stop()}playlistToString(){const t=[];return this.currentPlaylist.playlist.tracks.forEach(e=>{e&&t.push(e.id)}),JSON.stringify({ids:t,isShuffled:this.isShuffled,isContinues:this.currentPlaylist.isContinues,current:this.currentPlaylist.startIndex,type:this.currentPlaylist.type})}playlistSync(){const t=[];return this.currentPlaylist.playlist.tracks.forEach(e=>{e&&t.push(e.id)}),{ids:t,isShuffled:this.isShuffled,isContinues:this.currentPlaylist.isContinues,current:this.currentPlaylist.startIndex,type:this.currentPlaylist.type}}getCurrentPlaylist(){return this.currentPlaylist}shufflePlaylist(t){this.isShuffled=t,this.currentPlaylist.playlist.tracks.sort(this.sortPlaylist),t&&(this.currentPlaylist.playlist.tracks=this.shuffle(this.currentPlaylist.playlist.tracks)),this.currentPlaylist.startIndex=this.currentPlaylist.playlist.tracks.indexOf(this.currentTrack),this.currentPlaylist.forceRestart=!1,this.announce()}sortPlaylist(t,e){return t.disc<e.disc?-1:t.disc>e.disc?1:t.number<e.number?-1:t.number>e.number?1:0}shuffle(t){for(let e=t.length-1;e>0;e--){const l=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[l],t[l]=n}return t}next(){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.currentPlaylist&&(this.currentPlaylist.startIndex++,this.currentPlaylist.forceRestart=!1,this.announce())}prev(){this.currentTrack&&(this.currentTrack.isPaused=!1,this.currentTrack.isPlaying=!1),this.currentPlaylist&&(this.currentPlaylist.startIndex--,this.currentPlaylist.startIndex<=0&&(this.currentPlaylist.startIndex=0),this.currentPlaylist.forceRestart=!1,this.announce())}pause(){this.currentPlaylist&&(this.isPlaying=!1,this.isPaused=!0,this.currentPlaylist.forceRestart=!1,this.announce())}resume(){this.currentPlaylist&&(this.isPlaying=!0,this.isPaused=!1,this.currentPlaylist.forceRestart=!1,this.announce())}stop(){this.isPlaying=!1,this.isPaused=!1,this.currentPlaylist=null,Object(n.b)("current-playlist"),localStorage.removeItem("current-time"),this.playlistSource.next(this.currentPlaylist)}togglePlayPause(){this.isPlaying?this.pause():this.resume()}announce(){this.currentPlaylist&&(this.currentTrack=this.currentPlaylist.playlist.tracks[this.currentPlaylist.startIndex],this.lastfmUserName&&this.lastFMService.getTrackInfo(this.currentTrack,this.lastfmUserName).subscribe(t=>{this.currentTrack&&t.track&&(this.currentTrack.isLoved="1"===t.track.userloved)}),this.currentTrack&&(this.currentTrack.isPaused=this.isPaused,this.currentTrack.isPlaying=this.isPlaying,this.currentPlaylist.isPlaying=this.isPlaying,this.currentPlaylist.isPaused=this.isPaused,this.currentPlaylist.isShuffled=this.isShuffled,this.currentPlaylist.position=this.position,Object(n.d)("current-playlist",this.playlistSync()),this.playlistSource.next(this.currentPlaylist)))}getVolume(){return this.volume}setVolume(t){this.volume=t,this.volumeSource.next(this.volume)}hideVolumeControl(){this.hideVolumeWindowAsSource.next(!0)}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}setPlaylist(t,e=0,l=!0,n=!1,s="album"){this.currentPlaylist={playlist:t,startIndex:e,isPlaying:this.isPlaying=!0,isPaused:this.isPaused=!1,isShuffled:this.isShuffled=n,forceRestart:this.forceRestart=l,isContinues:t.isContinues||"album"===s,type:t.type}}}},uwnU:function(t,e,l){"use strict";class n{constructor(t){this.url=t.file||t.url||t.path||t.id}}l.d(e,"a",function(){return s});class s{constructor(t){this.isPlaying=!1,this.isPaused=!1,this.isLoved=!1,this.position=0,this.buffered={start:0,end:0},this.showActions=!1,this.image="",t.album&&t.title&&(this.id=t.id,this.duration=t.seconds?1e3*t.seconds:t.duration&&!isNaN(t.duration)?t.duration:0,this.title=t.title,this.source=new n(t),this.disc=t.disc||this.guessBySource(t),this.number=t.number,this.trackArtist=t.artist,this.type=t.type||"mp3")}url(){return`/letter/${this.artist.letter.escapedLetter}/artist/${encodeURIComponent(this.artist.name)}/album/${encodeURIComponent(this.album.name)}/track/${encodeURIComponent(this.title)}`}toJSON(){return this.id}guessBySource(t){const e=this.source.url,l=[1,2,3,4,5,6,7,8,9,10];for(const n of l)if(-1!==e.indexOf(` - ${n}.`)||-1!==e.indexOf(`(${n}) - `)||-1!==e.indexOf(`CD${n}`)||-1!==e.indexOf(`\\${n}-`))return n;return 1}}},zUnb:function(t,e,l){"use strict";l.r(e);var n=l("URqu"),s=l.n(n),i=l("SVse"),r=l("8Y7J");class a{constructor(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(t=>{}).catch(t=>{console.error("Registration failed with "+t)})}}var u=l("XNvx"),o=l("ufXC"),c=l("MDLy"),h=l("+ooL"),d=l("OgP6"),b=l("ktVm");class m{constructor(t,e,l,n,s,i,r){this.collectionService=t,this.coreService=e,this.loginService=l,this.configService=n,this.playerService=s,this.colorService=i,this.isPlaying=!1,this.scanperc=0,this.isReloading=!1,this.letter="N",this.path="JSMusicDB Next",this.isLoading=!1,this.hasBeenReloading=!1,this.isHostedApp="undefined"!=typeof Windows,this.loginService.hasToken&&(this.isLoading=!0,this.poll()),this.viewContainerRef=r,this.subscription=this.playerService.playlistAnnounced$.subscribe(t=>{this.isPlaying=!!t}),this.booleanState("tracking-state")?navigator.geolocation.getCurrentPosition(t=>{this.configService.getSunriseInfo(t.coords.latitude,t.coords.longitude).subscribe(t=>{this.configService.startDate=new Date(t.results.sunset),this.configService.stopDate=new Date(t.results.sunrise),this.configService.stopDate.setDate(this.configService.stopDate.getDate()+1),this.configService.geoSource.next(),this.configService.applyTheme()})},t=>{this.configService.startDate=new Date,this.configService.startDate.setHours(21,0,0),this.configService.stopDate=new Date,this.configService.stopDate.setDate(this.configService.stopDate.getDate()+1),this.configService.stopDate.setHours(7,0,0),this.configService.geoSource.next(),this.configService.applyTheme()}):(this.configService.startDate=new Date,this.configService.startDate.setHours(21,0,0),this.configService.stopDate=new Date,this.configService.stopDate.setDate(this.configService.stopDate.getDate()+1),this.configService.stopDate.setHours(7,0,0),this.configService.geoSource.next(),this.configService.applyTheme())}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.mediaObject=document.querySelector("audio");const t=this.mediaObject.canPlayType("audio/flac");this.isFlacSupported="probably"===t||"maybe"===t}getCollection(){this.collectionService.getCollection().subscribe(t=>this.fillCollection(t),t=>console.error(t))}fillCollection(t){localStorage.setItem("lastParsed",(new Date).getTime().toString()),this.coreService.getCore().parseSourceJson(t,this.isFlacSupported),this.isLoading=!1}hideVolumeWindow(){this.playerService.hideVolumeControl()}poll(){this.collectionService.poll().subscribe(t=>{this.scanperc=t.progress,"ready"!==t.status?(this.isReloading=!0,document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbscanning",{detail:{percentage:this.scanperc}})),setTimeout(t=>{this.poll()},5e3),this.hasBeenReloading=!0):(this.isReloading=!1,this.hasBeenReloading&&document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbscanstop")),this.getCollection())})}onExternalPrev(t){this.playerService.prev()}onExternalNext(t){this.playerService.next()}onExternalToggle(t){this.playerService.togglePlayPause()}onExternalStop(t){this.playerService.stop()}onExternalBlob(){this.colorService.setBlob()}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}}var g=l("pMnS"),p=l("Xg1U"),f=l("iInd"),y=l("978R"),v=l("z/SZ"),k=l("2uy1"),S=l("s7LF"),w=l("ztCj"),A=l("t083"),C=l("XtVx");class P{}function x(){return Object.assign(new y.a,{placement:"right",delay:250})}class L{constructor(t,e,l,n){this.pathService=t,this.router=e,this.lastFMService=l,this.coreService=n,this.menuVisible=!1,this.topSearchVisible=!1,this.manualScrobblingList=[],this.onDocumentClick=t=>{t.target.classList.contains("side-nav--visible")&&this.toggleMenu()},this.core=this.coreService.getCore(),this.subscription=t.pathAnnounced$.subscribe(t=>{this.path=t,this.page=null,this.menuVisible=!1,this.disableActiveLetter(),this.activateLetter(t.letter)}),this.subscription2=t.pageAnnounced$.subscribe(t=>{this.page=t.page,this.path=null,this.menuVisible=!1,this.disableActiveLetter(),this.activateLetter(t.letter)}),this.subscription3=this.lastFMService.manualScrobbleList$.subscribe(t=>{this.manualScrobblingList=t}),this.subscription4=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()}),this.search=new P,Object(w.c)("manual-scrobble-list").then(t=>{this.manualScrobblingList=t||[]})}ngOnInit(){this.letters=this.core.sortedLetters}disableActiveLetter(){this.letters.forEach(t=>{t.active&&(t.active=!1)})}activateLetter(t){t&&(t.active=!0)}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}toggleMenu(){this.menuVisible=!this.menuVisible,this.menuVisible?this.slideOut():this.slideIn()}slideOut(){const t=document.querySelector(".js-side-nav");t.classList.add("side-nav--animatable"),t.classList.add("side-nav--visible"),document.addEventListener("click",this.onDocumentClick),t.addEventListener("transitionend",this.onTransitionEnd)}slideIn(){const t=document.querySelector(".js-side-nav");t.classList.add("side-nav--animatable"),t.classList.remove("side-nav--visible"),document.removeEventListener("click",this.onDocumentClick),t.addEventListener("transitionend",this.onTransitionEnd)}onTransitionEnd(t){const e=document.querySelector(".js-side-nav");e.classList.remove("side-nav--animatable"),e.removeEventListener("transitionend",this.onTransitionEnd)}onSubmit(){this.topSearchVisible=!1,this.menuVisible&&this.toggleMenu(),this.router.navigate(["/search",this.search.query])}toggleSearch(){this.topSearchVisible=!this.topSearchVisible,!0===this.topSearchVisible&&setTimeout(()=>{document.getElementById("mobileSearch").focus()},100)}selectArtist(t){this.router.navigate(["letter",t.artist.letter.escapedLetter,"artist",t.artist.sortName])}selectAlbum(t){this.router.navigate(["letter",t.album.artist.letter.escapedLetter,"artist",t.album.artist.sortName,"album",t.album.sortName])}}var T=r.mb({encapsulation:2,styles:[],data:{}});function E(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,4,"span",[],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,1,"span",[["class","clickable d-none d-sm-inline"]],null,[[null,"click"]],function(t,e,l){var n=!0,s=t.component;return"click"===e&&(n=!1!==s.selectArtist(s.path)&&n),n},null,null)),(t()(),r.Hb(2,null,[""," \u2022 "])),(t()(),r.ob(3,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Hb(4,null,["",""]))],null,function(t,e){var l=e.component;t(e,2,0,l.path.artist.albumArtist||l.path.artist.name),t(e,4,0,l.path.album.name)})}function I(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Hb(1,null,["",""]))],null,function(t,e){var l=e.component;t(e,1,0,l.path.artist.albumArtist||l.path.artist.name)})}function O(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["JSMusicDB Next"]))],null,null)}function _(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Hb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.page)})}function M(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["JSMusicDB Next"]))],null,null)}function j(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,0,"i",[["class","glyph glyph-magnifier"]],null,null,null,null,null))],null,null)}function N(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,0,"i",[["class","glyph glyph-clear"]],null,null,null,null,null))],null,null)}function B(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(2,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(3,{active:0}),(t()(),r.ob(4,0,null,null,3,"a",[["routerLink","/scrobble-cache"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,5).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(5,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(6,0,null,null,0,"span",[["class","glyph glyph-upload"]],null,null,null,null,null)),(t()(),r.Hb(7,null,[" Scrobble cache (",")"]))],function(t,e){var l=t(e,3,0,"Scrobble cache"===e.component.page);t(e,2,0,l),t(e,5,0,"/scrobble-cache")},function(t,e){var l=e.component;t(e,4,0,r.Ab(e,5).target,r.Ab(e,5).href),t(e,7,0,l.manualScrobblingList.length)})}function $(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(2,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(3,{active:0}),(t()(),r.ob(4,16777216,null,null,3,"a",[["routerLink","/scrobble-cache"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,5).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(5,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(6,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(7,0,null,null,0,"span",[["class","glyph glyph-upload"]],null,null,null,null,null))],function(t,e){var l=e.component,n=t(e,3,0,"Scrobble cache"===l.page);t(e,2,0,"nav-item",n),t(e,5,0,"/scrobble-cache"),t(e,6,0,r.sb(1,"Scrobble cache (",l.manualScrobblingList.length,")"),"hover")},function(t,e){t(e,4,0,r.Ab(e,5).target,r.Ab(e,5).href,r.Ab(e,6).ariaDescribedby)})}function D(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,38,"div",[["class","menu-top fixed-top"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,7,"span",[["class","menu-toggle"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.toggleMenu()&&n),n},null,null)),(t()(),r.ob(2,0,null,null,1,"button",[["aria-label","menu button"],["class","btn btn-menu d-md-none"]],null,null,null,null,null)),(t()(),r.ob(3,0,null,null,0,"span",[["aria-hidden","true"],["class","glyph glyph-hamburger"]],null,null,null,null,null)),(t()(),r.ob(4,0,null,null,4,"a",[["class","d-none d-md-inline-block"]],null,null,null,null,null)),(t()(),r.ob(5,0,null,null,3,":svg:svg",[[":xml:space","preserve"],[":xmlns:xlink","http://www.w3.org/1999/xlink"],["class","logo"],["height","276.164px"],["version","1.1"],["viewBox","0 0 276.164 276.164"],["width","276.164px"],["x","0px"],["xmlns","http://www.w3.org/2000/svg"],["y","0px"]],null,null,null,null,null)),(t()(),r.ob(6,0,null,null,2,":svg:g",[],null,null,null,null,null)),(t()(),r.ob(7,0,null,null,0,":svg:path",[["d","M156.716,61.478c-4.111,6.276-8.881,11.511-14.212,15.609l-8.728,6.962c-13.339,11.855-22.937,21.433-28.542,28.464\n                  c-10.209,12.788-15.806,25.779-16.65,38.611c-0.942,14.473,3.187,28.21,12.275,40.84c9.636,13.458,21.8,20.754,36.164,21.69\n                  c3.291,0.218,6.897,0.182,9.896-0.015l-1.121-10.104c-2.09,0.192-4.306,0.223-6.628,0.068c-9.437-0.617-17.864-4.511-25.064-11.573\n                  c-7.524-7.333-10.895-15.415-10.287-24.7c1.149-17.59,12.562-35.004,33.925-51.792l9.543-7.599\n                  c8.394-7.174,15.192-16.191,20.216-26.825c4.971-10.556,7.886-21.983,8.673-33.96c0.466-7.037-0.513-15.775-2.874-25.965\n                  c-3.241-13.839-7.854-20.765-14.136-21.179c-2.232-0.138-4.676,0.986-7.658,3.617c-7.252,6.548-12.523,14.481-15.683,23.542\n                  c-2.438,6.926-4.057,16.189-4.805,27.529c-0.313,4.72,0.313,13.438,1.805,23.962l8.844-8.192c-0.028-1.183,0.005-2.413,0.096-3.703\n                  c0.466-7.221,2.289-15.062,5.394-23.293c3.956-10.296,7.689-13.409,10.133-14.204c0.668-0.218,1.32-0.298,2.015-0.254\n                  c3.185,0.212,6.358,1.559,5.815,9.979C164.664,46.132,161.831,53.693,156.716,61.478z"]],null,null,null,null,null)),(t()(),r.ob(8,0,null,null,0,":svg:path",[["d","M164.55,209.161c5.728-2.568,10.621-6.478,14.576-11.651c5.055-6.561,7.897-14.316,8.467-23.047\n                  c0.72-10.719-1.854-20.438-7.617-28.895c-6.322-9.264-14.98-14.317-25.745-15.026c-1.232-0.081-2.543-0.075-3.895,0.025\n                  l-2.304-17.191l-9.668,7.112l1.483,12.194c-5.789,2.393-10.827,6.17-15.017,11.255c-4.823,5.924-7.508,12.443-7.964,19.382\n                  c-0.466,7.208,1.142,13.81,4.782,19.583c1.895,3.081,4.507,5.82,7.498,8.058c4.906,3.65,10.563,3.376,11.459,1.393\n                  c0.906-1.983-2.455-5.095-5.09-9.248c-1.502-2.351-2.242-5.173-2.242-8.497c0-7.053,4.256-13.116,10.317-15.799l5.673,44.211\n                  l1.325,10.258c0.864,4.873,1.719,9.725,2.537,14.52c1,6.488,1.352,12.112,1.041,16.715c-0.419,6.375-2.408,11.584-5.919,15.493\n                  c-2.234,2.485-4.844,4.055-7.795,4.925c3.961-3.962,6.414-9.43,6.414-15.478c0-12.075-9.792-21.872-21.87-21.872\n                  c-3.353,0-6.491,0.812-9.329,2.159c-0.36,0.155-0.699,0.388-1.054,0.574c-0.779,0.425-1.559,0.85-2.286,1.362\n                  c-0.249,0.187-0.487,0.403-0.732,0.605c-4.888,3.816-8.091,9.616-8.375,16.229c0,0.01-0.011,0.021-0.011,0.031\n                  c0,0.005,0,0.01,0,0.016c-0.013,0.311-0.09,0.59-0.09,0.896c0,0.259,0.067,0.492,0.078,0.74\n                  c-0.011,7.084,2.933,13.179,8.839,18.118c5.584,4.666,12.277,7.28,19.892,7.777c4.327,0.28,8.505-0.217,12.407-1.485\n                  c3.189-1.041,6.275-2.62,9.149-4.687c6.96-5.022,10.75-11.584,11.272-19.532c0.399-6.063,0.094-13.235-0.937-21.411l-2.838-18.429\n                  l-7.156-52.899c7.984,1.532,14.027,8.543,14.027,16.968c0,5.986-1.937,15.431-5.551,20.376L164.55,209.161z"]],null,null,null,null,null)),(t()(),r.ob(9,0,null,null,10,"h1",[],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,1,null,E)),r.nb(11,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,I)),r.nb(13,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,O)),r.nb(15,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,_)),r.nb(17,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,M)),r.nb(19,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(20,0,null,null,4,"button",[["aria-label","search button"],["class","btn btn-menu btn-search d-md-none"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.toggleSearch()&&n),n},null,null)),(t()(),r.eb(16777216,null,null,1,null,j)),r.nb(22,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,N)),r.nb(24,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(25,0,null,null,13,"form",[["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,l){var n=!0,s=t.component;return"submit"===e&&(n=!1!==r.Ab(t,30).onSubmit(l)&&n),"reset"===e&&(n=!1!==r.Ab(t,30).onReset()&&n),"ngSubmit"===e&&(n=!1!==s.onSubmit()&&n),n},null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(27,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(28,{visible:0}),r.nb(29,16384,null,0,S.t,[],null,null),r.nb(30,4210688,[["searchForm",4]],0,S.j,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Eb(2048,null,S.b,null,[S.j]),r.nb(32,16384,null,0,S.i,[[4,S.b]],null,null),(t()(),r.ob(33,0,null,null,5,"input",[["class","form-control"],["id","mobileSearch"],["name","search"],["placeholder","Search for"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,l){var n=!0,s=t.component;return"input"===e&&(n=!1!==r.Ab(t,34)._handleInput(l.target.value)&&n),"blur"===e&&(n=!1!==r.Ab(t,34).onTouched()&&n),"compositionstart"===e&&(n=!1!==r.Ab(t,34)._compositionStart()&&n),"compositionend"===e&&(n=!1!==r.Ab(t,34)._compositionEnd(l.target.value)&&n),"ngModelChange"===e&&(n=!1!==(s.search.query=l)&&n),n},null,null)),r.nb(34,16384,null,0,S.c,[r.B,r.k,[2,S.a]],null,null),r.Eb(1024,null,S.f,function(t){return[t]},[S.c]),r.nb(36,671744,[["name",4]],0,S.k,[[2,S.b],[8,null],[8,null],[6,S.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Eb(2048,null,S.g,null,[S.k]),r.nb(38,16384,null,0,S.h,[[4,S.g]],null,null),(t()(),r.ob(39,0,null,null,87,"aside",[["class","js-side-nav side-nav"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(41,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(42,{"side-nav--visible":0}),(t()(),r.ob(43,0,null,null,83,"nav",[["class","js-side-nav-container side-nav__container"]],null,null,null,null,null)),(t()(),r.ob(44,0,null,null,82,"ul",[["class","side-nav__content nav flex-column"]],null,null,null,null,null)),(t()(),r.ob(45,0,null,null,15,"li",[["class","d-none d-md-block search-bar"]],null,null,null,null,null)),(t()(),r.ob(46,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),r.ob(47,0,null,null,13,"div",[["class","input-group"]],null,null,null,null,null)),(t()(),r.ob(48,0,null,null,12,"form",[["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,l){var n=!0,s=t.component;return"submit"===e&&(n=!1!==r.Ab(t,50).onSubmit(l)&&n),"reset"===e&&(n=!1!==r.Ab(t,50).onReset()&&n),"ngSubmit"===e&&(n=!1!==s.onSubmit()&&n),n},null,null)),r.nb(49,16384,null,0,S.t,[],null,null),r.nb(50,4210688,[["searchForm",4]],0,S.j,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r.Eb(2048,null,S.b,null,[S.j]),r.nb(52,16384,null,0,S.i,[[4,S.b]],null,null),(t()(),r.ob(53,0,null,null,5,"input",[["class","form-control"],["id","search"],["name","search"],["placeholder","Search for"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,l){var n=!0,s=t.component;return"input"===e&&(n=!1!==r.Ab(t,54)._handleInput(l.target.value)&&n),"blur"===e&&(n=!1!==r.Ab(t,54).onTouched()&&n),"compositionstart"===e&&(n=!1!==r.Ab(t,54)._compositionStart()&&n),"compositionend"===e&&(n=!1!==r.Ab(t,54)._compositionEnd(l.target.value)&&n),"ngModelChange"===e&&(n=!1!==(s.search.query=l)&&n),n},null,null)),r.nb(54,16384,null,0,S.c,[r.B,r.k,[2,S.a]],null,null),r.Eb(1024,null,S.f,function(t){return[t]},[S.c]),r.nb(56,671744,[["name",4]],0,S.k,[[2,S.b],[8,null],[8,null],[6,S.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Eb(2048,null,S.g,null,[S.k]),r.nb(58,16384,null,0,S.h,[[4,S.g]],null,null),(t()(),r.ob(59,0,null,null,1,"button",[["class","input-group-addon"]],null,null,null,null,null)),(t()(),r.ob(60,0,null,null,0,"i",[["class","glyph glyph-magnifier"]],null,null,null,null,null)),(t()(),r.ob(61,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(63,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(64,{active:0}),(t()(),r.ob(65,0,null,null,3,"a",[["routerLink","/home"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,66).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(66,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(67,0,null,null,0,"span",[["class","glyph glyph-home"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Home"])),(t()(),r.ob(69,0,null,null,7,"li",[["class","d-sm-none"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(71,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(72,{active:0}),(t()(),r.ob(73,0,null,null,3,"a",[["routerLink","/letters"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,74).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(74,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(75,0,null,null,0,"span",[["class","glyph glyph-characters"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Letters"])),(t()(),r.ob(77,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(79,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(80,{active:0}),(t()(),r.ob(81,0,null,null,3,"a",[["routerLink","/artists"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,82).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(82,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(83,0,null,null,0,"span",[["class","glyph glyph-people"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Artists"])),(t()(),r.ob(85,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(87,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(88,{active:0}),(t()(),r.ob(89,0,null,null,3,"a",[["routerLink","/albums"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,90).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(90,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(91,0,null,null,0,"span",[["class","glyph glyph-music-album"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Albums"])),(t()(),r.ob(93,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(95,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(96,{active:0}),(t()(),r.ob(97,0,null,null,3,"a",[["routerLink","/years"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,98).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(98,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(99,0,null,null,0,"span",[["class","glyph glyph-calendar"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Years"])),(t()(),r.ob(101,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(103,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(104,{active:0}),(t()(),r.ob(105,0,null,null,3,"a",[["routerLink","/playlists"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,106).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(106,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(107,0,null,null,0,"span",[["class","glyph glyph-music-info"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Playlists"])),(t()(),r.ob(109,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(111,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(112,{active:0}),(t()(),r.ob(113,0,null,null,3,"a",[["routerLink","/now-playing"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,114).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(114,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(115,0,null,null,0,"span",[["class","glyph glyph-audio"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Now playing"])),(t()(),r.eb(16777216,null,null,1,null,B)),r.nb(118,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(119,0,null,null,7,"li",[],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(121,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(122,{active:0}),(t()(),r.ob(123,0,null,null,3,"a",[["routerLink","/settings"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,124).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(124,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),r.ob(125,0,null,null,0,"span",[["class","glyph glyph-settings"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Settings"])),(t()(),r.ob(127,0,null,null,67,"aside",[["class","d-none d-lg-block side-nav-xl"]],null,null,null,null,null)),(t()(),r.ob(128,0,null,null,66,"ul",[["class","side-nav__content nav flex-column"]],null,null,null,null,null)),(t()(),r.ob(129,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(131,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(132,{active:0}),(t()(),r.ob(133,16777216,null,null,3,"a",[["routerLink","/home"],["tooltip","Home"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,134).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(134,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(135,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(136,0,null,null,0,"span",[["class","glyph glyph-home"]],null,null,null,null,null)),(t()(),r.ob(137,0,null,null,7,"li",[["class","d-md-none nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(139,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(140,{active:0}),(t()(),r.ob(141,16777216,null,null,3,"a",[["routerLink","/letters"],["tooltip","Letters"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,142).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(142,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(143,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(144,0,null,null,0,"span",[["class","glyph glyph-characters"]],null,null,null,null,null)),(t()(),r.ob(145,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(147,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(148,{active:0}),(t()(),r.ob(149,16777216,null,null,3,"a",[["routerLink","/artists"],["tooltip","Artists"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,150).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(150,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(151,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(152,0,null,null,0,"span",[["class","glyph glyph-people"]],null,null,null,null,null)),(t()(),r.ob(153,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(155,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(156,{active:0}),(t()(),r.ob(157,16777216,null,null,3,"a",[["routerLink","/albums"],["tooltip","Albums"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,158).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(158,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(159,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(160,0,null,null,0,"span",[["class","glyph glyph-music-album"]],null,null,null,null,null)),(t()(),r.ob(161,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(163,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(164,{active:0}),(t()(),r.ob(165,16777216,null,null,3,"a",[["routerLink","/years"],["tooltip","Years"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,166).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(166,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(167,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(168,0,null,null,0,"span",[["class","glyph glyph-calendar"]],null,null,null,null,null)),(t()(),r.ob(169,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(171,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(172,{active:0}),(t()(),r.ob(173,16777216,null,null,3,"a",[["routerLink","/playlists"],["tooltip","Playlists"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,174).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(174,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(175,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(176,0,null,null,0,"span",[["class","glyph glyph-music-info"]],null,null,null,null,null)),(t()(),r.ob(177,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(179,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(180,{active:0}),(t()(),r.ob(181,16777216,null,null,3,"a",[["routerLink","/now-playing"],["tooltip","Now Playing"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,182).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(182,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(183,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(184,0,null,null,0,"span",[["class","glyph glyph-audio"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,1,null,$)),r.nb(186,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(187,0,null,null,7,"li",[["class","nav-item"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(189,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(190,{active:0}),(t()(),r.ob(191,16777216,null,null,3,"a",[["routerLink","/settings"],["tooltip","Settings"],["triggers","hover"]],[[1,"target",0],[8,"href",4],[1,"aria-describedby",0]],[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==r.Ab(t,192).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&n),n},null,null)),r.nb(192,671744,null,0,f.l,[f.k,f.a,i.h],{routerLink:[0,"routerLink"]},null),r.nb(193,212992,null,0,y.c,[r.M,v.a,y.a,r.k,r.B,k.a],{tooltip:[0,"tooltip"],triggers:[1,"triggers"]},null),(t()(),r.ob(194,0,null,null,0,"span",[["class","glyph glyph-settings"]],null,null,null,null,null))],function(t,e){var l=e.component;t(e,11,0,l.path&&l.path.album),t(e,13,0,l.path&&l.path.artist&&!l.path.album),t(e,15,0,l.path&&!l.path.artist),t(e,17,0,!l.path&&l.page),t(e,19,0,!l.path&&!l.page),t(e,22,0,!l.topSearchVisible),t(e,24,0,l.topSearchVisible);var n=t(e,28,0,l.topSearchVisible);t(e,27,0,n),t(e,36,0,"search",l.search.query);var s=t(e,42,0,l.menuVisible);t(e,41,0,"js-side-nav side-nav",s),t(e,56,0,"search",l.search.query);var i=t(e,64,0,"Home"===l.page);t(e,63,0,i),t(e,66,0,"/home");var r=t(e,72,0,"Letters"===l.page);t(e,71,0,"d-sm-none",r),t(e,74,0,"/letters");var a=t(e,80,0,"Artists"===l.page);t(e,79,0,a),t(e,82,0,"/artists");var u=t(e,88,0,"Albums"===l.page);t(e,87,0,u),t(e,90,0,"/albums");var o=t(e,96,0,"Years"===l.page);t(e,95,0,o),t(e,98,0,"/years");var c=t(e,104,0,"Playlists"===l.page);t(e,103,0,c),t(e,106,0,"/playlists");var h=t(e,112,0,"Now playing"===l.page);t(e,111,0,h),t(e,114,0,"/now-playing"),t(e,118,0,l.manualScrobblingList.length>0);var d=t(e,122,0,"Settings"===l.page);t(e,121,0,d),t(e,124,0,"/settings");var b=t(e,132,0,"Home"===l.page);t(e,131,0,"nav-item",b),t(e,134,0,"/home"),t(e,135,0,"Home","hover");var m=t(e,140,0,"Letters"===l.page);t(e,139,0,"d-md-none nav-item",m),t(e,142,0,"/letters"),t(e,143,0,"Letters","hover");var g=t(e,148,0,"Artists"===l.page);t(e,147,0,"nav-item",g),t(e,150,0,"/artists"),t(e,151,0,"Artists","hover");var p=t(e,156,0,"Albums"===l.page);t(e,155,0,"nav-item",p),t(e,158,0,"/albums"),t(e,159,0,"Albums","hover");var f=t(e,164,0,"Years"===l.page);t(e,163,0,"nav-item",f),t(e,166,0,"/years"),t(e,167,0,"Years","hover");var y=t(e,172,0,"Playlists"===l.page);t(e,171,0,"nav-item",y),t(e,174,0,"/playlists"),t(e,175,0,"Playlists","hover");var v=t(e,180,0,"Now playing"===l.page);t(e,179,0,"nav-item",v),t(e,182,0,"/now-playing"),t(e,183,0,"Now Playing","hover"),t(e,186,0,l.manualScrobblingList.length>0);var k=t(e,190,0,"Settings"===l.page);t(e,189,0,"nav-item",k),t(e,192,0,"/settings"),t(e,193,0,"Settings","hover")},function(t,e){t(e,25,0,r.Ab(e,32).ngClassUntouched,r.Ab(e,32).ngClassTouched,r.Ab(e,32).ngClassPristine,r.Ab(e,32).ngClassDirty,r.Ab(e,32).ngClassValid,r.Ab(e,32).ngClassInvalid,r.Ab(e,32).ngClassPending),t(e,33,0,r.Ab(e,38).ngClassUntouched,r.Ab(e,38).ngClassTouched,r.Ab(e,38).ngClassPristine,r.Ab(e,38).ngClassDirty,r.Ab(e,38).ngClassValid,r.Ab(e,38).ngClassInvalid,r.Ab(e,38).ngClassPending),t(e,48,0,r.Ab(e,52).ngClassUntouched,r.Ab(e,52).ngClassTouched,r.Ab(e,52).ngClassPristine,r.Ab(e,52).ngClassDirty,r.Ab(e,52).ngClassValid,r.Ab(e,52).ngClassInvalid,r.Ab(e,52).ngClassPending),t(e,53,0,r.Ab(e,58).ngClassUntouched,r.Ab(e,58).ngClassTouched,r.Ab(e,58).ngClassPristine,r.Ab(e,58).ngClassDirty,r.Ab(e,58).ngClassValid,r.Ab(e,58).ngClassInvalid,r.Ab(e,58).ngClassPending),t(e,65,0,r.Ab(e,66).target,r.Ab(e,66).href),t(e,73,0,r.Ab(e,74).target,r.Ab(e,74).href),t(e,81,0,r.Ab(e,82).target,r.Ab(e,82).href),t(e,89,0,r.Ab(e,90).target,r.Ab(e,90).href),t(e,97,0,r.Ab(e,98).target,r.Ab(e,98).href),t(e,105,0,r.Ab(e,106).target,r.Ab(e,106).href),t(e,113,0,r.Ab(e,114).target,r.Ab(e,114).href),t(e,123,0,r.Ab(e,124).target,r.Ab(e,124).href),t(e,133,0,r.Ab(e,134).target,r.Ab(e,134).href,r.Ab(e,135).ariaDescribedby),t(e,141,0,r.Ab(e,142).target,r.Ab(e,142).href,r.Ab(e,143).ariaDescribedby),t(e,149,0,r.Ab(e,150).target,r.Ab(e,150).href,r.Ab(e,151).ariaDescribedby),t(e,157,0,r.Ab(e,158).target,r.Ab(e,158).href,r.Ab(e,159).ariaDescribedby),t(e,165,0,r.Ab(e,166).target,r.Ab(e,166).href,r.Ab(e,167).ariaDescribedby),t(e,173,0,r.Ab(e,174).target,r.Ab(e,174).href,r.Ab(e,175).ariaDescribedby),t(e,181,0,r.Ab(e,182).target,r.Ab(e,182).href,r.Ab(e,183).ariaDescribedby),t(e,191,0,r.Ab(e,192).target,r.Ab(e,192).href,r.Ab(e,193).ariaDescribedby)})}class R{constructor(t,e){this.coreService=t,this.router=e,this.activeLetter=null,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()})}ngOnInit(){this.letters=this.core.sortedLetters}onSelect(t){this.activeLetter&&(this.activeLetter.active=!1),this.activeLetter=t,this.router.navigate(["/letter",t.escapedLetter])}ngOnDestroy(){this.subscription.unsubscribe()}}var U=r.mb({encapsulation:2,styles:[],data:{}});function q(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,5,"li",[["class","nav-item align-self-stretch flex-grow-1 text-center"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,4,"a",[],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.onSelect(t.context.$implicit)&&n),n},null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(3,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(4,{active:0}),(t()(),r.Hb(5,null,["",""]))],function(t,e){var l=t(e,4,0,e.context.$implicit.active);t(e,3,0,l)},function(t,e){t(e,5,0,e.context.$implicit.letter)})}function K(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,2,"ul",[["class","nav d-none d-md-flex nav-letters"]],null,null,null,null,null)),(t()(),r.eb(16777216,null,null,1,null,q)),r.nb(2,278528,null,0,i.j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.letters)},null)}l("hR/0");var F=l("KI15"),H=l("1gFc"),V=l("meIv"),J=l("Pbcf");const W=t=>(t.r=Math.floor(t.r),t.g=Math.floor(t.g),t.b=Math.floor(t.b),t.a=1,t),z=(t,e)=>V.a.isReadable(t,e)?W(new V.a(t).toRgb()):z("#000"===e?new V.a(t).lighten(3):new V.a(t).darken(3),e),X=t=>V.a.readability("#000",t)>V.a.readability("#fff",t)?"#000":"#fff";function G(t,e,l){if(window.runningInElectron&&!l)document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbuntaint",{detail:{url:t}}));else{const l=new Image;l.crossOrigin="Anonymous",l.addEventListener("load",t=>{const n=document.createElement("canvas"),s=n.getContext("2d");n.width=l.width,n.height=l.height,s.drawImage(l,0,0);const i=(new J.a).getColor(n).value;e(W({r:i[0],g:i[1],b:i[2]}))},!1),l.src=t}}function Y(t){const e=W(new V.a(t).lighten().toRgb());return{rgba:t,textLight:z(t,"#fff"),textDark:z(t,"#000"),lighten:e,darken:W(new V.a(t).darken().toRgb()),letterColor:X(new V.a(t))}}function Z(t){const e=document.createElement("style"),{rgba:l,darken:n,lighten:s,textLight:i,textDark:r,letterColor:a}=t;e.setAttribute("type","text/css"),e.id="custom-css-node",e.textContent=`\n      @charset "UTF-8";\n      :root {\n        --primary: rgba(${l.r}, ${l.g}, ${l.b}, 1);\n        --darken: rgba(${n.r}, ${n.g}, ${n.b}, 1);\n        --lighten: rgba(${s.r}, ${s.g}, ${s.b}, 1);\n        --text-light: rgba(${i.r}, ${i.g}, ${i.b}, 1);\n        --text-dark: rgba(${r.r}, ${r.g}, ${r.b}, 1);\n        --letter-color: ${a};\n      }`,Q(),document.querySelector("body").appendChild(e)}function Q(){document.querySelector("#custom-css-node")&&document.querySelector("#custom-css-node").remove()}let tt=(()=>{class t{constructor(t,e,l,n,s,i,r){this.pathService=t,this.playerService=e,this.router=l,this.lastFMService=n,this.coreService=s,this.animationService=i,this.colorService=r,this.showPlayer=!1,this.usesDynamicAccentColor=this.booleanState("dynamic-accent-color"),this.isPlaying=!1,this.isPaused=!1,this.hasScrobbledCurrentTrack=!1,this.isCurrentPlaylistLoaded=!1,this.isShuffled=!1,this.forceRestart=!1,this.showVolumeWindow=!1,this.volume=100,this.isHostedApp="undefined"!=typeof Windows,this.subscription=this.playerService.playlistAnnounced$.subscribe(t=>{t?(this.playlist=t.playlist,this.trackIndex=t.startIndex,this.isPaused=t.isPaused,this.isPlaying=t.isPlaying,this.isShuffled=t.isShuffled,this.forceRestart=t.forceRestart,this.showPlayer=this.isPaused||this.isPlaying,this.setTrack(t.position)):(this.isPlaying=!1,this.showPlayer=!1,this.mediaObject.pause())}),this.subscription5=this.playerService.hideVolumeWindowAnnounced$.subscribe(()=>{this.showVolumeWindow=!1}),this.mediaObject=document.querySelector("audio"),this.mediaObject.crossOrigin="anonymous",this.mediaObject.canPlayType("audio/flac"),this.mediaObject.addEventListener("ended",()=>{this.next()}),this.mediaObject.addEventListener("timeupdate",()=>{this.updateTime()}),this.mediaObject.addEventListener("play",()=>{this.onplay()}),this.mediaObject.addEventListener("progress",()=>{this.onprogress()}),this.mediaObject.addEventListener("pause",()=>{this.onpause()}),this.mediaObject.addEventListener("ended",()=>{this.onstop()});const a=localStorage.getItem("dsm");if(a&&(this.url=a),this.core=this.coreService.getCore(),this.subscription2=this.core.coreParsed$.subscribe(t=>{const e=localStorage.getItem("save-playlist-state");e&&"true"===e&&this.readCurrentPlaylist()}),this.subscription3=this.playerService.volumeAnnounced.subscribe(t=>{this.volume=t,this.mediaObject.volume=this.volume/100}),this.subscription4=t.pageAnnounced$.subscribe(t=>{"Now playing"===t.page&&(this.showVolumeWindow=!1)}),this.isHostedApp&&(this.systemMediaControls=Windows.Media.SystemMediaTransportControls.getForCurrentView(),this.displayUpdater=this.systemMediaControls.displayUpdater,this.systemMediaControls.isEnabled=!0,this.systemMediaControls.isPlayEnabled=!0,this.systemMediaControls.isPauseEnabled=!0,this.systemMediaControls.isStopEnabled=!0,this.systemMediaControls.isNextEnabled=!0,this.systemMediaControls.isPreviousEnabled=!0,this.systemMediaControls.addEventListener("buttonpressed",t=>{const e=Windows.Media.SystemMediaTransportControlsButton;switch(t.button){case e.play:this.mediaObject.play();break;case e.pause:this.mediaObject.pause();break;case e.stop:this.playerService.stop();break;case e.next:this.next();break;case e.previous:this.prev();break;default:console.warn("key not mapped in application",t.button)}},!1),this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.closed),-1===navigator.userAgent.indexOf("Mobi")){const t=document.querySelector("canvas");let e=t.offsetWidth,l=t.offsetHeight;t.width=e,t.height=l,t.getContext("2d"),this.audioCtx=new(window.AudioContext||window.webkitAudioContext);const n=this.audioCtx.createScriptProcessor(2048,1,1);n.connect(this.audioCtx.destination);const s=this.audioCtx.createAnalyser(),i=this.audioCtx.createMediaElementSource(this.mediaObject);s.fftSize=128;const r=s.frequencyBinCount;i.connect(s),s.connect(n),i.connect(this.audioCtx.destination),n.onaudioprocess=()=>{const t=document.querySelector("canvas"),n=this.rgba||{r:0,g:110,b:205,a:1};l=t.offsetHeight,t.width=e=t.offsetWidth,t.height=l;const i=t.getContext("2d"),a=new Uint8Array(r);s.getByteFrequencyData(a),i.clearRect(0,0,e,l);const u=Math.floor(e/r*1.1);let o,c=0;const h=l/150*1.17;for(let e=0;e<r;e++)o=a[e]*h,i.fillStyle=`rgba(${n.r},${n.g},${n.b},${a[e]/255})`,i.fillRect(c,l-o/2,u,o/2),c+=u+1}}this.subscription6=this.colorService.color$.subscribe(t=>{this.rgba=t}),this.subscription7=this.colorService.blob$.subscribe(()=>{const t=new Blob([window.externalBlob],{type:"image/png"}),e=URL.createObjectURL(t),l=new Image;l.src=e,function(t,e,n){G(l.src,e,!0)}(0,t=>{const e=Y(t);this.colorService.setColor(e.rgba),Z(e)})})}setTrack(t){if(this.track=this.playlist.tracks[this.trackIndex],!this.currentTrack||this.track&&this.currentTrack.id!==this.track.id||this.forceRestart){const t=localStorage.getItem("dsm");t&&(this.url=t);const e=localStorage.getItem("jwt");this.mediaObject.src=`${this.url}/listen?path=${encodeURIComponent(this.track.source.url)}&jwt=${e}`,this.currentTrack=this.track,this.hasScrobbledCurrentTrack=!1,this.animationService.requestAnimation("enter",document.querySelector(".player h4")),this.animationService.requestAnimation("enter",document.querySelector(".player h5"))}this.isPlaying?this.mediaObject.play():this.mediaObject.pause(),this.isCurrentPlaylistLoaded&&(this.mediaObject.currentTime=localStorage.getItem("current-time")||0,this.isCurrentPlaylistLoaded=!1),t&&(this.mediaObject.currentTime=t)}readCurrentPlaylist(){Object(w.c)("current-playlist").then(t=>{const e=t;if(e){const t=this.coreService.getCore(),l=[];e.ids.forEach(e=>{l.push(t.tracks[e])});const n=new F.a;n.tracks=l,n.name="Current Playlist",n.isContinues=e.isContinues||!1,n.type=e.type,this.isShuffled=e.isShuffled,this.isCurrentPlaylistLoaded=!0,this.playerService.doPlayPlaylist(n,e.current,!1,e.isShuffled)}})}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe(),this.subscription3.unsubscribe(),this.subscription4.unsubscribe(),this.subscription5.unsubscribe(),this.subscription6.unsubscribe(),this.subscription7.unsubscribe(),this.mediaObject.removeEventListener("ended"),this.mediaObject.removeEventListener("timeupdate"),this.mediaObject.removeEventListener("play"),this.showVolumeWindow=!1}navigateToArtist(){this.router.navigate(["/letter",this.track.album.artist.letter.escapedLetter,"artist",this.track.album.artist.sortName])}navigateToAlbum(){this.router.navigate(["/letter",this.track.album.artist.letter.escapedLetter,"artist",this.track.album.artist.sortName,"album",this.track.album.sortName])}navigateToNowPlaying(){this.router.navigate(["/now-playing"])}next(){this.trackIndex<this.playlist.tracks.length-1?(this.trackIndex++,this.playerService.next()):this.playlist.isContinues?(this.trackIndex=0,"random"===this.playlist.type||"radio"===this.playlist.type?this.playerService.nextPlaylist(this.playlist.type):this.playerService.nextAlbum(this.track.album)):this.playerService.stop()}prev(){this.trackIndex>0&&(this.trackIndex--,this.playerService.prev())}togglePlayPause(){this.playerService.togglePlayPause()}updateTime(){if(this.track.position=1e3*this.mediaObject.currentTime,!this.hasScrobbledCurrentTrack&&(this.track.position>=t.SCROBBLETIME||this.track.position/this.track.duration>=.5&&performance.now()>t.SCROBBLETIME)){this.hasScrobbledCurrentTrack=!0;try{this.lastFMService.scrobbleTrack(this.track).subscribe(()=>{})}catch(e){console.error(e)}}localStorage.setItem("current-time",this.mediaObject.currentTime.toString())}onplay(){try{this.lastFMService.announceNowPlaying(this.track).subscribe()}catch(e){}var t;document.title=`${this.track.title} by ${this.track.trackArtist}`,"mediaSession"in navigator&&Object(w.c)(`art-${this.track.trackArtist}-${this.track.album.name}`).then(t=>{t&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.track.title,artist:this.track.trackArtist,album:this.track.album.name,artwork:[{src:t,sizes:"500x500",type:"image/png"}]})),navigator.mediaSession.setActionHandler("play",()=>{this.togglePlayPause()}),navigator.mediaSession.setActionHandler("pause",()=>{this.togglePlayPause()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.prev()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.next()})}),this.isHostedApp&&(this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.playing,this.displayUpdater.type=Windows.Media.MediaPlaybackType.music,Object(w.c)(`art-${this.track.trackArtist}-${this.track.album.name}`).then(t=>{try{void 0!==this.displayUpdater&&(this.displayUpdater.musicProperties.albumArtist=this.track.trackArtist,this.displayUpdater.musicProperties.artist=this.track.trackArtist,this.displayUpdater.musicProperties.albumTitle=this.track.album.name,this.displayUpdater.musicProperties.title=this.track.title,t&&(this.displayUpdater.thumbnail=Windows.Storage.Streams.RandomAccessStreamReference.createFromUri(new Windows.Foundation.Uri(t))),this.displayUpdater.update())}catch(e){console.error("error occurred",e)}this.updateWinTile(t)})),document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbplaying",{detail:this.track})),this.audioCtx&&this.audioCtx.resume(),this.usesDynamicAccentColor=this.booleanState("dynamic-accent-color"),this.usesDynamicAccentColor&&(t=this.rgba)&&Z(Y(t))}onstop(){document.querySelector("mdb-player").dispatchEvent(new Event("external.mdbstopped")),document.title="JSMusicDB Next",this.isHostedApp&&(this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.stopped),this.audioCtx&&this.audioCtx.suspend(),Q()}onpause(){document.querySelector("mdb-player").dispatchEvent(new CustomEvent("external.mdbpaused",{detail:this.track})),document.title="JSMusicDB Next",this.isHostedApp&&(this.systemMediaControls.playbackStatus=Windows.Media.MediaPlaybackStatus.paused),this.audioCtx&&this.audioCtx.suspend(),Q()}onChangeArt(t){if(this.usesDynamicAccentColor){const{art:e}=t.detail;G(e,t=>{const e=Y(t);this.colorService.setColor(e.rgba),Z(e)},!1)}else this.colorService.setColor({r:0,g:110,b:205,a:1}),Q()}toggleShuffle(){this.isShuffled=!this.isShuffled,this.playerService.shufflePlaylist(this.isShuffled)}toggleLoved(){this.track.isLoved=!this.track.isLoved,this.lastFMService.toggleLoved(this.track).subscribe()}toggleVolumeWindow(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),this.showVolumeWindow=!this.showVolumeWindow}onprogress(){const t=this.mediaObject.buffered;0!==t.length&&(this.track.buffered.start=1e3*t.start(0!==t.length?t.length-1:0),this.track.buffered.end=1e3*t.end(0!==t.length?t.length-1:0))}setVolume(){this.mediaObject.volume=this.volume/100,this.playerService.setVolume(this.volume)}jump(t){const e=(t.clientX||t.changedTouches[0].clientX)/document.querySelector(".player").clientWidth;this.playerService.setPosition(this.track.duration/1e3*e)}booleanState(t){const e=localStorage.getItem(t);return!(!e||"true"!==e)}updateWinTile(t){const e=Windows.UI.Notifications;e.TileUpdateManager.createTileUpdaterForApplication("App").clear();const l=e.TileUpdateManager.getTemplateContent(e.TileTemplateType.tileSquare150x150PeekImageAndText02);let n=l.getElementsByTagName("text")[0];n.innerText=this.track.title,(n=l.getElementsByTagName("text")[1]).innerText=this.track.trackArtist,t&&(l.getElementsByTagName("image")[0].attributes[1].value=t);const s=new Date,i=new Date(s.getTime()+Number(this.track.duration));let r=l.importNode(this.getTileContent(t,"tileSquare310x310ImageAndText02").getElementsByTagName("binding").item(0),!0);l.getElementsByTagName("visual").item(0).appendChild(r),r=l.importNode(this.getTileContent(t,"tileWide310x150PeekImage02").getElementsByTagName("binding").item(0),!0),l.getElementsByTagName("visual").item(0).appendChild(r),r=l.importNode(this.getTileContent(t,"tileSquare71x71Image").getElementsByTagName("binding").item(0),!0),l.getElementsByTagName("visual").item(0).appendChild(r);const a=new e.TileNotification(l);a.expirationTime=i,e.TileUpdateManager.createTileUpdaterForApplication("App").update(a)}getTileContent(t,e){const l=Windows.UI.Notifications,n=l.TileUpdateManager.getTemplateContent(l.TileTemplateType[e]);try{n.getElementsByTagName("text")[0].innerText=this.track.title}catch(s){console.error(s)}try{n.getElementsByTagName("text")[1].innerText=this.track.trackArtist}catch(s){console.error(s)}return t&&(n.getElementsByTagName("image")[0].attributes[1].value=t),n}}return t.SCROBBLETIME=24e4,t})();var et=r.mb({encapsulation:2,styles:[],data:{}});function lt(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,0,"i",[["class","glyph glyph-pause"]],null,null,null,null,null))],null,null)}function nt(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,0,"i",[["class","glyph glyph-play"]],null,null,null,null,null))],null,null)}function st(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,53,"div",[["class","player"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,4,"div",[["class","progress"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.jump(l)&&n),n},null,null)),(t()(),r.ob(3,0,null,null,3,"div",[["class","progress-bar"],["role","progressbar"]],null,null,null,null,null)),r.Eb(512,null,i.w,i.x,[r.k,r.r,r.B]),r.nb(5,278528,null,0,i.n,[i.w],{ngStyle:[0,"ngStyle"]},null),r.Cb(6,{width:0}),(t()(),r.ob(7,0,null,null,38,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),r.ob(8,0,null,null,37,"div",[["class","row row-sm"]],null,null,null,null,null)),(t()(),r.ob(9,0,null,null,1,"div",[["class","col-xs-4 col-player-art"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.navigateToNowPlaying()&&n),n},null,null)),(t()(),r.ob(10,0,null,null,0,"album-art",[],[[8,"artist",0],[8,"album",0]],[[null,"art"]],function(t,e,l){var n=!0;return"art"===e&&(n=!1!==t.component.onChangeArt(l)&&n),n},null,null)),(t()(),r.ob(11,0,null,null,9,"div",[["class","col-xs-11 col-player-special"]],null,null,null,null,null)),(t()(),r.ob(12,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r.Hb(13,null,["",""])),(t()(),r.ob(14,0,null,null,6,"h5",[],null,null,null,null,null)),(t()(),r.ob(15,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.navigateToArtist()&&n),n},null,null)),(t()(),r.Hb(16,null,["",""])),(t()(),r.ob(17,0,null,null,3,"span",[["class","hidden-xs color-type-secondary"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" \u2022 "])),(t()(),r.ob(19,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.navigateToAlbum()&&n),n},null,null)),(t()(),r.Hb(20,null,["",""])),(t()(),r.ob(21,0,null,null,24,"div",[["class","col-xs-9 text-right col-player-controls"]],null,null,null,null,null)),(t()(),r.ob(22,0,null,null,1,"a",[["class","btn btn-link"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.prev()&&n),n},null,null)),(t()(),r.ob(23,0,null,null,0,"span",[["class","glyph glyph-previous"]],null,null,null,null,null)),(t()(),r.ob(24,0,null,null,4,"a",[["class","btn btn-link"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.togglePlayPause()&&n),n},null,null)),(t()(),r.eb(16777216,null,null,1,null,lt)),r.nb(26,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.eb(16777216,null,null,1,null,nt)),r.nb(28,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(29,0,null,null,1,"a",[["class","btn btn-link"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.next()&&n),n},null,null)),(t()(),r.ob(30,0,null,null,0,"span",[["class","glyph glyph-next"]],null,null,null,null,null)),(t()(),r.ob(31,0,null,null,4,"a",[["class","btn btn-link d-none d-md-inline-block"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.toggleVolumeWindow(l)&&n),n},null,null)),(t()(),r.ob(32,0,null,null,3,"span",[["class","glyph"]],null,null,null,null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(34,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(35,{"glyph-volume":0,"glyph-mute":1}),(t()(),r.ob(36,0,null,null,4,"a",[["class","btn btn-link d-none d-md-inline-block btn-love"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.toggleLoved()&&n),n},null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(38,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(39,{active:0}),(t()(),r.ob(40,0,null,null,0,"i",[["class","glyph glyph-star-outline"]],null,null,null,null,null)),(t()(),r.ob(41,0,null,null,4,"a",[["class","btn btn-link d-none d-md-inline-block btn-shuffle"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.toggleShuffle()&&n),n},null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(43,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(44,{active:0}),(t()(),r.ob(45,0,null,null,0,"i",[["class","glyph glyph-shuffle"]],null,null,null,null,null)),(t()(),r.ob(46,0,null,null,7,"div",[["class","volume-control"]],[[8,"hidden",0]],null,null,null,null)),(t()(),r.ob(47,0,null,null,6,"input",[["max","100"],["min","0"],["type","range"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,l){var n=!0,s=t.component;return"input"===e&&(n=!1!==r.Ab(t,48)._handleInput(l.target.value)&&n),"blur"===e&&(n=!1!==r.Ab(t,48).onTouched()&&n),"compositionstart"===e&&(n=!1!==r.Ab(t,48)._compositionStart()&&n),"compositionend"===e&&(n=!1!==r.Ab(t,48)._compositionEnd(l.target.value)&&n),"change"===e&&(n=!1!==r.Ab(t,49).onChange(l.target.value)&&n),"input"===e&&(n=!1!==r.Ab(t,49).onChange(l.target.value)&&n),"blur"===e&&(n=!1!==r.Ab(t,49).onTouched()&&n),"ngModelChange"===e&&(n=!1!==(s.volume=l)&&n),"input"===e&&(n=!1!==s.setVolume()&&n),"change"===e&&(n=!1!==s.setVolume()&&n),n},null,null)),r.nb(48,16384,null,0,S.c,[r.B,r.k,[2,S.a]],null,null),r.nb(49,16384,null,0,S.n,[r.B,r.k],null,null),r.Eb(1024,null,S.f,function(t,e){return[t,e]},[S.c,S.n]),r.nb(51,671744,null,0,S.k,[[8,null],[8,null],[8,null],[6,S.f]],{model:[0,"model"]},{update:"ngModelChange"}),r.Eb(2048,null,S.g,null,[S.k]),r.nb(53,16384,null,0,S.h,[[4,S.g]],null,null)],function(t,e){var l=e.component,n=t(e,6,0,l.track.position/l.track.duration*100+"%");t(e,5,0,n),t(e,26,0,l.isPlaying),t(e,28,0,l.isPaused);var s=t(e,35,0,l.volume>0,0==l.volume);t(e,34,0,"glyph",s);var i=t(e,39,0,l.track.isLoved);t(e,38,0,"btn btn-link d-none d-md-inline-block btn-love",i);var r=t(e,44,0,l.isShuffled);t(e,43,0,"btn btn-link d-none d-md-inline-block btn-shuffle",r),t(e,51,0,l.volume)},function(t,e){var l=e.component;t(e,10,0,l.track.trackArtist,l.track.album.name),t(e,13,0,l.track.title),t(e,16,0,l.track.trackArtist),t(e,20,0,l.track.album.name),t(e,46,0,!l.showVolumeWindow),t(e,47,0,r.Ab(e,53).ngClassUntouched,r.Ab(e,53).ngClassTouched,r.Ab(e,53).ngClassPristine,r.Ab(e,53).ngClassDirty,r.Ab(e,53).ngClassValid,r.Ab(e,53).ngClassInvalid,r.Ab(e,53).ngClassPending)})}function it(t){return r.Jb(0,[(t()(),r.eb(16777216,null,null,1,null,st)),r.nb(1,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,1,0,e.component.showPlayer)},null)}var rt=l("IheW"),at=l("Gcu2"),ut=r.mb({encapsulation:2,styles:[],data:{}});function ot(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),r.Hb(1,null,[" progress: ","% "]))],null,function(t,e){t(e,1,0,e.component.scanperc)})}function ct(t){return r.Jb(0,[(t()(),r.ob(0,0,null,null,12,"div",[["id","reloading"]],null,null,null,null,null)),(t()(),r.ob(1,0,null,null,11,"div",[["class","container"]],null,null,null,null,null)),(t()(),r.ob(2,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.ob(3,0,null,null,9,"div",[["class","col"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,[" Collection is being reloaded, please wait. "])),(t()(),r.eb(16777216,null,null,1,null,ot)),r.nb(6,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(7,0,null,null,5,"div",[["class","progress-bar"]],null,null,null,null,null)),(t()(),r.ob(8,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(t()(),r.ob(9,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(t()(),r.ob(10,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(t()(),r.ob(11,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(t()(),r.ob(12,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null))],function(t,e){t(e,6,0,e.component.scanperc)},null)}function ht(t){return r.Jb(0,[(t()(),r.eb(16777216,null,null,1,null,ct)),r.nb(1,16384,null,0,i.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.ob(2,0,null,null,6,"div",[],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.hideVolumeWindow&&n),n},null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(4,278528,null,0,i.i,[i.u],{ngClass:[0,"ngClass"]},null),r.Cb(5,{isPlaying:0}),(t()(),r.ob(6,0,null,null,2,"mdb-topmenu",[],null,null,null,D,T)),r.Eb(5120,null,y.a,x,[]),r.nb(8,245760,null,0,L,[C.a,f.k,A.a,b.a],null,null),(t()(),r.ob(9,0,null,null,2,"div",[["class","fixed-top"],["style","z-index: 1029;"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.hideVolumeWindow&&n),n},null,null)),(t()(),r.ob(10,0,null,null,1,"mdb-letters",[],null,null,null,K,U)),r.nb(11,245760,null,0,R,[b.a,f.k],null,null),(t()(),r.ob(12,0,null,null,5,"div",[["class","main-content"]],null,[[null,"click"]],function(t,e,l){var n=!0;return"click"===e&&(n=!1!==t.component.hideVolumeWindow&&n),n},null,null)),r.Eb(512,null,i.u,i.v,[r.q,r.r,r.k,r.B]),r.nb(14,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Cb(15,{isPlaying:0}),(t()(),r.ob(16,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.nb(17,212992,null,0,f.n,[f.b,r.M,r.j,[8,null],r.h],null,null),(t()(),r.ob(18,0,null,null,0,"audio",[["style","display: none;"]],null,null,null,null,null)),(t()(),r.ob(19,0,null,null,0,"canvas",[],null,null,null,null,null)),(t()(),r.ob(20,0,null,null,1,"mdb-player",[],null,[[null,"mdbprev"],[null,"mdbnext"],[null,"mdbtoggle"],[null,"mdbstop"],[null,"click"],[null,"mdbblob"]],function(t,e,l){var n=!0,s=t.component;return"mdbprev"===e&&(n=!1!==s.onExternalPrev(l)&&n),"mdbnext"===e&&(n=!1!==s.onExternalNext(l)&&n),"mdbtoggle"===e&&(n=!1!==s.onExternalToggle(l)&&n),"mdbstop"===e&&(n=!1!==s.onExternalStop(l)&&n),"click"===e&&(n=!1!==s.hideVolumeWindow()&&n),"mdbblob"===e&&(n=!1!==s.onExternalBlob()&&n),n},it,et)),r.nb(21,180224,null,0,tt,[C.a,o.a,f.k,A.a,b.a,H.a,h.a],null,null)],function(t,e){var l=e.component;t(e,1,0,l.isReloading);var n=t(e,5,0,l.isPlaying);t(e,4,0,n),t(e,8,0),t(e,11,0);var s=t(e,15,0,l.isPlaying);t(e,14,0,"main-content",s),t(e,17,0)},null)}function dt(t){return r.Jb(0,[(t()(),r.ob(0,16777216,null,null,10,"mdb-root",[],null,null,null,ht,ut)),r.Eb(4608,null,C.a,C.a,[]),r.Eb(4608,null,H.a,H.a,[]),r.Eb(512,null,c.a,c.a,[rt.c]),r.Eb(512,null,b.a,b.a,[]),r.Eb(512,null,d.a,d.a,[rt.c]),r.Eb(512,null,A.a,A.a,[rt.c]),r.Eb(512,null,at.a,at.a,[b.a,A.a]),r.Eb(512,null,o.a,o.a,[A.a,b.a,at.a]),r.Eb(512,null,h.a,h.a,[]),r.nb(10,245760,null,0,m,[c.a,b.a,u.a,d.a,o.a,h.a,r.M],null,null)],function(t,e){t(e,10,0)},null)}var bt=r.kb("mdb-root",m,dt,{},{},[]),mt=l("cUpR");class gt{supports(t){let e=!1;return 0===t.indexOf("mdb")&&(e=!0),e}addEventListener(t,e,l){const n=this.manager.getZone(),s=t=>{n.run(()=>l(t))};return this.manager.getZone().runOutsideAngular(()=>{this.manager.addEventListener(t,"external."+e,s)})}addGlobalEventListener(t,e,l){const n=this.manager.getZone(),s=t=>n.run(()=>l(t));return this.manager.getZone().runOutsideAngular(()=>{this.manager.addGlobalEventListener(t,e,s)})}}class pt{constructor(t,e){this.loginService=t,this.router=e}canActivate(t,e){return new Promise(t=>{const l=e.url;window.scrollTo(0,0),t(this.checkLogin(l))})}checkLogin(t){return!!localStorage.getItem("jwt")||(this.router.navigate(["/login"]),!1)}}const ft=()=>l.e(9).then(l.bind(null,"f+ep")).then(t=>t.LoginModuleNgFactory),yt=()=>Promise.all([l.e(0),l.e(6)]).then(l.bind(null,"L6id")).then(t=>t.HomeModuleNgFactory),vt=()=>l.e(8).then(l.bind(null,"uob2")).then(t=>t.LettersModuleNgFactory),kt=()=>Promise.all([l.e(0),l.e(5)]).then(l.bind(null,"q+AI")).then(t=>t.ArtistsModuleNgFactory),St=()=>Promise.all([l.e(0),l.e(3)]).then(l.bind(null,"RZ0Q")).then(t=>t.AlbumsModuleNgFactory),wt=()=>Promise.all([l.e(0),l.e(19)]).then(l.bind(null,"bYjM")).then(t=>t.YearsModuleNgFactory),At=()=>Promise.all([l.e(0),l.e(12)]).then(l.bind(null,"6bSv")).then(t=>t.PlaylistsModuleNgFactory),Ct=()=>Promise.all([l.e(0),l.e(11)]).then(l.bind(null,"wPTJ")).then(t=>t.NowPlayingModuleNgFactory),Pt=()=>Promise.all([l.e(0),l.e(16)]).then(l.bind(null,"3F3D")).then(t=>t.SettingsModuleNgFactory),xt=()=>l.e(14).then(l.bind(null,"VtoZ")).then(t=>t.ScrobbleCacheModuleNgFactory),Lt=()=>Promise.all([l.e(0),l.e(15)]).then(l.bind(null,"k0NY")).then(t=>t.SearchModuleNgFactory),Tt=()=>Promise.all([l.e(0),l.e(7)]).then(l.bind(null,"g2JG")).then(t=>t.LetterDetailModuleNgFactory),Et=()=>Promise.all([l.e(0),l.e(4)]).then(l.bind(null,"9/lQ")).then(t=>t.ArtistDetailModuleNgFactory),It=()=>Promise.all([l.e(0),l.e(2)]).then(l.bind(null,"r0Lh")).then(t=>t.AlbumDetailModuleNgFactory),Ot=()=>Promise.all([l.e(0),l.e(6)]).then(l.bind(null,"L6id")).then(t=>t.HomeModuleNgFactory);f.m.forRoot([{path:"login",loadChildren:ft},{path:"home",loadChildren:yt,canActivate:[pt]},{path:"letters",loadChildren:vt,canActivate:[pt]},{path:"artists",loadChildren:kt,canActivate:[pt]},{path:"albums",loadChildren:St,canActivate:[pt]},{path:"years",loadChildren:wt,canActivate:[pt]},{path:"playlists",loadChildren:At,canActivate:[pt]},{path:"now-playing",loadChildren:Ct,canActivate:[pt]},{path:"settings",loadChildren:Pt,canActivate:[pt]},{path:"scrobble-cache",loadChildren:xt,canActivate:[pt]},{path:"search/:query",loadChildren:Lt,canActivate:[pt]},{path:"letter/:letter",loadChildren:Tt,canActivate:[pt]},{path:"letter/:letter/artist/:artist",loadChildren:Et,canActivate:[pt]},{path:"letter/:letter/artist/:artist/album/:album",loadChildren:It,canActivate:[pt]},{path:"",loadChildren:Ot,canActivate:[pt]}],{preloadingStrategy:f.e});var _t=l("hDf6"),Mt=r.lb(a,[m],function(t){return r.xb([r.yb(512,r.j,r.X,[[8,[g.a,p.a,bt]],[3,r.j],r.v]),r.yb(4352,r.s,"en-GB",[]),r.yb(4608,i.m,i.l,[r.s,[2,i.z]]),r.yb(5120,r.fb,r.jb,[r.x]),r.yb(5120,r.c,r.gb,[]),r.yb(5120,r.q,r.hb,[]),r.yb(5120,r.r,r.ib,[]),r.yb(4608,mt.b,mt.k,[i.c]),r.yb(6144,r.E,null,[mt.b]),r.yb(4608,mt.e,mt.g,[]),r.yb(5120,mt.c,function(t,e,l,n,s,i,r,a){return[new mt.i(t,e,l),new mt.n(n),new mt.m(s,i,r,a),new gt]},[i.c,r.x,r.z,i.c,i.c,mt.e,r.Y,[2,mt.f]]),r.yb(4608,mt.d,mt.d,[mt.c,r.x]),r.yb(135680,mt.l,mt.l,[i.c]),r.yb(4608,mt.j,mt.j,[mt.d,mt.l,r.c]),r.yb(6144,r.C,null,[mt.j]),r.yb(6144,mt.o,null,[mt.l]),r.yb(4608,r.K,r.K,[r.x]),r.yb(4608,rt.j,rt.p,[i.c,r.z,rt.n]),r.yb(4608,rt.q,rt.q,[rt.j,rt.o]),r.yb(5120,rt.a,function(t){return[t]},[rt.q]),r.yb(4608,rt.m,rt.m,[]),r.yb(6144,rt.k,null,[rt.m]),r.yb(4608,rt.i,rt.i,[rt.k]),r.yb(6144,rt.b,null,[rt.i]),r.yb(4608,rt.f,rt.l,[rt.b,r.p]),r.yb(4608,rt.c,rt.c,[rt.f]),r.yb(4608,S.r,S.r,[]),r.yb(5120,f.a,f.x,[f.k]),r.yb(4608,f.e,f.e,[]),r.yb(6144,f.f,null,[f.e]),r.yb(135680,f.o,f.o,[f.k,r.u,r.i,r.p,f.f]),r.yb(4608,f.d,f.d,[]),r.yb(5120,f.C,f.t,[f.k,i.q,f.g]),r.yb(5120,f.h,f.A,[f.y]),r.yb(5120,r.b,function(t){return[t]},[f.h]),r.yb(4608,y.a,y.a,[]),r.yb(4608,k.a,k.a,[r.C,r.z]),r.yb(4608,v.a,v.a,[r.j,r.x,r.p,k.a,r.g]),r.yb(4608,u.a,u.a,[rt.c]),r.yb(4608,pt,pt,[u.a,f.k]),r.yb(1073742336,i.b,i.b,[]),r.yb(1024,r.l,mt.p,[]),r.yb(1024,r.w,function(){return[f.s()]},[]),r.yb(512,f.y,f.y,[r.p]),r.yb(1024,r.d,function(t,e){return[mt.q(t),f.z(e)]},[[2,r.w],f.y]),r.yb(512,r.e,r.e,[[2,r.d]]),r.yb(131584,r.g,r.g,[r.x,r.Y,r.p,r.l,r.j,r.e]),r.yb(1073742336,r.f,r.f,[r.g]),r.yb(1073742336,mt.a,mt.a,[[3,mt.a]]),r.yb(1073742336,rt.e,rt.e,[]),r.yb(1073742336,rt.d,rt.d,[]),r.yb(1073742336,S.q,S.q,[]),r.yb(1073742336,S.d,S.d,[]),r.yb(1024,f.r,f.v,[[3,f.k]]),r.yb(512,f.q,f.c,[]),r.yb(512,f.b,f.b,[]),r.yb(256,f.g,{preloadingStrategy:f.e},[]),r.yb(1024,i.h,f.u,[i.p,[2,i.a],f.g]),r.yb(512,i.g,i.g,[i.h,i.p]),r.yb(512,r.i,r.i,[]),r.yb(512,r.u,r.H,[r.i,[2,r.I]]),r.yb(1024,f.i,function(){return[[{path:"login",loadChildren:ft},{path:"home",loadChildren:yt,canActivate:[pt]},{path:"letters",loadChildren:vt,canActivate:[pt]},{path:"artists",loadChildren:kt,canActivate:[pt]},{path:"albums",loadChildren:St,canActivate:[pt]},{path:"years",loadChildren:wt,canActivate:[pt]},{path:"playlists",loadChildren:At,canActivate:[pt]},{path:"now-playing",loadChildren:Ct,canActivate:[pt]},{path:"settings",loadChildren:Pt,canActivate:[pt]},{path:"scrobble-cache",loadChildren:xt,canActivate:[pt]},{path:"search/:query",loadChildren:Lt,canActivate:[pt]},{path:"letter/:letter",loadChildren:Tt,canActivate:[pt]},{path:"letter/:letter/artist/:artist",loadChildren:Et,canActivate:[pt]},{path:"letter/:letter/artist/:artist/album/:album",loadChildren:It,canActivate:[pt]},{path:"",loadChildren:Ot,canActivate:[pt]}]]},[]),r.yb(1024,f.k,f.w,[r.g,f.q,f.b,i.g,r.p,r.u,r.i,f.i,f.g,[2,f.p],[2,f.j]]),r.yb(1073742336,f.m,f.m,[[2,f.r],[2,f.k]]),r.yb(1073742336,y.d,y.d,[]),r.yb(1073742336,_t.a,_t.a,[]),r.yb(1073742336,a,a,[]),r.yb(256,r.W,!0,[]),r.yb(256,rt.n,"XSRF-TOKEN",[]),r.yb(256,rt.o,"X-XSRF-TOKEN",[])])});i.t(s.a),Object(r.Q)(),window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.deferredPrompt=t}),mt.h().bootstrapModuleFactory(Mt).catch(t=>console.error(t))}},[[0,1,18]]]);