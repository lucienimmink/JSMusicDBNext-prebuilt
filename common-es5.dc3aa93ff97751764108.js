(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/mZ":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var l=n("ztCj"),i=(n("xOws"),function(){function t(t,e){var n=this;this.backgroundArtService=e,this.NOIMAGE="global/images/no-cover.png",this.loading=!1,this.loaded=!1,this.error=!1,this.loadingClass="loading",this.loadedClass="loaded",this.errorClass="error",this.el=t.nativeElement,setTimeout(function(){n.loadImage()},100)}return t.prototype.loadImage=function(){var t=this;if(!this.loaded&&!this.loading||this.hasClassName("always-replace")){this.loading=!0,this.addClassName(this.loadingClass);var e="art-"+this.media.name;this.media.artist&&!this.media.trackArtist?e="art-"+this.media.artist.name+"-"+this.media.name:this.media.trackArtist&&(e="art-"+this.media.trackArtist+"-"+this.media.album.name),Object(l.b)(e).then(function(e){e?t.setImage(e):t.backgroundArtService.getMediaArt(t.media).subscribe(function(e){return t.setImage(e)},function(e){t.el.style.backgroundImage="url("+t.NOIMAGE+")",t.error=!0,t.loading=!1,t.removeClassName(t.loadingClass),t.addClassName(t.errorClass)})})}},t.prototype.setImage=function(t){var e=this,n=localStorage.getItem("dsm");if(n&&(n+="/data/image-proxy?url="),!this.loaded||this.hasClassName("always-replace")){if(t!==this.NOIMAGE&&""!==t&&t){this.el.style.backgroundImage=(t=this.backgroundArtService.returnImageUrlFromLastFMResponse(t))?"url("+n+encodeURIComponent(t)+")":"url("+this.NOIMAGE+")";var i={_id:"art-"+this.media.name,url:t||this.NOIMAGE};this.media.artist&&(i._id="art-"+this.media.artist.name+"-"+this.media.name),Object(l.c)(i._id,i.url)}else this.backgroundArtService.getMediaArtFromLastFm(this.media).subscribe(function(t){(t=e.backgroundArtService.returnImageUrlFromLastFMResponse(t))&&t!==e.NOIMAGE?e.el.style.backgroundImage="url("+n+encodeURIComponent(t)+")":(t||(t=e.NOIMAGE),e.el.style.backgroundImage="url("+t+")");var i={_id:"art-"+e.media.name,url:t||e.NOIMAGE};e.media.artist&&(i._id="art-"+e.media.artist.name+"-"+e.media.name),Object(l.c)(i._id,i.url)},function(t){return e.el.style.backgroundImage="url("+e.NOIMAGE+")"});this.loading=!1,this.toggleLoaded(!0)}},t.prototype.getPosition=function(){var t=this.el.getBoundingClientRect(),e=t.top+(window.pageYOffset-document.documentElement.clientTop);return{top:e,left:t.left+(window.pageXOffset-document.documentElement.clientLeft),bottom:e+this.el.clientHeight}},t.prototype.getLoadingContainer=function(){return this.el},t.prototype.hasClassName=function(t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(this.getLoadingContainer().className)},t.prototype.addClassName=function(t){if(!this.hasClassName(t)){var e=this.getLoadingContainer();e.className=e.className?[e.className,t].join(" "):t}},t.prototype.removeClassName=function(t){if(this.hasClassName(t)){var e=this.getLoadingContainer();e.className=e.className.replace(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g"),"")}},t.prototype.toggleLoaded=function(t){this.loaded=t,t?(this.removeClassName(this.loadingClass),this.addClassName(this.loadedClass)):this.removeClassName(this.loadedClass)},t}())},BZiF:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var l=n("CcnG"),i=n("xOws"),s=n("t/Na"),o=n("0/mZ"),r=(n("EAnT"),n("ZYCi"),l.mb({encapsulation:2,styles:[],data:{}}));function a(t){return l.Hb(0,[l.Db(402653184,1,{backgroundArt:0}),(t()(),l.ob(1,0,null,null,7,"div",[["class","panel-background"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.select()&&l),l},null,null)),l.Cb(512,null,i.a,i.a,[s.c]),l.nb(3,16384,[[1,4]],0,o.a,[l.k,i.a],{media:[0,"media"]},null),(t()(),l.ob(4,0,null,null,4,"div",[["class","panel-info color-type-primary-alt"]],null,null,null,null,null)),(t()(),l.ob(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Fb(6,null,["",""])),(t()(),l.ob(7,0,null,null,1,"span",[["class","small muted"]],null,null,null,null,null)),(t()(),l.Fb(8,null,["Albums: ",""]))],function(t,e){t(e,3,0,e.component.artist)},function(t,e){var n=e.component;t(e,6,0,n.artist.albumArtist||n.artist.name),t(e,8,0,n.artist.albums.length)})}},EAnT:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n("LNEh"),n("0/mZ");var l=function(){function t(t){this.router=t}return t.prototype.select=function(){this.router.navigate(["letter",this.artist.letter.escapedLetter,"artist",this.artist.sortName])},t}()},Oz9T:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var l=n("KI15"),i=(n("ufXC"),function(){function t(t){var e=this;if(this.playerservice=t,this.playlist={},this.isBusy=!1,this.ownPlaylists=[],localStorage.getItem("customlisttest")){var n=JSON.parse(localStorage.getItem("customlisttest"));n&&n.forEach(function(t){var n=new l.a;n.isOwn=!0,n.name=t.name,n.tracks=t.tracks,e.ownPlaylists.push(n)})}}return t.prototype.select=function(t){this.isBusy||this.playerservice.doPlayAlbum(this.playlist,this.playlist.tracks.indexOf(t),!0)},t.prototype.removeFromPlaylist=function(t,e){var n=this;this.isBusy=!0,setTimeout(function(){n.isBusy=!1},5),this.ownPlaylists.forEach(function(n){if(t.name===n.name){var l=t.tracks.indexOf(e);t.tracks.splice(l,1),n.tracks.splice(l,1)}}),localStorage.setItem("customlisttest",JSON.stringify(this.ownPlaylists))},t}())},UrAU:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n("/1T7"),n("0/mZ");var l=function(){function t(t){this.router=t}return t.prototype.select=function(){this.router.navigate(["letter",this.album.artist.letter.escapedLetter,"artist",this.album.artist.sortName,"album",this.album.sortName])},t}()},Vmu9:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var l=document.documentElement,i=l.matches?"matches":l.matchesSelector?"matchesSelector":l.webkitMatches?"webkitMatches":l.webkitMatchesSelector?"webkitMatchesSelector":l.msMatches?"msMatches":l.msMatchesSelector?"msMatchesSelector":l.mozMatches?"mozMatches":l.mozMatchesSelector?"mozMatchesSelector":null;function s(){if("pageYOffset"in window)return{scrollTop:pageYOffset,scrollLeft:pageXOffset};var t=document,e=t.documentElement,n=t.body;return{scrollTop:e.scrollTop||n.scrollTop||0,scrollLeft:e.scrollLeft||n.scrollLeft||0}}function o(t,e){return t===window||t===document.querySelector("body")?"clientWidth"===e?window.innerWidth:window.innerHeight:t[e]}var r=function(){function t(t,e,n,l,i){var r,a=this;this._element=t,this._viewContainer=e,this._templateRef=n,this._renderer=l,this._ngZone=i,this._originalCollection=[],this._slicedCollection=[],this.tagName="div",this.__horizontal=!1,this.vsOffsetBefore=0,this.vsOffsetAfter=0,this.vsExcess=2,this.updateInnerCollection=function(){var t,e,n,l,i=(t=window,e=a.scrollPos,t===window?s()[e]:t[e]),r=o(a.scrollParent,a.clientSize),u=a.parent===a.scrollParent?0:(n=a.scrollParent,l=a.__horizontal,a.parent.getBoundingClientRect()[l?"left":"top"]-(n===window?0:n.getBoundingClientRect()[l?"left":"top"])+(n===window?s():n)[l?"scrollLeft":"scrollTop"]),c=a.startIndex,h=a.endIndex;if(void 0!==a.vsSize){for(c=0;a.sizesCumulative[c]<i-a.vsOffsetBefore;)c++;for(c>0&&c--,h=c=Math.max(Math.floor(c-a.vsExcess/2),0);a.sizesCumulative[h]<i-a.vsOffsetBefore+r;)h++;h=Math.min(Math.ceil(h+a.vsExcess/2),a.originalLength)}else c=Math.max(Math.floor((i-a.vsOffsetBefore-u)/a.elementSize)-a.vsExcess/2,0),h=Math.min(c+Math.ceil(r/a.elementSize)+a.vsExcess,a.originalLength);a._minStartIndex=Math.min(c,a._minStartIndex),a._maxEndIndex=Math.max(h,a._maxEndIndex),a.startIndex=a.__options.latch?a._minStartIndex:c,a.endIndex=a.__options.latch?a._maxEndIndex:h;var d=!1;if(null==a._prevStartIndex?d=!0:null==a._prevEndIndex&&(d=!0),d||(a.__options.hunked?Math.abs(a.startIndex-a._prevStartIndex)>=a.vsExcess/2||0===a.startIndex&&0!==a._prevStartIndex?d=!0:(Math.abs(a.endIndex-a._prevEndIndex)>=a.vsExcess/2||a.endIndex===a.originalLength&&a._prevEndIndex!==a.originalLength)&&(d=!0):d=a.startIndex!==a._prevStartIndex||a.endIndex!==a._prevEndIndex),d){a.slicedCollection=a.originalCollection.slice(a.startIndex,a.endIndex),a.view.context.vsStartIndex=a.startIndex,a._prevStartIndex=a.startIndex,a._prevEndIndex=a.endIndex;var m=a._getOffset(0),f=a._getOffset(a.slicedCollection.length),p=a.totalSize,g=a.__horizontal?"width":"height";a.before.style[g]=m+"px",a.after.style[g]=p-f+"px"}return d},this.onZone=this._ngZone.onStable.subscribe(function(){if(a.scrollParent){var t=o(a.scrollParent,a.clientSize);t!==r?(r=t,a._ngZone.run(function(){a.refresh()})):r=t}})}return Object.defineProperty(t.prototype,"originalCollection",{get:function(){return this._originalCollection},set:function(t){this._originalCollection=t||[],this.scrollParent?this.refresh():this.postDigest(this.refresh.bind(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slicedCollection",{get:function(){return this._slicedCollection},set:function(t){this._slicedCollection=t,this.view.context.vsCollection=this._slicedCollection},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){this.scrollParent?this.refresh():this.postDigest(this.refresh.bind(this))},t.prototype.postDigest=function(t){var e=this._ngZone.onStable.subscribe(function(){t(),e.unsubscribe()})},t.prototype.initPlaceholders=function(){this.before=document.createElement(this.tagName),this.before.className="vsFor-before",this.after=document.createElement(this.tagName),this.after.className="vsFor-after",this.parent.insertBefore(this.before,this.parent.childNodes[0]),this.parent.appendChild(this.after),this.__horizontal?(this.before.style.height="100%",this.after.style.height="100%"):(this.before.style.width="100%",this.after.style.width="100%")},t.prototype.ngOnInit=function(){var t=this;this.view=this._viewContainer.createEmbeddedView(this._templateRef),this.parent=function(t){if(t.nextElementSibling)return t.nextElementSibling;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}(this._element.nativeElement),this.initPlaceholders(),this.__horizontal=!1,this.__autoSize=!0,this.__options={},this.clientSize=this.__horizontal?"clientWidth":"clientHeight",this.offsetSize=this.__horizontal?"offsetWidth":"offsetHeight",this.scrollPos=this.__horizontal?"scrollLeft":"scrollTop",this.scrollParent=this.vsScrollParent?function(t,e){for(;t!==document.documentElement&&null!=t&&!t[i](e);)t=t.parentNode;return t&&t[i](e)?t:null}(this.parent,this.vsScrollParent):this.parent,this.elementSize=o(this.scrollParent,this.clientSize)||50,this.totalSize=0,void 0!==this.vsSize&&(this.sizesCumulative=[]),this.startIndex=0,this.endIndex=0,document.addEventListener("scroll",this.updateInnerCollection),this.onWindowResize=function(){t.vsAutoresize?(t.__autoSize=!0,t._ngZone.run(function(){t.setAutoSize()})):t._ngZone.run(function(){t.updateInnerCollection()})},window.addEventListener("resize",this.onWindowResize)},t.prototype.ngOnDestroy=function(){window.removeEventListener("resize",this.onWindowResize),this.onZone&&this.onZone.unsubscribe(),document.removeEventListener("scroll",this.updateInnerCollection)},t.prototype.refresh=function(){var t=this;if(!this.originalCollection||this.originalCollection.length<1)this.slicedCollection=[],this.originalLength=0,this.updateTotalSize(0),this.sizesCumulative=[0];else if(this.originalLength=this.originalCollection.length,void 0!==this.vsSize){this.sizes=this.originalCollection.map(function(e,n){return"function"==typeof t.vsSize?t.vsSize(e,n):+t.vsSize});var e=0;this.sizesCumulative=this.sizes.map(function(t){var n=e;return e+=t,n}),this.sizesCumulative.push(e)}else this.__autoSize=!0,this.postDigest(this.setAutoSize.bind(this));this.reinitialize()},t.prototype.updateTotalSize=function(t){this.totalSize=this.vsOffsetBefore+t+this.vsOffsetAfter},t.prototype.reinitialize=function(){this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._minStartIndex=this.originalLength,this._maxEndIndex=0,this.updateTotalSize(void 0!==this.vsSize?this.sizesCumulative[this.originalLength]:this.elementSize*this.originalLength),this.updateInnerCollection()},t.prototype.setAutoSize=function(){var t=this;if(void 0!==this.vsSize)this._ngZone.run(function(){t.refresh()});else if(this.__autoSize){var e=!1;if(this.parent.offsetHeight||this.parent.offsetWidth){var n=this.parent.children[1];n[this.offsetSize]&&(e=!0,this.elementSize=n[this.offsetSize])}e&&(this.__autoSize=!1,this._ngZone.run(function(){t.reinitialize()}))}},t.prototype._getOffset=function(t){return void 0!==this.vsSize?this.sizesCumulative[t+this.startIndex]+this.vsOffsetBefore:(t+this.startIndex)*this.elementSize+this.vsOffsetBefore},t}()},Z3YK:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return d});var l=n("CcnG"),i=n("Ip0R"),s=n("cpgm"),o=(n("Oz9T"),n("ufXC"),l.mb({encapsulation:2,styles:[],data:{}}));function r(t){return l.Hb(0,[(t()(),l.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.ob(1,0,null,null,0,"span",[["class","glyph glyph-pause"]],null,null,null,null,null))],null,null)}function a(t){return l.Hb(0,[(t()(),l.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.ob(1,0,null,null,0,"span",[["class","glyph glyph-play"]],null,null,null,null,null))],null,null)}function u(t){return l.Hb(0,[(t()(),l.ob(0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),l.ob(1,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),l.Fb(2,null,["",""]))],null,function(t,e){t(e,2,0,e.parent.context.$implicit.type)})}function c(t){return l.Hb(0,[(t()(),l.ob(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),l.ob(1,0,null,null,2,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),l.Fb(2,null,[""," \xa0"])),l.Bb(3,1)],null,function(t,e){var n=l.Gb(e,2,0,t(e,3,0,l.yb(e.parent.parent,0),e.parent.context.$implicit.position));t(e,2,0,n)})}function h(t){return l.Hb(0,[(t()(),l.ob(0,0,null,null,20,"li",[["class","list-group-item row"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.select(t.context.$implicit)&&l),l},null,null)),l.Cb(512,null,i.u,i.v,[l.s,l.t,l.k,l.D]),l.nb(2,278528,null,0,i.i,[i.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Ab(3,{active:0}),(t()(),l.ob(4,0,null,null,8,"div",[["class","col-8 col-md-10 track-info"]],null,null,null,null,null)),(t()(),l.eb(16777216,null,null,1,null,r)),l.nb(6,16384,null,0,i.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(t()(),l.eb(16777216,null,null,1,null,a)),l.nb(8,16384,null,0,i.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(t()(),l.Fb(9,null,[""," "])),(t()(),l.ob(10,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),l.ob(11,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),l.Fb(12,null,[" "," \u2022 "," "])),(t()(),l.ob(13,0,null,null,7,"div",[["class","col text-right"]],null,null,null,null,null)),(t()(),l.Fb(14,null,[" "," "])),l.Bb(15,1),(t()(),l.ob(16,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),l.eb(16777216,null,null,1,null,u)),l.nb(18,16384,null,0,i.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(t()(),l.eb(16777216,null,null,1,null,c)),l.nb(20,16384,null,0,i.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=t(e,3,0,e.context.$implicit.isPlaying||e.context.$implicit.isPaused);t(e,2,0,"list-group-item row",n),t(e,6,0,!e.context.$implicit.isPlaying&&e.context.$implicit.isPaused),t(e,8,0,e.context.$implicit.isPlaying&&!e.context.$implicit.isPaused),t(e,18,0,!e.context.$implicit.isPlaying),t(e,20,0,e.context.$implicit.isPlaying)},function(t,e){t(e,9,0,e.context.$implicit.title),t(e,12,0,e.context.$implicit.trackArtist,e.context.$implicit.album.name);var n=l.Gb(e,14,0,t(e,15,0,l.yb(e.parent,0),e.context.$implicit.duration));t(e,14,0,n)})}function d(t){return l.Hb(0,[l.zb(0,s.a,[]),(t()(),l.ob(1,0,null,null,2,"ol",[["class","list-group list-tracks"]],null,null,null,null,null)),(t()(),l.eb(16777216,null,null,1,null,h)),l.nb(3,278528,null,0,i.j,[l.O,l.L,l.s],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,3,0,e.component.playlist.tracks)},null)}},Z8Ug:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c});var l=n("CcnG"),i=n("xOws"),s=n("t/Na"),o=n("0/mZ"),r=n("Ip0R"),a=(n("UrAU"),n("ZYCi"),l.mb({encapsulation:2,styles:[],data:{}}));function u(t){return l.Hb(0,[(t()(),l.ob(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Fb(1,null,["Year: ",""]))],null,function(t,e){t(e,1,0,e.component.album.year)})}function c(t){return l.Hb(0,[l.Db(402653184,1,{backgroundArtDirective:0}),(t()(),l.ob(1,0,null,null,8,"div",[["class","panel-background"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==t.component.select()&&l),l},null,null)),l.Cb(512,null,i.a,i.a,[s.c]),l.nb(3,16384,[[1,4]],0,o.a,[l.k,i.a],{media:[0,"media"]},null),(t()(),l.ob(4,0,null,null,5,"div",[["class","panel-info color-type-primary-alt"]],null,null,null,null,null)),(t()(),l.ob(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),l.Fb(6,null,["",""])),(t()(),l.ob(7,0,null,null,2,"span",[["class","small muted"]],null,null,null,null,null)),(t()(),l.eb(16777216,null,null,1,null,u)),l.nb(9,16384,null,0,r.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,n.album),t(e,9,0,0!==n.album.year)},function(t,e){t(e,6,0,e.component.album.name)})}},cpgm:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var l=function(){function t(){}return t.prototype.transform=function(t,e){var n="",l=Math.floor(t/1e3),i=Math.floor(l/60);l%=60;var s=Math.floor(i/60);i%=60;var o=Math.floor(s/24);return o>0&&(n+=o+" days,"),(s%=24)>0&&(n+=this.prefixZero(s)+":"),n+(this.prefixZero(i)+":")+this.prefixZero(l)},t.prototype.prefixZero=function(t){return t<10?"0"+t.toString():t.toString()},t}()},xOws:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var l=n("XWo6"),i=function(){function t(t){this.http=t,this.lastFMImageRetriever=new l.a(t)}return t.prototype.getMediaArt=function(t){var e=this.extractInfo(t);return this.lastFMImageRetriever.getMediaArt(e.artist,e.album,e.type)},t.prototype.getMediaArtFromLastFm=function(t){var e=this.extractInfo(t);return this.lastFMImageRetriever.getMediaArt(e.artist,e.album,e.type)},t.prototype.returnImageUrlFromLastFMResponse=function(t){return t.album?t.album.image[t.album.image.length-1]["#text"]:t.artist?t.artist.image[t.artist.image.length-1]["#text"]:t},t.prototype.extractInfo=function(t){var e="",n="",l="artist";return t.trackArtist&&t.album.artist.isCollection?e=t.trackArtist:t.artist?(e=t.artist.albumArtist||t.artist.name,n=t.name||t.album.name,l="album"):e=t.albumArtist||t.name,{artist:e,album:n,type:l}},t}()}}]);