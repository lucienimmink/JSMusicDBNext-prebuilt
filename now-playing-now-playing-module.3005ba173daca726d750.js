(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{YxDV:function(t,e,i){"use strict";i.r(e);var n=i("Valr"),o=i("TYT/"),s=i("QJY3"),r=i("hDf6"),a=i("DUip"),c=i("XlPw"),u=i("ufXC"),l=i("1gFc"),d=i("0/mZ"),p=i("ktVm"),g=i("t083"),h=i("XtVx"),b=i("cUzu"),m=i("Oz9T"),v=i("cpgm"),y=["class","container-fluid animated-page","id","nowPlaying",3,"ngClass",4,"ngIf"],f=["class","animated-page",4,"ngIf"],k=["id","nowPlaying",1,"container-fluid","animated-page",3,"ngClass"],T=[1,"top"],S=["class","image-wrapper",4,"ngIf"],w=[1,"control-wrapper-wrapper"],I=[1,"row","controls-wrapper"],P=["class","progress",4,"ngIf"],E=["id","progress-pusher",4,"ngIf"],R=["class","time start",4,"ngIf"],L=["class","time stop",4,"ngIf"],M=[1,"track-info"],D=[3,"click"],V=[1,"hidden-xs","color-type-secondary"],B=[1,"row","icons"],x=[1,"col-12"],C=[1,"btn","btn-link",3,"click"],Q=[1,"glyph","glyph-previous"],Z=["class","glyph glyph-pause",4,"ngIf"],A=["class","glyph glyph-play",4,"ngIf"],G=[1,"glyph","glyph-next"],N=["class","btn btn-link btn-love",3,"ngClass","click",4,"ngIf"],q=[1,"btn","btn-link","btn-volume","d-none","d-md-inline",3,"disabled","click"],F=[1,"glyph",3,"ngClass"],O=[1,"btn","btn-link","d-none","d-md-inline","btn-shuffle",3,"ngClass","click"],W=[1,"glyph","glyph-shuffle"],X=[1,"volume-control",3,"hidden"],j=["type","range","min","0","max","100",3,"ngModel","ngModelChange","input","change"],H=[1,"btn","btn-link","btn-updown",3,"click"],U=["id","upordown",1,"glyph","glyph-chevron-up"],J=[1,"bottom"],Y=[1,"container"],z=[1,"row"],$=[3,"playlist"],K=[1,"image-wrapper"],_=[4,"ngIf"],tt=[1,"current-album-art","always-replace",3,"mdb-BackgroundArt","swipeleft","swiperight"],et=[1,"previous-album-art",3,"swipeleft","swiperight"];function it(t,e){1&t&&o.Qb(0,"canvas")}function nt(t,e){if(1&t){var i=o.Ub();o.Tb(0,"div",K),o.Ec(1,it,1,0,"canvas",_),o.Tb(2,"div",tt),o.Zb("swipeleft",function(t){return o.vc(i),o.ec(2).next()}),o.Zb("swiperight",function(t){return o.vc(i),o.ec(2).prev()}),o.Rb(),o.Tb(3,"div",et),o.Zb("swipeleft",function(t){return o.vc(i),o.ec(2).next()}),o.Zb("swiperight",function(t){return o.vc(i),o.ec(2).prev()}),o.Rb(),o.Rb()}if(2&t){var n=o.ec(2);o.yc(1),o.kc("ngIf",n.showVisualisation),o.yc(2),o.kc("mdb-BackgroundArt",n.track)}}var ot=[1,"progress"],st=["role","progressbar",1,"progress-bar","buffered-bar",3,"ngStyle"],rt=[1,"progress-bar",3,"ngStyle"],at=["id","position-indicator",3,"ngStyle","ngClass"],ct=function(t){return{width:t}},ut=function(t){return{"margin-left":t}},lt=function(t){return{dragging:t}};function dt(t,e){if(1&t&&(o.Tb(0,"div",ot),o.Qb(1,"div",st),o.Qb(2,"div",rt),o.Qb(3,"div",at),o.Rb()),2&t){var i=o.ec(2);o.yc(1),o.kc("ngStyle",o.nc(4,ct,i.round(i.track.buffered.end/i.track.duration*100)+"%")),o.yc(2),o.kc("ngStyle",o.nc(6,ct,i.track.position/i.track.duration*100+"%")),o.yc(3),o.kc("ngStyle",o.nc(8,ut,i.track.position/i.track.duration*100+"%")),o.kc("ngClass",o.nc(10,lt,i.isDragging))}}var pt=["id","progress-pusher"];function gt(t,e){1&t&&o.Qb(0,"div",pt)}var ht=[1,"time","start"];function bt(t,e){if(1&t&&(o.Tb(0,"span",ht),o.Gc(1),o.fc(2,"timeFormat"),o.Rb()),2&t){var i=o.ec(2);o.yc(1),o.Hc(o.gc(2,1,i.track.position))}}var mt=[1,"time","stop"];function vt(t,e){if(1&t&&(o.Tb(0,"span",mt),o.Gc(1),o.fc(2,"timeFormat"),o.Rb()),2&t){var i=o.ec(2);o.yc(1),o.Hc(o.gc(2,1,i.track.duration))}}var yt=[1,"glyph","glyph-pause"];function ft(t,e){1&t&&o.Qb(0,"i",yt)}var kt=[1,"glyph","glyph-play"];function Tt(t,e){1&t&&o.Qb(0,"i",kt)}var St=[1,"btn","btn-link","btn-love",3,"ngClass","click"],wt=[1,"glyph","glyph-star-outline"],It=function(t){return{active:t}};function Pt(t,e){if(1&t){var i=o.Ub();o.Tb(0,"button",St),o.Zb("click",function(t){return o.vc(i),o.ec(2).toggleLoved()}),o.Qb(1,"i",wt),o.Rb()}if(2&t){var n=o.ec(2);o.kc("ngClass",o.nc(1,It,n.track.isLoved))}}var Et=function(t,e,i){return{slided:t,"small-art":e,"no-focus":i}},Rt=function(t,e){return{"glyph-volume":t,"glyph-mute":e}};function Lt(t,e){if(1&t){var i=o.Ub();o.Tb(0,"div",k),o.Tb(1,"div",T),o.Ec(2,nt,4,2,"div",S),o.Tb(3,"div",w),o.Tb(4,"div",I),o.Ec(5,dt,4,12,"div",P),o.Ec(6,gt,1,0,"div",E),o.Ec(7,bt,3,3,"span",R),o.Ec(8,vt,3,3,"span",L),o.Tb(9,"div",M),o.Tb(10,"h4"),o.Gc(11),o.Rb(),o.Tb(12,"h5"),o.Tb(13,"a",D),o.Zb("click",function(t){return o.vc(i),o.ec().navigateToArtist()}),o.Gc(14),o.Rb(),o.Tb(15,"span",V),o.Gc(16," \u2022 "),o.Tb(17,"a",D),o.Zb("click",function(t){return o.vc(i),o.ec().navigateToAlbum()}),o.Gc(18),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Tb(19,"div",B),o.Tb(20,"div",x),o.Tb(21,"button",C),o.Zb("click",function(t){return o.vc(i),o.ec().prev()}),o.Qb(22,"i",Q),o.Rb(),o.Tb(23,"button",C),o.Zb("click",function(t){return o.vc(i),o.ec().togglePlayPause()}),o.Ec(24,ft,1,0,"i",Z),o.Ec(25,Tt,1,0,"i",A),o.Rb(),o.Tb(26,"button",C),o.Zb("click",function(t){return o.vc(i),o.ec().next()}),o.Qb(27,"i",G),o.Rb(),o.Ec(28,Pt,2,3,"button",N),o.Tb(29,"button",q),o.Zb("click",function(t){return o.vc(i),o.ec().toggleVolumeWindow(t)}),o.Qb(30,"span",F),o.Rb(),o.Tb(31,"button",O),o.Zb("click",function(t){return o.vc(i),o.ec().toggleShuffle()}),o.Qb(32,"i",W),o.Rb(),o.Rb(),o.Tb(33,"div",X),o.Tb(34,"input",j),o.Zb("ngModelChange",function(t){return o.vc(i),o.ec().volume=t}),o.Zb("input",function(t){return o.vc(i),o.ec().setVolume()}),o.Zb("change",function(t){return o.vc(i),o.ec().setVolume()}),o.Rb(),o.Rb(),o.Tb(35,"div",x),o.Tb(36,"button",H),o.Zb("click",function(t){return o.vc(i),o.ec().toggleSlide()}),o.Qb(37,"i",U),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Tb(38,"div",J),o.Tb(39,"div",Y),o.Tb(40,"div",z),o.Tb(41,"div",x),o.Qb(42,"mdb-tracklist",$),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()}if(2&t){var n=o.ec();o.kc("ngClass",o.pc(18,Et,n.slided,n.smallArt,n.noFocus)),o.yc(2),o.kc("ngIf",!n.videoMode),o.yc(5),o.kc("ngIf",!n.videoMode),o.yc(6),o.kc("ngIf",!n.videoMode),o.yc(7),o.kc("ngIf",!n.videoMode),o.yc(8),o.kc("ngIf",!n.videoMode),o.yc(11),o.Hc(n.track.title),o.yc(14),o.Hc(n.track.trackArtist),o.yc(18),o.Hc(n.track.album.name),o.yc(24),o.kc("ngIf",n.isPlaying),o.yc(25),o.kc("ngIf",n.isPaused),o.yc(28),o.kc("ngIf","mdb-skipped"!==n.lastfmusername),o.yc(29),o.kc("disabled",n.videoMode),o.yc(30),o.kc("ngClass",o.oc(22,Rt,n.volume>0,0==n.volume)),o.yc(31),o.kc("ngClass",o.nc(25,It,n.isShuffled)),o.yc(33),o.kc("hidden",!n.showVolumeWindow),o.yc(34),o.kc("ngModel",n.volume),o.yc(42),o.kc("playlist",n.playlist)}}var Mt=[1,"animated-page"],Dt=[1,"jumbotron","theme-light"],Vt=[1,"row","albumdetail"],Bt=["routerLink","/artists"],xt=[1,"glyph","glyph-people"],Ct=["routerLink","/albums"],Qt=[1,"glyph","glyph-music-album"],Zt=["routerLink","/playlists"],At=[1,"glyph","glyph-music-info"];function Gt(t,e){1&t&&(o.Tb(0,"div",Mt),o.Tb(1,"div",Dt),o.Tb(2,"div",Y),o.Tb(3,"div",Vt),o.Tb(4,"div",x),o.Tb(5,"h3"),o.Gc(6,"Nothing is playing"),o.Rb(),o.Tb(7,"p"),o.Gc(8," This is where you'll see the song you're playing and songs that are coming up. "),o.Rb(),o.Tb(9,"p"),o.Gc(10," Find an "),o.Tb(11,"a",Bt),o.Qb(12,"span",xt),o.Gc(13," artist"),o.Rb(),o.Gc(14," or "),o.Tb(15,"a",Ct),o.Qb(16,"span",Qt),o.Gc(17," album"),o.Rb(),o.Gc(18," that you want to play; or setup a "),o.Tb(19,"a",Zt),o.Qb(20,"span",At),o.Gc(21," playlist"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb())}var Nt=[{path:"",component:function(){function t(t,e,i,n,o,s,r){var a=this;this.pathService=t,this.coreService=e,this.playerService=i,this.router=n,this.lastFMService=o,this.animationService=s,this.http=r,this.previousTrack={},this.slided=!1,this.isPlaying=!1,this.isPaused=!1,this.isShuffled=!1,this.isDragging=!1,this.c=this,this.lastfmusername="",this.showVolumeWindow=!1,this.volume=100,this.showVisualisation=this.booleanState("visualisation-state"),this.preferVideo=this.booleanState("preferVideo-state"),this.smallArt=this.booleanState("small-art"),this.videoMode=!1,this.isEventBound=!1,this.noFocus=!1,this.timeoutTimer=null,this.timeoutTime=5e3,this.startDrag=function(t){a.isDragging=!0},this.drag=function(t){if(a.isDragging){var e=((t.clientX||t.changedTouches[0].clientX)-60)/document.getElementById("progress-pusher").clientWidth;e>=0&&e<=1&&a.setIndicatorPosition(e)}},this.stopDrag=function(t){if(a.isDragging){a.isDragging=!1;var e=((t.clientX||t.changedTouches[0].clientX)-60)/document.getElementById("progress-pusher").clientWidth;a.playerService.setPosition(a.track.duration/1e3*e)}};var c=this.playerService.getCurrentPlaylist();c&&(this.playlist=c.playlist,this.trackIndex=c.startIndex,this.isPaused=c.isPaused,this.isPlaying=c.isPlaying,this.isShuffled=c.isShuffled,this.volume=this.playerService.getVolume(),this.setTrack()),this.subscription=this.playerService.playlistAnnounced$.subscribe(function(t){a.playlist=t.playlist,a.trackIndex=t.startIndex,a.isPaused=t.isPaused,a.isPlaying=t.isPlaying,a.isShuffled=t.isShuffled,a.setTrack()}),this.subscription2=this.playerService.volumeAnnounced.subscribe(function(t){a.volume=t}),this.subscription3=this.playerService.hideVolumeWindowAnnounced$.subscribe(function(){a.showVolumeWindow=!1}),this.pathService.announcePage("Now playing"),"ontouchstart"in document.documentElement?(document.getElementsByTagName("body")[0].addEventListener("touchmove",this.drag),document.getElementsByTagName("body")[0].addEventListener("touchend",this.stopDrag)):(document.getElementsByTagName("body")[0].addEventListener("mousemove",this.drag),document.getElementsByTagName("body")[0].addEventListener("mouseup",this.stopDrag)),this.timeoutTimer=setTimeout(function(){a.onTimeout()},this.timeoutTime)}return t.prototype.ngOnInit=function(){var t=this;setTimeout(function(){t.track&&("ontouchstart"in document.documentElement?document.getElementById("progress-pusher").addEventListener("touchstart",t.startDrag):document.getElementById("progress-pusher").addEventListener("mousedown",t.startDrag),t.isEventBound=!0)},250),this.lastfmusername=localStorage.getItem("lastfm-username")||""},t.prototype.setTrack=function(){var t=this;setTimeout(function(){t.albumart&&t.albumart.loadImage()}),this.track=this.playlist.tracks[this.trackIndex],this.currentTrack!==this.track&&(this.currentTrack=this.track,this.animationService.requestAnimation("enter",document.querySelector(".controls-wrapper h4")),this.animationService.requestAnimation("enter",document.querySelector(".controls-wrapper h5"))),this.isEventBound||setTimeout(function(){try{"ontouchstart"in document.documentElement?document.getElementById("progress-pusher").addEventListener("touchstart",t.startDrag):document.getElementById("progress-pusher").addEventListener("mousedown",t.startDrag),t.isEventBound=!0}catch(e){console.error(e)}},250)},t.prototype.toggleSlide=function(){this.slided=!this.slided},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe(),this.subscription3.unsubscribe(),"ontouchstart"in document.documentElement?(document.getElementsByTagName("body")[0].removeEventListener("touchmove",this.drag),document.getElementsByTagName("body")[0].removeEventListener("touchend",this.stopDrag)):(document.getElementsByTagName("body")[0].removeEventListener("mousemove",this.drag),document.getElementsByTagName("body")[0].removeEventListener("mouseup",this.stopDrag)),clearTimeout(this.timeoutTime)},t.prototype.navigateToArtist=function(){this.router.navigate(["/letter",this.track.album.artist.letter.escapedLetter,"artist",this.track.album.artist.sortName])},t.prototype.navigateToAlbum=function(){this.router.navigate(["/letter",this.track.album.artist.letter.escapedLetter,"artist",this.track.album.artist.sortName,"album",this.track.album.sortName])},t.prototype.next=function(){var t=this;this.videoMode&&this.playerService.resume(),this.videoMode=!1,setTimeout(function(){var e=document.querySelector(".previous-album-art");e.style.backgroundImage=document.querySelector(".current-album-art").style.backgroundImage,e.classList.remove("slideRightOut"),e.classList.remove("slideLeftOut"),t.animationService.requestAnimation("slideLeftOut",e,!1),t.trackIndex<t.playlist.tracks.length-1?(t.trackIndex++,t.playerService.next()):t.playlist.isContinues?(t.trackIndex=0,"random"===t.playlist.type||"radio"===t.playlist.type?t.playerService.nextPlaylist(t.playlist.type):t.playerService.nextAlbum(t.track.album)):t.playerService.stop()})},t.prototype.prev=function(){var t=this;this.videoMode&&this.playerService.resume(),this.videoMode=!1,setTimeout(function(){var e=document.querySelector(".previous-album-art");e.style.backgroundImage=document.querySelector(".current-album-art").style.backgroundImage,e.classList.remove("slideRightOut"),e.classList.remove("slideLeftOut"),t.animationService.requestAnimation("slideRightOut",e,!1),t.trackIndex>0&&(t.trackIndex--,t.playerService.prev())})},t.prototype.togglePlayPause=function(){this.videoMode?this.isPlaying?(this.player.pauseVideo(),this.isPlaying=!1,this.isPaused=!0):(this.player.playVideo(),this.isPlaying=!0,this.isPaused=!1):this.playerService.togglePlayPause()},t.prototype.toggleShuffle=function(){this.isShuffled=!this.isShuffled,this.playerService.shufflePlaylist(this.isShuffled)},t.prototype.toggleLoved=function(){this.track.isLoved=!this.track.isLoved,this.lastFMService.toggleLoved(this.track).subscribe(function(t){console.info(t)})},t.prototype.setIndicatorPosition=function(t){document.getElementById("position-indicator").style.marginLeft=100*t+"%"},t.prototype.toggleVolumeWindow=function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),this.showVolumeWindow=!this.showVolumeWindow},t.prototype.setVolume=function(){this.playerService.setVolume(this.volume)},t.prototype.round=function(t){return Math.floor(t)},t.prototype.handleError=function(t){return Object(c.a)("no video")},t.prototype.toggleVideo=function(){this.videoMode=!this.videoMode,this.videoMode?this.playerService.pause():this.playerService.togglePlayPause()},t.prototype.savePlayer=function(t){this.player=t,this.player.playVideo(),this.isPlaying=!0,this.isPaused=!1},t.prototype.onStateChange=function(t){0===t.data&&(this.videoMode=!1,this.next())},t.prototype.onTimeout=function(){this.slided||this.videoMode||(this.noFocus=!0)},t.prototype.onMove=function(t){var e=this;clearTimeout(this.timeoutTimer),this.noFocus=!1,this.timeoutTimer=setTimeout(function(){e.onTimeout()},this.timeoutTime)},t.prototype.booleanState=function(t){var e=localStorage.getItem(t);return!(!e||"true"!==e)},t.ngComponentDef=o.Jb({type:t,selectors:[["ng-component"]],factory:function(e){return new(e||t)(o.Pb(h.a),o.Pb(p.a),o.Pb(u.a),o.Pb(a.c),o.Pb(g.a),o.Pb(l.a),o.Pb(b.a))},viewQuery:function(t,e){var i;1&t&&o.Kc(d.a,!0,null),2&t&&o.sc(i=o.bc())&&(e.albumart=i.first)},hostBindings:function(t,e,i){1&t&&o.Zb("mousemove",function(t){return e.onMove(t)})},consts:2,vars:2,template:function(t,e){1&t&&(o.Ec(0,Lt,43,27,"div",y),o.Ec(1,Gt,22,0,"div",f)),2&t&&(o.kc("ngIf",e.track),o.yc(1),o.kc("ngIf",!e.track))},directives:[n.l,n.j,s.l,s.a,s.f,s.i,m.a,d.a,n.m,a.d],pipes:[v.a],encapsulation:2}),t}()}],qt=function(){function t(){}return t.ngModuleDef=o.Nb({type:t}),t.ngInjectorDef=o.Mb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(Nt)],a.e]}),t.ngLocaleIdDef="en-GB",t}();a.e.forChild(Nt),i.d(e,"NowPlayingModule",function(){return Ft});var Ft=function(){function t(){}return t.ngModuleDef=o.Nb({type:t}),t.ngInjectorDef=o.Mb({factory:function(e){return new(e||t)},imports:[[n.c,qt,r.a,s.b]]}),t.ngLocaleIdDef="en-GB",t}()}}]);