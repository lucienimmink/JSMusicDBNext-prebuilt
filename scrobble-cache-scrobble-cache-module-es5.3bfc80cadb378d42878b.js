function _classCallCheck(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(c,n.key,n)}}function _createClass(c,t,i){return t&&_defineProperties(c.prototype,t),i&&_defineProperties(c,i),c}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BSpc:function(c,t,i){"use strict";i.r(t);var n=i("ofXK"),e=i("hDf6"),b=i("tyNb"),a=i("ztCj"),s=i("MDLy"),o=i("ktVm"),r=i("t083"),l=i("XtVx"),u=i("fXoL");function m(c,t){if(1&c){var i=u.Pb();u.Ob(0,"li",10),u.Ob(1,"div",2),u.Ob(2,"div",11),u.zc(3),u.Nb(),u.Ob(4,"div",12),u.Ob(5,"span",13),u.zc(6),u.Nb(),u.Nb(),u.Ob(7,"div",14),u.zc(8),u.Nb(),u.Ob(9,"div",15),u.Ob(10,"span",13),u.zc(11),u.bc(12,"date"),u.bc(13,"date"),u.Nb(),u.Nb(),u.Ob(14,"div",16),u.Ob(15,"a",17),u.Wb("click",(function(c){u.rc(i);var n=t.$implicit;return u.ac(2).removeFromScrobbleList(n)})),u.Nb(),u.Nb(),u.Nb(),u.Nb()}if(2&c){var n=t.$implicit;u.zb(3),u.Bc(" ",n.artist," "),u.zb(3),u.Ac(n.album),u.zb(2),u.Bc(" ",n.track," "),u.zb(3),u.Cc("",u.dc(12,5,1e3*n.timestamp,"mediumDate")," ",u.dc(13,8,1e3*n.timestamp,"shortTime"),"")}}function f(c,t){if(1&c){var i=u.Pb();u.Ob(0,"button",18),u.Wb("click",(function(c){return u.rc(i),u.ac(2).scrobbleNow()})),u.zc(1,"Scrobble now"),u.Nb()}}function h(c,t){if(1&c){var i=u.Pb();u.Ob(0,"div",4),u.Ob(1,"h4"),u.zc(2," Tracks in scrobble cache "),u.Ob(3,"span",5),u.zc(4),u.Nb(),u.Ob(5,"a",6),u.Wb("click",(function(c){return u.rc(i),u.ac().scrobbleNow()})),u.zc(6,"Scrobble now"),u.Nb(),u.Nb(),u.Ob(7,"ol",7),u.xc(8,m,16,11,"li",8),u.Nb(),u.xc(9,f,2,0,"button",9),u.Nb()}if(2&c){var n=u.ac();u.zb(4),u.Bc("(",n.manualScrobblingList.length,")"),u.zb(4),u.gc("ngForOf",n.manualScrobblingList),u.zb(1),u.gc("ngIf",n.manualScrobblingList.length>0&&!n.isBusy)}}var p,v,g=[{path:"",component:(p=function(){function c(t,i,n,e,b){var s=this;_classCallCheck(this,c),this.pathService=t,this.coreService=i,this.lastFMService=n,this.collectionService=e,this.router=b,this.manualScrobbling=this.booleanState("manual-scrobble-state"),this.isReloading=!1,this.isBusy=!1,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(c){s.ngOnInit()})),this.subscription2=this.lastFMService.manualScrobbleList$.subscribe((function(c){s.manualScrobblingList=c})),Object(a.c)("manual-scrobble-list").then((function(c){s.manualScrobblingList=c||[]}))}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.pathService.announcePage("Scrobble cache"),Object(a.c)("manual-scrobble-list").then((function(t){c.manualScrobblingList=t||[]}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}},{key:"scrobbleNow",value:function(){var c=this;this.isBusy=!0,Object(a.c)("manual-scrobble-list").then((function(t){c.manualScrobblingList=t||[];var i=c.manualScrobblingList.pop();c.lastFMService.scrobbleCachedTrack(i).subscribe((function(t){Object(a.d)("manual-scrobble-list",c.manualScrobblingList),c.lastFMService.updateManualScrobbleList(),c.manualScrobblingList.length>0?c.scrobbleNow():c.isBusy=!1}))}))}},{key:"removeFromScrobbleList",value:function(c){var t=this;Object(a.c)("manual-scrobble-list").then((function(i){t.manualScrobblingList=i||[];var n=-1;t.manualScrobblingList.forEach((function(t,i){Object.is(t,c)&&(n=i)})),t.manualScrobblingList.splice(n,1),Object(a.d)("manual-scrobble-list",t.manualScrobblingList)}))}},{key:"booleanState",value:function(c){var t=localStorage.getItem(c);return!(!t||"true"!==t)}}]),c}(),p.\u0275fac=function(c){return new(c||p)(u.Lb(l.a),u.Lb(o.a),u.Lb(r.a),u.Lb(s.a),u.Lb(b.c))},p.\u0275cmp=u.Fb({type:p,selectors:[["app-scrobble-cache"]],decls:4,vars:1,consts:[[1,"animated-page"],[1,"container"],[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"small","muted","color-type-secondary"],[1,"float-right","d-none","d-sm-inline",3,"click"],[1,"list-items","list-tracks"],["class","list-items-row list-tracks-no-hover",4,"ngFor","ngForOf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"list-items-row","list-tracks-no-hover"],[1,"col-4","col-sm-3"],[1,"col-4","col-sm-3","d-none","d-sm-block"],[1,"small","muted"],[1,"col-8","col-sm-3"],[1,"col-6","col-sm-2"],[1,"col-6","col-sm-1","text-right"],[1,"glyph","glyph-delete",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(c,t){1&c&&(u.Ob(0,"div",0),u.Ob(1,"div",1),u.Ob(2,"div",2),u.xc(3,h,10,3,"div",3),u.Nb(),u.Nb(),u.Nb()),2&c&&(u.zb(3),u.gc("ngIf",t.manualScrobblingList&&t.manualScrobbling))},directives:[n.l,n.k],pipes:[n.e],encapsulation:2}),p)}],d=((v=function c(){_classCallCheck(this,c)}).\u0275mod=u.Jb({type:v}),v.\u0275inj=u.Ib({factory:function(c){return new(c||v)},imports:[[b.e.forChild(g)],b.e]}),v);i.d(t,"ScrobbleCacheModule",(function(){return O}));var S,O=((S=function c(){_classCallCheck(this,c)}).\u0275mod=u.Jb({type:S}),S.\u0275inj=u.Ib({factory:function(c){return new(c||S)},imports:[[n.c,d,e.a]]}),S)}}]);