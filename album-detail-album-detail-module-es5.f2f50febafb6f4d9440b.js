function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function _createClass(i,t,a){return t&&_defineProperties(i.prototype,t),a&&_defineProperties(i,a),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{jJnS:function(i,t,a){"use strict";a.r(t);var n=a("ofXK"),s=a("hDf6"),c=a("tyNb"),e=(a("hR/0"),a("KI15")),r=a("ufXC"),l=a("OgP6"),o=a("ktVm"),b=a("XtVx"),u=a("fXoL"),m=a("cpgm");function p(i,t){if(1&i&&(u.Ob(0,"span"),u.zc(1),u.Nb()),2&i){var a=u.ac(2);u.zb(1),u.Bc("",a.album.year," \u2022 ")}}var h=function(i){return{"first-disc":i}};function f(i,t){if(1&i&&(u.Ob(0,"li",22),u.zc(1),u.Nb()),2&i){var a=u.ac().$implicit;u.gc("ngClass",u.jc(2,h,1==a[0].disc)),u.zb(1),u.Bc(" Disc ",a[0].disc," ")}}function g(i,t){if(1&i&&(u.Ob(0,"span"),u.zc(1),u.Nb()),2&i){var a=u.ac().$implicit;u.zb(1),u.Ac(a.number)}}function d(i,t){1&i&&(u.Ob(0,"span"),u.Mb(1,"span",29),u.Nb())}function v(i,t){1&i&&(u.Ob(0,"span"),u.Mb(1,"span",12),u.Nb())}function y(i,t){if(1&i&&(u.Ob(0,"span"),u.Mb(1,"br"),u.Ob(2,"span",27),u.zc(3),u.Nb(),u.Nb()),2&i){var a=u.ac().$implicit;u.zb(3),u.Ac(a.type)}}function O(i,t){if(1&i&&(u.Ob(0,"span"),u.Mb(1,"br"),u.Ob(2,"span",27),u.zc(3),u.bc(4,"timeFormat"),u.Nb(),u.Nb()),2&i){var a=u.ac().$implicit;u.zb(3),u.Bc(" ",u.cc(4,1,a.position)," \xa0 ")}}var N=function(i,t,a){return{active:i,showActions:t,hq:a}};function z(i,t){if(1&i){var a=u.Pb();u.Ob(0,"li",23),u.Ob(1,"div",24),u.Wb("click",(function(i){u.rc(a);var n=t.$implicit;return u.ac(3).onSelect(n,i)})),u.Ob(2,"div",25),u.xc(3,g,2,1,"span",9),u.xc(4,d,2,0,"span",9),u.xc(5,v,2,0,"span",9),u.Nb(),u.Ob(6,"div",26),u.zc(7),u.Mb(8,"br"),u.Ob(9,"span",27),u.zc(10),u.Nb(),u.Nb(),u.Ob(11,"div",28),u.zc(12),u.bc(13,"timeFormat"),u.xc(14,y,4,1,"span",9),u.xc(15,O,5,3,"span",9),u.Nb(),u.Nb(),u.Nb()}if(2&i){var n=t.$implicit,s=u.ac(3);u.gc("ngClass",u.lc(11,N,n.isPlaying||n.isPaused,n.showActions,"flac"===n.type)),u.zb(3),u.gc("ngIf",!n.isPlaying&&!n.isPaused&&0!==n.number),u.zb(1),u.gc("ngIf",!n.isPlaying&&n.isPaused),u.zb(1),u.gc("ngIf",n.isPlaying&&!n.isPaused),u.zb(2),u.Bc(" ",n.title," "),u.zb(3),u.Bc(" ",n.trackArtist," "),u.zb(2),u.Bc(" ",u.cc(13,9,n.duration)," "),u.zb(2),u.gc("ngIf","mixed"===s.album.type&&!n.isPlaying),u.zb(1),u.gc("ngIf",n.isPlaying)}}function k(i,t){if(1&i&&(u.Ob(0,"ol",19),u.xc(1,f,2,4,"li",20),u.xc(2,z,16,15,"li",21),u.Nb()),2&i){var a=t.$implicit,n=u.ac(2);u.zb(1),u.gc("ngIf",n.album.sortedDiscs.length>1),u.zb(1),u.gc("ngForOf",a)}}function w(i,t){1&i&&(u.Ob(0,"div"),u.Mb(1,"br"),u.Ob(2,"div",30),u.Ob(3,"strong"),u.zc(4,"Warning!"),u.Nb(),u.zc(5," This album cannot be played since FLAC support is lacking."),u.Nb(),u.Nb())}var C=function(i){return{shrunk:i}};function S(i,t){if(1&i){var a=u.Pb();u.Ob(0,"div",1),u.Ob(1,"div",2),u.Ob(2,"div",3),u.Ob(3,"div",4),u.Ob(4,"div",5),u.Mb(5,"album-art",6),u.Nb(),u.Ob(6,"div",7),u.Ob(7,"h2"),u.zc(8),u.Nb(),u.Ob(9,"h3",8),u.zc(10),u.Nb(),u.Ob(11,"h4"),u.xc(12,p,2,1,"span",9),u.zc(13),u.Ob(14,"span",10),u.zc(15),u.bc(16,"timeFormat"),u.Nb(),u.Nb(),u.Ob(17,"h5"),u.Ob(18,"button",11),u.Wb("click",(function(){return u.rc(a),u.ac().playAlbum()})),u.Mb(19,"span",12),u.zc(20," Play "),u.Ob(21,"span",13),u.zc(22,"album"),u.Nb(),u.Nb(),u.zc(23,"\xa0\xa0\xa0 "),u.Ob(24,"button",14),u.Wb("click",(function(){return u.rc(a),u.ac().addToQueue()})),u.Mb(25,"span",15),u.zc(26," queue "),u.Ob(27,"span",13),u.zc(28,"album"),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(29,"div",3),u.Ob(30,"div",16),u.Ob(31,"div",17),u.xc(32,k,3,2,"ol",18),u.xc(33,w,6,0,"div",9),u.Nb(),u.Nb(),u.Nb(),u.Nb()}if(2&i){var n=u.ac();u.zb(1),u.gc("ngClass",u.jc(15,C,n.isShrunk)),u.zb(3),u.gc("ngClass",u.jc(17,C,n.isShrunk)),u.zb(1),u.gc("album",n.album.name)("artist",n.album.artist.albumArtist||n.album.artist.name),u.zb(1),u.gc("ngClass",u.jc(19,C,n.isShrunk)),u.zb(2),u.Ac(n.album.name),u.zb(2),u.Bc(" ",n.album.artist.albumArtist||n.album.artist.name," "),u.zb(2),u.gc("ngIf",n.album.year&&0!==n.album.year),u.zb(1),u.Bc(" songs: ",n.album.tracks.length," "),u.zb(2),u.Cc(" \u2022 ",u.cc(16,13,n.totalRunningTime())," \u2022 ",n.album.type,""),u.zb(17),u.gc("ngForOf",n.album.sortedDiscs),u.zb(1),u.gc("ngIf","flac"===n.album.type&&!n.isFlacSupported)}}var P,I,A=[{path:"",component:(P=function(){function i(t,a,n,s,c,e){var r=this;_classCallCheck(this,i),this.coreService=t,this.router=a,this.pathService=n,this.playerService=s,this.route=c,this.configService=e,this.ownPlaylists=[],this.albumName="",this.artistName="",this.isSwiping=!1,this.isShrunk=!1,this.isFlacSupported=!0,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(i){r.ngOnInit()})),this.artistName=decodeURIComponent(this.route.snapshot.params.artist),this.albumName=decodeURIComponent(this.route.snapshot.params.album),this.route.params.subscribe((function(i){r.artistName=decodeURIComponent(i.artist),r.albumName=decodeURIComponent(i.album),r.ngOnInit()})),this.theme=e.mode}return _createClass(i,[{key:"ngOnInit",value:function(){var i=this;if(this.album=this.core.albums[this.artistName+"|"+this.albumName],this.album){this.album.sortedDiscs=[];var t=Object.keys(this.album.discs),a=[];t.forEach((function(i){var t=i.substring(5);a.push({nr:t,id:i})})),(a=a.sort((function(i,t){return i.nr<t.nr?-1:1}))).forEach((function(t){i.album.sortedDiscs.push(i.album.discs[t.id])})),this.pathService.announcePath({artist:this.album.artist,album:this.album,letter:this.album.artist.letter})}if(this.ownPlaylists=[],localStorage.getItem("customlisttest")){var n=JSON.parse(localStorage.getItem("customlisttest"));n&&n.forEach((function(t){var a=new e.a;a.isOwn=!0,a.name=t.name,a.tracks=t.tracks,i.ownPlaylists.push(a)}))}var s=document.querySelector("audio").canPlayType("audio/flac");this.isFlacSupported="probably"===s||"maybe"===s}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSelect",value:function(i,t){this.isSwiping||this.playerService.doPlayAlbum(this.album,this.album.tracks.indexOf(i),!0,!1)}},{key:"playAlbum",value:function(){this.isSwiping||this.playerService.doPlayAlbum(this.album,0,!0,!1)}},{key:"addToQueue",value:function(){this.isSwiping||this.playerService.doQueueAlbum(this.album)}},{key:"navigateToArtist",value:function(i){this.router.navigate(["Artist",{letter:i.letter.escapedLetter,artist:i.sortName}])}},{key:"swipe",value:function(i,t,a){var n=this;a.preventDefault(),this.isSwiping=!0,setTimeout((function(){n.isSwiping=!1}),5),i.showActions=t}},{key:"totalRunningTime",value:function(){var i=0;return this.album.tracks.forEach((function(t){i+=t.duration})),i}},{key:"onScroll",value:function(i){this.isShrunk=window.scrollY>50}}]),i}(),P.\u0275fac=function(i){return new(i||P)(u.Lb(o.a),u.Lb(c.c),u.Lb(b.a),u.Lb(r.a),u.Lb(c.a),u.Lb(l.a))},P.\u0275cmp=u.Fb({type:P,selectors:[["app-album-detail"]],hostBindings:function(i,t){1&i&&u.Wb("scroll",(function(i){return t.onScroll(i)}),!1,u.qc)},decls:1,vars:1,consts:[["class","animated-page",4,"ngIf"],[1,"animated-page"],[1,"jumbotron","theme-light",3,"ngClass"],[1,"container"],[1,"row","albumdetail"],[1,"col-4","col-md-3","col-lg-2",3,"ngClass"],[3,"album","artist"],[1,"col-8","col-md-9","col-lg-10",3,"ngClass"],[1,"d-none","d-sm-block"],[4,"ngIf"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary",3,"click"],[1,"glyph","glyph-play"],[1,"d-none","d-md-inline"],[1,"btn","btn-secondary",3,"click"],[1,"glyph","glyph-music-info"],[1,"row"],[1,"col"],["class","list-group list-tracks",4,"ngFor","ngForOf"],[1,"list-group","list-tracks"],["class","list-items-row disc-row header-seperator",3,"ngClass",4,"ngIf"],["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-items-row","disc-row","header-seperator",3,"ngClass"],[1,"list-group-item",3,"ngClass"],[1,"details","row",3,"click"],[1,"col-2","col-sm-1"],[1,"col-7","col-sm-10"],[1,"small","muted","color-type-secondary"],[1,"col-3","col-sm-1","text-right"],[1,"glyph","glyph-pause"],[1,"alert","alert-warning"]],template:function(i,t){1&i&&u.xc(0,S,34,21,"div",0),2&i&&u.gc("ngIf",t.album)},directives:[n.l,n.j,n.k],pipes:[m.a],encapsulation:2}),P)}],x=((I=function i(){_classCallCheck(this,i)}).\u0275mod=u.Jb({type:I}),I.\u0275inj=u.Ib({factory:function(i){return new(i||I)},imports:[[c.e.forChild(A)],c.e]}),I);a.d(t,"AlbumDetailModule",(function(){return j}));var F,j=((F=function i(){_classCallCheck(this,i)}).\u0275mod=u.Jb({type:F}),F.\u0275inj=u.Ib({factory:function(i){return new(i||F)},imports:[[n.c,x,s.a]]}),F)}}]);