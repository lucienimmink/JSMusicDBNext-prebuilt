(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/mZ":function(t,e,l){"use strict";l.d(e,"a",function(){return n});var i=l("ztCj");l("xOws");class n{constructor(t,e){this.backgroundArtService=e,this.NOIMAGE="global/images/no-cover.png",this.loading=!1,this.loaded=!1,this.error=!1,this.loadingClass="loading",this.loadedClass="loaded",this.errorClass="error",this.el=t.nativeElement,setTimeout(()=>{this.loadImage()},100)}loadImage(){if(!this.loaded&&!this.loading||this.hasClassName("always-replace")){this.loading=!0,this.addClassName(this.loadingClass);let t=`art-${this.media.name}`;this.media.artist&&!this.media.trackArtist?t=`art-${this.media.artist.name}-${this.media.name}`:this.media.trackArtist&&(t=`art-${this.media.trackArtist}-${this.media.album.name}`),Object(i.b)(t).then(t=>{t?this.setImage(t):this.backgroundArtService.getMediaArt(this.media).subscribe(t=>this.setImage(t),t=>{this.el.style.backgroundImage=`url(${this.NOIMAGE})`,this.error=!0,this.loading=!1,this.removeClassName(this.loadingClass),this.addClassName(this.errorClass)})})}}setImage(t){let e=localStorage.getItem("dsm");if(e&&(e+="/data/image-proxy?url="),!this.loaded||this.hasClassName("always-replace")){if(t!==this.NOIMAGE&&""!==t&&t){this.el.style.backgroundImage=(t=this.backgroundArtService.returnImageUrlFromLastFMResponse(t))?`url(${e}${encodeURIComponent(t)})`:`url(${this.NOIMAGE})`;const l={_id:`art-${this.media.name}`,url:t||this.NOIMAGE};this.media.artist&&(l._id=`art-${this.media.artist.name}-${this.media.name}`),Object(i.c)(l._id,l.url)}else this.backgroundArtService.getMediaArtFromLastFm(this.media).subscribe(t=>{(t=this.backgroundArtService.returnImageUrlFromLastFMResponse(t))&&t!==this.NOIMAGE?this.el.style.backgroundImage=`url(${e}${encodeURIComponent(t)})`:(t||(t=this.NOIMAGE),this.el.style.backgroundImage=`url(${t})`);const l={_id:`art-${this.media.name}`,url:t||this.NOIMAGE};this.media.artist&&(l._id=`art-${this.media.artist.name}-${this.media.name}`),Object(i.c)(l._id,l.url)},t=>this.el.style.backgroundImage=`url(${this.NOIMAGE})`);this.loading=!1,this.toggleLoaded(!0)}}getPosition(){const t=this.el.getBoundingClientRect(),e=t.top+(window.pageYOffset-document.documentElement.clientTop);return{top:e,left:t.left+(window.pageXOffset-document.documentElement.clientLeft),bottom:e+this.el.clientHeight}}getLoadingContainer(){return this.el}hasClassName(t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(this.getLoadingContainer().className)}addClassName(t){if(!this.hasClassName(t)){const e=this.getLoadingContainer();e.className=e.className?[e.className,t].join(" "):t}}removeClassName(t){if(this.hasClassName(t)){const e=this.getLoadingContainer();e.className=e.className.replace(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g"),"")}}toggleLoaded(t){this.loaded=t,t?(this.removeClassName(this.loadingClass),this.addClassName(this.loadedClass)):this.removeClassName(this.loadedClass)}}},BZiF:function(t,e,l){"use strict";l.d(e,"a",function(){return r}),l.d(e,"b",function(){return o});var i=l("8Y7J"),n=l("xOws"),s=l("IheW"),a=l("0/mZ"),r=(l("EAnT"),l("iInd"),i.kb({encapsulation:2,styles:[],data:{}}));function o(t){return i.Fb(0,[i.Bb(402653184,1,{backgroundArt:0}),(t()(),i.mb(1,0,null,null,7,"div",[["class","panel-background"]],null,[[null,"click"]],function(t,e,l){var i=!0;return"click"===e&&(i=!1!==t.component.select()&&i),i},null,null)),i.Ab(512,null,n.a,n.a,[s.c]),i.lb(3,16384,[[1,4]],0,a.a,[i.k,n.a],{media:[0,"media"]},null),(t()(),i.mb(4,0,null,null,4,"div",[["class","panel-info color-type-primary-alt"]],null,null,null,null,null)),(t()(),i.mb(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Db(6,null,["",""])),(t()(),i.mb(7,0,null,null,1,"span",[["class","small muted"]],null,null,null,null,null)),(t()(),i.Db(8,null,["Albums: ",""]))],function(t,e){t(e,3,0,e.component.artist)},function(t,e){var l=e.component;t(e,6,0,l.artist.albumArtist||l.artist.name),t(e,8,0,l.artist.albums.length)})}},EAnT:function(t,e,l){"use strict";l.d(e,"a",function(){return i}),l("LNEh"),l("0/mZ");class i{constructor(t){this.router=t}select(){this.router.navigate(["letter",this.artist.letter.escapedLetter,"artist",this.artist.sortName])}}},Oz9T:function(t,e,l){"use strict";l.d(e,"a",function(){return n});var i=l("KI15");l("ufXC");class n{constructor(t){if(this.playerservice=t,this.playlist={},this.isBusy=!1,this.ownPlaylists=[],localStorage.getItem("customlisttest")){const t=JSON.parse(localStorage.getItem("customlisttest"));t&&t.forEach(t=>{const e=new i.a;e.isOwn=!0,e.name=t.name,e.tracks=t.tracks,this.ownPlaylists.push(e)})}}select(t){this.isBusy||this.playerservice.doPlayAlbum(this.playlist,this.playlist.tracks.indexOf(t),!0)}removeFromPlaylist(t,e){this.isBusy=!0,setTimeout(()=>{this.isBusy=!1},5),this.ownPlaylists.forEach(l=>{if(t.name===l.name){const i=t.tracks.indexOf(e);t.tracks.splice(i,1),l.tracks.splice(i,1)}}),localStorage.setItem("customlisttest",JSON.stringify(this.ownPlaylists))}}},UrAU:function(t,e,l){"use strict";l.d(e,"a",function(){return i}),l("/1T7"),l("0/mZ");class i{constructor(t){this.router=t}select(){this.router.navigate(["letter",this.album.artist.letter.escapedLetter,"artist",this.album.artist.sortName,"album",this.album.sortName])}}},Vmu9:function(t,e,l){"use strict";l.d(e,"a",function(){return r});const i=document.documentElement,n=i.matches?"matches":i.matchesSelector?"matchesSelector":i.webkitMatches?"webkitMatches":i.webkitMatchesSelector?"webkitMatchesSelector":i.msMatches?"msMatches":i.msMatchesSelector?"msMatchesSelector":i.mozMatches?"mozMatches":i.mozMatchesSelector?"mozMatchesSelector":null;function s(){if("pageYOffset"in window)return{scrollTop:pageYOffset,scrollLeft:pageXOffset};{let t,e;const l=document,i=l.documentElement,n=l.body;return{scrollTop:e=i.scrollTop||n.scrollTop||0,scrollLeft:t=i.scrollLeft||n.scrollLeft||0}}}function a(t,e){return t===window||t===document.querySelector("body")?"clientWidth"===e?window.innerWidth:window.innerHeight:t[e]}class r{constructor(t,e,l,i,n){let r;this._element=t,this._viewContainer=e,this._templateRef=l,this._renderer=i,this._ngZone=n,this._originalCollection=[],this._slicedCollection=[],this.tagName="div",this.__horizontal=!1,this.vsOffsetBefore=0,this.vsOffsetAfter=0,this.vsExcess=2,this.updateInnerCollection=(()=>{const t=function(t,e){return t===window?s()[e]:t[e]}(window,this.scrollPos),e=a(this.scrollParent,this.clientSize),l=this.parent===this.scrollParent?0:function(t,e,l){return t.getBoundingClientRect()[l?"left":"top"]-(e===window?0:e.getBoundingClientRect()[l?"left":"top"])+(e===window?s():e)[l?"scrollLeft":"scrollTop"]}(this.parent,this.scrollParent,this.__horizontal);let i=this.startIndex,n=this.endIndex;if(void 0!==this.vsSize){for(i=0;this.sizesCumulative[i]<t-this.vsOffsetBefore;)i++;for(i>0&&i--,n=i=Math.max(Math.floor(i-this.vsExcess/2),0);this.sizesCumulative[n]<t-this.vsOffsetBefore+e;)n++;n=Math.min(Math.ceil(n+this.vsExcess/2),this.originalLength)}else i=Math.max(Math.floor((t-this.vsOffsetBefore-l)/this.elementSize)-this.vsExcess/2,0),n=Math.min(i+Math.ceil(e/this.elementSize)+this.vsExcess,this.originalLength);this._minStartIndex=Math.min(i,this._minStartIndex),this._maxEndIndex=Math.max(n,this._maxEndIndex),this.startIndex=this.__options.latch?this._minStartIndex:i,this.endIndex=this.__options.latch?this._maxEndIndex:n;let r=!1;if(null==this._prevStartIndex?r=!0:null==this._prevEndIndex&&(r=!0),r||(this.__options.hunked?Math.abs(this.startIndex-this._prevStartIndex)>=this.vsExcess/2||0===this.startIndex&&0!==this._prevStartIndex?r=!0:(Math.abs(this.endIndex-this._prevEndIndex)>=this.vsExcess/2||this.endIndex===this.originalLength&&this._prevEndIndex!==this.originalLength)&&(r=!0):r=this.startIndex!==this._prevStartIndex||this.endIndex!==this._prevEndIndex),r){this.slicedCollection=this.originalCollection.slice(this.startIndex,this.endIndex),this.view.context.vsStartIndex=this.startIndex,this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex;const t=this._getOffset(0),e=this._getOffset(this.slicedCollection.length),l=this.totalSize,i=this.__horizontal?"width":"height";this.before.style[i]=t+"px",this.after.style[i]=l-e+"px"}return r}),this.onZone=this._ngZone.onStable.subscribe(()=>{if(!this.scrollParent)return;const t=a(this.scrollParent,this.clientSize);t!==r?(r=t,this._ngZone.run(()=>{this.refresh()})):r=t})}set originalCollection(t){this._originalCollection=t||[],this.scrollParent?this.refresh():this.postDigest(this.refresh.bind(this))}get originalCollection(){return this._originalCollection}set slicedCollection(t){this._slicedCollection=t,this.view.context.vsCollection=this._slicedCollection}get slicedCollection(){return this._slicedCollection}ngOnChanges(){this.scrollParent?this.refresh():this.postDigest(this.refresh.bind(this))}postDigest(t){const e=this._ngZone.onStable.subscribe(()=>{t(),e.unsubscribe()})}initPlaceholders(){this.before=document.createElement(this.tagName),this.before.className="vsFor-before",this.after=document.createElement(this.tagName),this.after.className="vsFor-after",this.parent.insertBefore(this.before,this.parent.childNodes[0]),this.parent.appendChild(this.after),this.__horizontal?(this.before.style.height="100%",this.after.style.height="100%"):(this.before.style.width="100%",this.after.style.width="100%")}ngOnInit(){this.view=this._viewContainer.createEmbeddedView(this._templateRef),this.parent=function(t){if(t.nextElementSibling)return t.nextElementSibling;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}(this._element.nativeElement),this.initPlaceholders(),this.__horizontal=!1,this.__autoSize=!0,this.__options={},this.clientSize=this.__horizontal?"clientWidth":"clientHeight",this.offsetSize=this.__horizontal?"offsetWidth":"offsetHeight",this.scrollPos=this.__horizontal?"scrollLeft":"scrollTop",this.scrollParent=this.vsScrollParent?function(t,e){for(;t!==document.documentElement&&null!=t&&!t[n](e);)t=t.parentNode;return t&&t[n](e)?t:null}(this.parent,this.vsScrollParent):this.parent,this.elementSize=a(this.scrollParent,this.clientSize)||50,this.totalSize=0,void 0!==this.vsSize&&(this.sizesCumulative=[]),this.startIndex=0,this.endIndex=0,document.addEventListener("scroll",this.updateInnerCollection),this.onWindowResize=(()=>{this.vsAutoresize?(this.__autoSize=!0,this._ngZone.run(()=>{this.setAutoSize()})):this._ngZone.run(()=>{this.updateInnerCollection()})}),window.addEventListener("resize",this.onWindowResize)}ngOnDestroy(){window.removeEventListener("resize",this.onWindowResize),this.onZone&&this.onZone.unsubscribe(),document.removeEventListener("scroll",this.updateInnerCollection)}refresh(){if(!this.originalCollection||this.originalCollection.length<1)this.slicedCollection=[],this.originalLength=0,this.updateTotalSize(0),this.sizesCumulative=[0];else if(this.originalLength=this.originalCollection.length,void 0!==this.vsSize){this.sizes=this.originalCollection.map((t,e)=>"function"==typeof this.vsSize?this.vsSize(t,e):+this.vsSize);let t=0;this.sizesCumulative=this.sizes.map(e=>{const l=t;return t+=e,l}),this.sizesCumulative.push(t)}else this.__autoSize=!0,this.postDigest(this.setAutoSize.bind(this));this.reinitialize()}updateTotalSize(t){this.totalSize=this.vsOffsetBefore+t+this.vsOffsetAfter}reinitialize(){this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._minStartIndex=this.originalLength,this._maxEndIndex=0,this.updateTotalSize(void 0!==this.vsSize?this.sizesCumulative[this.originalLength]:this.elementSize*this.originalLength),this.updateInnerCollection()}setAutoSize(){if(void 0!==this.vsSize)this._ngZone.run(()=>{this.refresh()});else if(this.__autoSize){let t=!1;if(this.parent.offsetHeight||this.parent.offsetWidth){const e=this.parent.children[1];e[this.offsetSize]&&(t=!0,this.elementSize=e[this.offsetSize])}t&&(this.__autoSize=!1,this._ngZone.run(()=>{this.reinitialize()}))}}_getOffset(t){return void 0!==this.vsSize?this.sizesCumulative[t+this.startIndex]+this.vsOffsetBefore:(t+this.startIndex)*this.elementSize+this.vsOffsetBefore}}},Z3YK:function(t,e,l){"use strict";l.d(e,"a",function(){return a}),l.d(e,"b",function(){return d});var i=l("8Y7J"),n=l("SVse"),s=l("cpgm"),a=(l("Oz9T"),l("ufXC"),i.kb({encapsulation:2,styles:[],data:{}}));function r(t){return i.Fb(0,[(t()(),i.mb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.mb(1,0,null,null,0,"span",[["class","glyph glyph-pause"]],null,null,null,null,null))],null,null)}function o(t){return i.Fb(0,[(t()(),i.mb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.mb(1,0,null,null,0,"span",[["class","glyph glyph-play"]],null,null,null,null,null))],null,null)}function u(t){return i.Fb(0,[(t()(),i.mb(0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i.mb(1,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),i.Db(2,null,["",""]))],null,function(t,e){t(e,2,0,e.parent.context.$implicit.type)})}function h(t){return i.Fb(0,[(t()(),i.mb(0,0,null,null,3,"span",[],null,null,null,null,null)),(t()(),i.mb(1,0,null,null,2,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),i.Db(2,null,[""," \xa0"])),i.zb(3,1)],null,function(t,e){var l=i.Eb(e,2,0,t(e,3,0,i.wb(e.parent.parent,0),e.parent.context.$implicit.position));t(e,2,0,l)})}function c(t){return i.Fb(0,[(t()(),i.mb(0,0,null,null,19,"li",[["class","list-group-item row"]],null,[[null,"click"]],function(t,e,l){var i=!0;return"click"===e&&(i=!1!==t.component.select(t.context.$implicit)&&i),i},null,null)),i.lb(1,278528,null,0,n.i,[i.q,i.r,i.k,i.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i.yb(2,{active:0}),(t()(),i.mb(3,0,null,null,8,"div",[["class","col-8 col-md-10 track-info"]],null,null,null,null,null)),(t()(),i.eb(16777216,null,null,1,null,r)),i.lb(5,16384,null,0,n.k,[i.M,i.J],{ngIf:[0,"ngIf"]},null),(t()(),i.eb(16777216,null,null,1,null,o)),i.lb(7,16384,null,0,n.k,[i.M,i.J],{ngIf:[0,"ngIf"]},null),(t()(),i.Db(8,null,[""," "])),(t()(),i.mb(9,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.mb(10,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),i.Db(11,null,[" "," \u2022 "," "])),(t()(),i.mb(12,0,null,null,7,"div",[["class","col text-right"]],null,null,null,null,null)),(t()(),i.Db(13,null,[" "," "])),i.zb(14,1),(t()(),i.mb(15,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),i.eb(16777216,null,null,1,null,u)),i.lb(17,16384,null,0,n.k,[i.M,i.J],{ngIf:[0,"ngIf"]},null),(t()(),i.eb(16777216,null,null,1,null,h)),i.lb(19,16384,null,0,n.k,[i.M,i.J],{ngIf:[0,"ngIf"]},null)],function(t,e){var l=t(e,2,0,e.context.$implicit.isPlaying||e.context.$implicit.isPaused);t(e,1,0,"list-group-item row",l),t(e,5,0,!e.context.$implicit.isPlaying&&e.context.$implicit.isPaused),t(e,7,0,e.context.$implicit.isPlaying&&!e.context.$implicit.isPaused),t(e,17,0,!e.context.$implicit.isPlaying),t(e,19,0,e.context.$implicit.isPlaying)},function(t,e){t(e,8,0,e.context.$implicit.title),t(e,11,0,e.context.$implicit.trackArtist,e.context.$implicit.album.name);var l=i.Eb(e,13,0,t(e,14,0,i.wb(e.parent,0),e.context.$implicit.duration));t(e,13,0,l)})}function d(t){return i.Fb(0,[i.xb(0,s.a,[]),(t()(),i.mb(1,0,null,null,2,"ol",[["class","list-group list-tracks"]],null,null,null,null,null)),(t()(),i.eb(16777216,null,null,1,null,c)),i.lb(3,278528,null,0,n.j,[i.M,i.J,i.q],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,3,0,e.component.playlist.tracks)},null)}},Z8Ug:function(t,e,l){"use strict";l.d(e,"a",function(){return o}),l.d(e,"b",function(){return h});var i=l("8Y7J"),n=l("xOws"),s=l("IheW"),a=l("0/mZ"),r=l("SVse"),o=(l("UrAU"),l("iInd"),i.kb({encapsulation:2,styles:[],data:{}}));function u(t){return i.Fb(0,[(t()(),i.mb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Db(1,null,["Year: ",""]))],null,function(t,e){t(e,1,0,e.component.album.year)})}function h(t){return i.Fb(0,[i.Bb(402653184,1,{backgroundArtDirective:0}),(t()(),i.mb(1,0,null,null,8,"div",[["class","panel-background"]],null,[[null,"click"]],function(t,e,l){var i=!0;return"click"===e&&(i=!1!==t.component.select()&&i),i},null,null)),i.Ab(512,null,n.a,n.a,[s.c]),i.lb(3,16384,[[1,4]],0,a.a,[i.k,n.a],{media:[0,"media"]},null),(t()(),i.mb(4,0,null,null,5,"div",[["class","panel-info color-type-primary-alt"]],null,null,null,null,null)),(t()(),i.mb(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),i.Db(6,null,["",""])),(t()(),i.mb(7,0,null,null,2,"span",[["class","small muted"]],null,null,null,null,null)),(t()(),i.eb(16777216,null,null,1,null,u)),i.lb(9,16384,null,0,r.k,[i.M,i.J],{ngIf:[0,"ngIf"]},null)],function(t,e){var l=e.component;t(e,3,0,l.album),t(e,9,0,0!==l.album.year)},function(t,e){t(e,6,0,e.component.album.name)})}},cpgm:function(t,e,l){"use strict";l.d(e,"a",function(){return i});class i{transform(t,e){let l="",i=Math.floor(t/1e3),n=Math.floor(i/60);i%=60;let s=Math.floor(n/60);n%=60;const a=Math.floor(s/24);return a>0&&(l+=a+" days,"),(s%=24)>0&&(l+=this.prefixZero(s)+":"),l+(this.prefixZero(n)+":")+this.prefixZero(i)}prefixZero(t){return t<10?"0"+t.toString():t.toString()}}},xOws:function(t,e,l){"use strict";l.d(e,"a",function(){return n});var i=l("XWo6");class n{constructor(t){this.http=t,this.lastFMImageRetriever=new i.a(t)}getMediaArt(t){const e=this.extractInfo(t);return this.lastFMImageRetriever.getMediaArt(e.artist,e.album,e.type)}getMediaArtFromLastFm(t){const e=this.extractInfo(t);return this.lastFMImageRetriever.getMediaArt(e.artist,e.album,e.type)}returnImageUrlFromLastFMResponse(t){return t.album?t.album.image[t.album.image.length-1]["#text"]:t.artist?t.artist.image[t.artist.image.length-1]["#text"]:t}extractInfo(t){let e="",l="",i="artist";return t.trackArtist&&t.album.artist.isCollection?e=t.trackArtist:t.artist?(e=t.artist.albumArtist||t.artist.name,l=t.name||t.album.name,i="album"):e=t.albumArtist||t.name,{artist:e,album:l,type:i}}}}}]);