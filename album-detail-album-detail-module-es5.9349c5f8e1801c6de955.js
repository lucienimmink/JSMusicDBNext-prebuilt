function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function _createClass(i,t,n){return t&&_defineProperties(i.prototype,t),n&&_defineProperties(i,n),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{jJnS:function(i,t,n){"use strict";n.r(t),n.d(t,"AlbumDetailModule",(function(){return J}));var s=n("ofXK"),a=n("hDf6"),e=n("tyNb"),c=(n("hR/0"),n("KI15")),r=n("ufXC"),o=n("OgP6"),b=n("ktVm"),l=n("XtVx"),u=n("fXoL"),p=n("cpgm");function m(i,t){if(1&i&&(u.Lb(0,"span"),u.pc(1),u.Kb()),2&i){var n=u.Wb(2);u.xb(1),u.rc("",n.album.year," \u2022 ")}}var f=function(i){return{"first-disc":i}};function h(i,t){if(1&i&&(u.Lb(0,"li",22),u.pc(1),u.Kb()),2&i){var n=u.Wb().$implicit;u.cc("ngClass",u.fc(2,f,1==n[0].disc)),u.xb(1),u.rc(" Disc ",n[0].disc," ")}}function d(i,t){if(1&i&&(u.Lb(0,"span"),u.pc(1),u.Kb()),2&i){var n=u.Wb().$implicit;u.xb(1),u.qc(n.number)}}function g(i,t){1&i&&(u.Lb(0,"span"),u.Jb(1,"span",29),u.Kb())}function v(i,t){1&i&&(u.Lb(0,"span"),u.Jb(1,"span",12),u.Kb())}function y(i,t){if(1&i&&(u.Lb(0,"span"),u.Jb(1,"br"),u.Lb(2,"span",27),u.pc(3),u.Kb(),u.Kb()),2&i){var n=u.Wb().$implicit;u.xb(3),u.qc(n.type)}}function k(i,t){if(1&i&&(u.Lb(0,"span"),u.Jb(1,"br"),u.Lb(2,"span",27),u.pc(3),u.Xb(4,"timeFormat"),u.Kb(),u.Kb()),2&i){var n=u.Wb().$implicit;u.xb(3),u.rc(" ",u.Yb(4,1,n.position)," \xa0 ")}}var L=function(i,t,n){return{active:i,showActions:t,hq:n}};function K(i,t){if(1&i){var n=u.Mb();u.Lb(0,"li",23),u.Lb(1,"div",24),u.Sb("click",(function(i){u.lc(n);var s=t.$implicit;return u.Wb(3).onSelect(s,i)})),u.Lb(2,"div",25),u.oc(3,d,2,1,"span",9),u.oc(4,g,2,0,"span",9),u.oc(5,v,2,0,"span",9),u.Kb(),u.Lb(6,"div",26),u.pc(7),u.Jb(8,"br"),u.Lb(9,"span",27),u.pc(10),u.Kb(),u.Kb(),u.Lb(11,"div",28),u.pc(12),u.Xb(13,"timeFormat"),u.oc(14,y,4,1,"span",9),u.oc(15,k,5,3,"span",9),u.Kb(),u.Kb(),u.Kb()}if(2&i){var s=t.$implicit,a=u.Wb(3);u.cc("ngClass",u.hc(11,L,s.isPlaying||s.isPaused,s.showActions,"flac"===s.type)),u.xb(3),u.cc("ngIf",!s.isPlaying&&!s.isPaused&&0!==s.number),u.xb(1),u.cc("ngIf",!s.isPlaying&&s.isPaused),u.xb(1),u.cc("ngIf",s.isPlaying&&!s.isPaused),u.xb(2),u.rc(" ",s.title," "),u.xb(3),u.rc(" ",s.trackArtist," "),u.xb(2),u.rc(" ",u.Yb(13,9,s.duration)," "),u.xb(2),u.cc("ngIf","mixed"===a.album.type&&!s.isPlaying),u.xb(1),u.cc("ngIf",s.isPlaying)}}function w(i,t){if(1&i&&(u.Lb(0,"ol",19),u.oc(1,h,2,4,"li",20),u.oc(2,K,16,15,"li",21),u.Kb()),2&i){var n=t.$implicit,s=u.Wb(2);u.xb(1),u.cc("ngIf",s.album.sortedDiscs.length>1),u.xb(1),u.cc("ngForOf",n)}}function S(i,t){1&i&&(u.Lb(0,"div"),u.Jb(1,"br"),u.Lb(2,"div",30),u.Lb(3,"strong"),u.pc(4,"Warning!"),u.Kb(),u.pc(5," This album cannot be played since FLAC support is lacking."),u.Kb(),u.Kb())}var C=function(i){return{shrunk:i}};function x(i,t){if(1&i){var n=u.Mb();u.Lb(0,"div",1),u.Lb(1,"div",2),u.Lb(2,"div",3),u.Lb(3,"div",4),u.Lb(4,"div",5),u.Jb(5,"album-art",6),u.Kb(),u.Lb(6,"div",7),u.Lb(7,"h2"),u.pc(8),u.Kb(),u.Lb(9,"h3",8),u.pc(10),u.Kb(),u.Lb(11,"h4"),u.oc(12,m,2,1,"span",9),u.pc(13),u.Lb(14,"span",10),u.pc(15),u.Xb(16,"timeFormat"),u.Kb(),u.Kb(),u.Lb(17,"h5"),u.Lb(18,"button",11),u.Sb("click",(function(){return u.lc(n),u.Wb().playAlbum()})),u.Jb(19,"span",12),u.pc(20," Play "),u.Lb(21,"span",13),u.pc(22,"album"),u.Kb(),u.Kb(),u.pc(23,"\xa0\xa0\xa0 "),u.Lb(24,"button",14),u.Sb("click",(function(){return u.lc(n),u.Wb().addToQueue()})),u.Jb(25,"span",15),u.pc(26," queue "),u.Lb(27,"span",13),u.pc(28,"album"),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Lb(29,"div",3),u.Lb(30,"div",16),u.Lb(31,"div",17),u.oc(32,w,3,2,"ol",18),u.oc(33,S,6,0,"div",9),u.Kb(),u.Kb(),u.Kb(),u.Kb()}if(2&i){var s=u.Wb();u.xb(1),u.cc("ngClass",u.fc(15,C,s.isShrunk)),u.xb(3),u.cc("ngClass",u.fc(17,C,s.isShrunk)),u.xb(1),u.cc("album",s.album.name)("artist",s.album.artist.albumArtist||s.album.artist.name),u.xb(1),u.cc("ngClass",u.fc(19,C,s.isShrunk)),u.xb(2),u.qc(s.album.name),u.xb(2),u.rc(" ",s.album.artist.albumArtist||s.album.artist.name," "),u.xb(2),u.cc("ngIf",s.album.year&&0!==s.album.year),u.xb(1),u.rc(" songs: ",s.album.tracks.length," "),u.xb(2),u.sc(" \u2022 ",u.Yb(16,13,s.totalRunningTime())," \u2022 ",s.album.type,""),u.xb(17),u.cc("ngForOf",s.album.sortedDiscs),u.xb(1),u.cc("ngIf","flac"===s.album.type&&!s.isFlacSupported)}}var I,P,A,F=[{path:"",component:(I=function(){function i(t,n,s,a,e,c){var r=this;_classCallCheck(this,i),this.coreService=t,this.router=n,this.pathService=s,this.playerService=a,this.route=e,this.configService=c,this.ownPlaylists=[],this.albumName="",this.artistName="",this.isSwiping=!1,this.isShrunk=!1,this.isFlacSupported=!0,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(i){r.ngOnInit()})),this.artistName=decodeURIComponent(this.route.snapshot.params.artist),this.albumName=decodeURIComponent(this.route.snapshot.params.album),this.route.params.subscribe((function(i){r.artistName=decodeURIComponent(i.artist),r.albumName=decodeURIComponent(i.album),r.ngOnInit()})),this.theme=c.mode}return _createClass(i,[{key:"ngOnInit",value:function(){var i=this;if(this.album=this.core.albums[this.artistName+"|"+this.albumName],this.album){this.album.sortedDiscs=[];var t=Object.keys(this.album.discs),n=[];t.forEach((function(i){var t=i.substring(5);n.push({nr:t,id:i})})),(n=n.sort((function(i,t){return i.nr<t.nr?-1:1}))).forEach((function(t){i.album.sortedDiscs.push(i.album.discs[t.id])})),this.pathService.announcePath({artist:this.album.artist,album:this.album,letter:this.album.artist.letter})}if(this.ownPlaylists=[],localStorage.getItem("customlisttest")){var s=JSON.parse(localStorage.getItem("customlisttest"));s&&s.forEach((function(t){var n=new c.a;n.isOwn=!0,n.name=t.name,n.tracks=t.tracks,i.ownPlaylists.push(n)}))}var a=document.querySelector("audio").canPlayType("audio/flac");this.isFlacSupported="probably"===a||"maybe"===a}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSelect",value:function(i,t){this.isSwiping||this.playerService.doPlayAlbum(this.album,this.album.tracks.indexOf(i),!0,!1)}},{key:"playAlbum",value:function(){this.isSwiping||this.playerService.doPlayAlbum(this.album,0,!0,!1)}},{key:"addToQueue",value:function(){this.isSwiping||this.playerService.doQueueAlbum(this.album)}},{key:"navigateToArtist",value:function(i){this.router.navigate(["Artist",{letter:i.letter.escapedLetter,artist:i.sortName}])}},{key:"swipe",value:function(i,t,n){var s=this;n.preventDefault(),this.isSwiping=!0,setTimeout((function(){s.isSwiping=!1}),5),i.showActions=t}},{key:"totalRunningTime",value:function(){var i=0;return this.album.tracks.forEach((function(t){i+=t.duration})),i}},{key:"onScroll",value:function(i){this.isShrunk=window.scrollY>50}}]),i}(),I.\u0275fac=function(i){return new(i||I)(u.Ib(b.a),u.Ib(e.c),u.Ib(l.a),u.Ib(r.a),u.Ib(e.a),u.Ib(o.a))},I.\u0275cmp=u.Cb({type:I,selectors:[["app-album-detail"]],hostBindings:function(i,t){1&i&&u.Sb("scroll",(function(i){return t.onScroll(i)}),!1,u.kc)},decls:1,vars:1,consts:[["class","animated-page",4,"ngIf"],[1,"animated-page"],[1,"jumbotron","theme-light",3,"ngClass"],[1,"container"],[1,"row","albumdetail"],[1,"col-4","col-md-3","col-lg-2",3,"ngClass"],[3,"album","artist"],[1,"col-8","col-md-9","col-lg-10",3,"ngClass"],[1,"d-none","d-sm-block"],[4,"ngIf"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary",3,"click"],[1,"glyph","glyph-play"],[1,"d-none","d-md-inline"],[1,"btn","btn-secondary",3,"click"],[1,"glyph","glyph-music-info"],[1,"row"],[1,"col"],["class","list-group list-tracks",4,"ngFor","ngForOf"],[1,"list-group","list-tracks"],["class","list-items-row disc-row header-seperator",3,"ngClass",4,"ngIf"],["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-items-row","disc-row","header-seperator",3,"ngClass"],[1,"list-group-item",3,"ngClass"],[1,"details","row",3,"click"],[1,"col-2","col-sm-1"],[1,"col-7","col-sm-10"],[1,"small","muted","color-type-secondary"],[1,"col-3","col-sm-1","text-right"],[1,"glyph","glyph-pause"],[1,"alert","alert-warning"]],template:function(i,t){1&i&&u.oc(0,x,34,21,"div",0),2&i&&u.cc("ngIf",t.album)},directives:[s.k,s.i,s.j],pipes:[p.a],encapsulation:2}),I)}],O=((A=function i(){_classCallCheck(this,i)}).\u0275mod=u.Gb({type:A}),A.\u0275inj=u.Fb({factory:function(i){return new(i||A)},imports:[[e.e.forChild(F)],e.e]}),A),J=((P=function i(){_classCallCheck(this,i)}).\u0275mod=u.Gb({type:P}),P.\u0275inj=u.Fb({factory:function(i){return new(i||P)},imports:[[s.b,O,a.a]]}),P)}}]);