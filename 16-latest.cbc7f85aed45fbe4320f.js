(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"6bSv":function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class s{}var i=u("pMnS"),a=u("SVse"),e=u("Z3YK"),r=u("Oz9T"),c=u("ufXC"),o=u("iInd"),b=u("s7LF"),m=u("OgP6"),g=u("ktVm"),p=u("t083"),h=u("XtVx"),f=u("KI15"),y=u("Gcu2");class d{constructor(l,n,u,t,s,i,a){this.pathService=l,this.coreService=n,this.router=u,this.playerService=t,this.lastfmservice=s,this.configService=i,this.playlistService=a,this.loading=!1,this.username=localStorage.getItem("lastfm-username"),this.showStartingArtist=!1,this.ownPlaylists=[],this.artists=[];const e=this.playerService.getCurrentPlaylist();e&&(this.currentPlaylist=e.playlist,this.trackIndex=e.startIndex,this.setTrack()),this.subscription=this.playerService.playlistAnnounced$.subscribe(l=>{this.currentPlaylist=l.playlist,this.trackIndex=l.startIndex,this.setTrack()}),this.core=this.coreService.getCore(),this.subscription2=this.core.coreParsed$.subscribe(l=>{this.ngOnInit()}),this.theme=i.mode,this.newPlaylist=new f.a}setTrack(){this.track=this.currentPlaylist.tracks[this.trackIndex],this.track&&(this.track.position=0)}ngOnInit(){if(this.pathService.announcePage("Playlists"),this.artists=this.core.artistsList(),this.ownPlaylists=[],localStorage.getItem("customlisttest")){const l=JSON.parse(localStorage.getItem("customlisttest"));l&&l.forEach(l=>{const n=new f.a;n.name=l.name,n.isOwn=!0,l.tracks.forEach(l=>{const u=this.core.getTrackById(l);u&&u.title&&n.tracks.push(u)}),this.ownPlaylists.push(n)})}}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}setPlaylist(l){this.loading=!0,this.showStartingArtist=!1,"current"===l?(this.playlist=this.currentPlaylist,this.loading=!1):"last.fm"===l?this.lastfmservice.getLovedTracks(this.username).subscribe(l=>{this.playlist=this.playlistService.extractTracks(l.lovedtracks.track),this.loading=!1}):"random"===l?(this.playlist=this.playlistService.generateRandom(),this.playlist.isContinues=!0,this.playlist.type=l,this.loading=!1):"radio"===l?this.playlist=this.generateRadio():"artist"===l?this.askForStartingArtist():l instanceof f.a?(this.playlist=l,this.loading=!1):console.info("unknown playlist",l)}generateRadio(){this.lastfmservice.getTopArtists(this.username).subscribe(l=>{this.playlist=this.playlistService.extractArtists(l=l.topartists.artist),this.playlist.isContinues=!0,this.playlist.type="radio",this.loading=!1})}onChange(){const l=this.core.getArtistByName(this.startingArtistName),n=new f.a;n.name=`Artist radio for ${l.name}`,n.tracks=[this.playlistService.getRandomTrackFromList([l])],this.showStartingArtist=!1,this.playlist=n,this.getNextSimilairArtist(l,this.playlist)}getNextSimilairArtist(l,n){this.loading=!0,this.lastfmservice.getSimilairArtists(l).subscribe(l=>{l=l.similarartists.artist,this.loading=!1;const u=[];if(l.forEach(l=>{const n=this.core.getArtistByName(l.name);n&&u.push(n)}),u.length>0){const l=this.playlistService.getNextTrackForPlaylist(u,n);l&&n.tracks.length<this.playlistService.numberOfTracksInAPlaylist&&(n.tracks.push(l),this.getNextSimilairArtist(l.artist,n))}})}askForStartingArtist(){this.loading=!1,this.playlist=null,this.showStartingArtist=!0}}var k=t.kb({encapsulation:2,styles:[],data:{}});function v(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("current")&&t),t},null,null)),(l()(),t.Db(-1,null,["Current playlist"]))],null,null)}function w(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("last.fm")&&t),t},null,null)),(l()(),t.Db(-1,null,["Loved tracks on last.fm"]))],null,null)}function I(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("radio")&&t),t},null,null)),(l()(),t.Db(1,null,[""," tracks by preference"]))],null,function(l,n){l(n,1,0,n.component.playlistService.numberOfTracksInAPlaylist)})}function S(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,3,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist(l.context.$implicit)&&t),t},null,null)),(l()(),t.Db(2,null,[""," "])),(l()(),t.mb(3,0,null,null,1,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.removePlaylist(l.context.$implicit)&&t),t},null,null)),(l()(),t.mb(4,0,null,null,0,"span",[["class","glyph glyph-delete"]],null,null,null,null,null))],null,function(l,n){l(n,2,0,n.context.$implicit.name)})}function P(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"p",[["class","small muted"]],null,null,null,null,null)),(l()(),t.Db(1,null,["Tracks found: ",""]))],null,function(l,n){l(n,1,0,n.component.playlist.tracks.length)})}function C(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,9,"div",[["class","col-12 col-lg-9 offset-lg-3"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t.cb(16777216,null,null,1,null,P)),t.lb(3,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.mb(4,0,null,null,5,"div",[["class","progress-bar"]],null,null,null,null,null)),(l()(),t.mb(5,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.mb(6,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.mb(7,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.mb(8,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.mb(9,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null))],function(l,n){var u=n.component;l(n,3,0,u.playlist&&u.playlist.tracks&&u.playlist.tracks.length>0)},null)}function A(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0,s=l.component;return"click"===n&&(t=!1!==s.updatePlaylist(s.playlist)&&t),t},null,null)),(l()(),t.mb(1,0,null,null,0,"span",[["class","glyph glyph-edit small"]],null,null,null,null,null))],null,null)}function F(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0,s=l.component;return"click"===n&&(t=!1!==s.removePlaylist(s.playlist)&&t),t},null,null)),(l()(),t.mb(1,0,null,null,0,"span",[["class","glyph glyph-delete small"]],null,null,null,null,null))],null,null)}function D(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"mdb-tracklist",[],null,null,null,e.b,e.a)),t.lb(1,49152,null,0,r.a,[c.a],{playlist:[0,"playlist"]},null)],function(l,n){l(n,1,0,n.component.playlist)},null)}function x(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,2,"div",[["class","animated-page"]],null,null,null,null,null)),(l()(),t.cb(16777216,null,null,1,null,D)),t.lb(2,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,2,0,!n.component.loading)},null)}function M(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,20,"div",[["class","animated-page"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,19,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.mb(2,0,null,null,18,"div",[["class","col"]],null,null,null,null,null)),(l()(),t.mb(3,0,null,null,17,"p",[],null,null,null,null,null)),(l()(),t.Db(-1,null,[" Unfortunately this playlist is empty :( "])),(l()(),t.mb(5,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t.Db(-1,null,["Find some tracks from an "])),(l()(),t.mb(7,0,null,null,3,"a",[["routerLink","/artists"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var s=!0;return"click"===n&&(s=!1!==t.wb(l,8).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&s),s},null,null)),t.lb(8,671744,null,0,o.l,[o.k,o.a,a.h],{routerLink:[0,"routerLink"]},null),(l()(),t.mb(9,0,null,null,0,"span",[["class","glyph glyph-people"]],null,null,null,null,null)),(l()(),t.Db(-1,null,[" artist"])),(l()(),t.Db(-1,null,[", "])),(l()(),t.mb(12,0,null,null,3,"a",[["routerLink","/albums"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var s=!0;return"click"===n&&(s=!1!==t.wb(l,13).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&s),s},null,null)),t.lb(13,671744,null,0,o.l,[o.k,o.a,a.h],{routerLink:[0,"routerLink"]},null),(l()(),t.mb(14,0,null,null,0,"span",[["class","glyph glyph-music-album"]],null,null,null,null,null)),(l()(),t.Db(-1,null,[" album"])),(l()(),t.Db(-1,null,[" or a "])),(l()(),t.mb(17,0,null,null,3,"a",[["routerLink","/years"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var s=!0;return"click"===n&&(s=!1!==t.wb(l,18).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&s),s},null,null)),t.lb(18,671744,null,0,o.l,[o.k,o.a,a.h],{routerLink:[0,"routerLink"]},null),(l()(),t.mb(19,0,null,null,0,"span",[["class","glyph glyph-calendar"]],null,null,null,null,null)),(l()(),t.Db(-1,null,[" year"]))],function(l,n){l(n,8,0,"/artists"),l(n,13,0,"/albums"),l(n,18,0,"/years")},function(l,n){l(n,7,0,t.wb(n,8).target,t.wb(n,8).href),l(n,12,0,t.wb(n,13).target,t.wb(n,13).href),l(n,17,0,t.wb(n,18).target,t.wb(n,18).href)})}function J(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,14,"div",[["class","col-12 col-lg-9 offset-lg-3"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,9,"h4",[["class","playlists-header"]],null,null,null,null,null)),(l()(),t.Db(2,null,[" "," "])),(l()(),t.mb(3,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(l()(),t.Db(4,null,["(",")"])),(l()(),t.Db(-1,null,[" \xa0 "])),(l()(),t.cb(16777216,null,null,1,null,A)),t.lb(7,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.Db(-1,null,[" \xa0 "])),(l()(),t.cb(16777216,null,null,1,null,F)),t.lb(10,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.cb(16777216,null,null,1,null,x)),t.lb(12,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.cb(16777216,null,null,1,null,M)),t.lb(14,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,7,0,u.playlist.isOwn),l(n,10,0,u.playlist.isOwn),l(n,12,0,u.playlist&&u.playlist.tracks&&0!==u.playlist.tracks.length),l(n,14,0,u.playlist&&u.playlist.tracks&&0===u.playlist.tracks.length)},function(l,n){var u=n.component;l(n,2,0,u.playlist.name),l(n,4,0,u.playlist.tracks.length)})}function T(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,3,"option",[],null,null,null,null,null)),t.lb(1,147456,null,0,b.l,[t.k,t.B,[2,b.p]],null,null),t.lb(2,147456,null,0,b.s,[t.k,t.B,[8,null]],null,null),(l()(),t.Db(3,null,["",""]))],null,function(l,n){l(n,3,0,n.context.$implicit.name)})}function O(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,22,"div",[["class","col-12 col-lg-9 offset-lg-3"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,1,"h4",[["class","header-seperator"],["sticky",""]],null,null,null,null,null)),(l()(),t.Db(-1,null,[" Select an artist as starting point "])),(l()(),t.mb(3,0,null,null,19,"form",[["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var s=!0;return"submit"===n&&(s=!1!==t.wb(l,8).onSubmit(u)&&s),"reset"===n&&(s=!1!==t.wb(l,8).onReset()&&s),s},null,null)),t.Ab(512,null,a.u,a.v,[t.q,t.r,t.k,t.B]),t.lb(5,278528,null,0,a.i,[a.u],{ngClass:[0,"ngClass"]},null),t.yb(6,{"theme-alt":0}),t.lb(7,16384,null,0,b.t,[],null,null),t.lb(8,4210688,[["sortForm",4]],0,b.j,[[8,null],[8,null]],null,null),t.Ab(2048,null,b.b,null,[b.j]),t.lb(10,16384,null,0,b.i,[[4,b.b]],null,null),(l()(),t.mb(11,0,null,null,11,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),t.mb(12,0,null,null,1,"label",[["class","col-12 col-sm-3 col-form-label"],["for","sort"]],null,null,null,null,null)),(l()(),t.Db(-1,null,["Select an artist"])),(l()(),t.mb(14,0,null,null,8,"div",[["class","col col-sm-9"]],null,null,null,null,null)),(l()(),t.mb(15,0,null,null,7,"select",[["class","form-control"],["id","sort"],["name","sort"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,u){var s=!0,i=l.component;return"change"===n&&(s=!1!==t.wb(l,16).onChange(u.target.value)&&s),"blur"===n&&(s=!1!==t.wb(l,16).onTouched()&&s),"ngModelChange"===n&&(s=!1!==(i.startingArtistName=u)&&s),"ngModelChange"===n&&(s=!1!==i.onChange(u)&&s),s},null,null)),t.lb(16,16384,null,0,b.p,[t.B,t.k],null,null),t.Ab(1024,null,b.f,function(l){return[l]},[b.p]),t.lb(18,671744,[["name",4]],0,b.k,[[2,b.b],[8,null],[8,null],[6,b.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Ab(2048,null,b.g,null,[b.k]),t.lb(20,16384,null,0,b.h,[[4,b.g]],null,null),(l()(),t.cb(16777216,null,null,1,null,T)),t.lb(22,278528,null,0,a.j,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component,t=l(n,6,0,"dark"===u.theme);l(n,5,0,t),l(n,18,0,"sort",u.startingArtistName),l(n,22,0,u.artists)},function(l,n){l(n,3,0,t.wb(n,10).ngClassUntouched,t.wb(n,10).ngClassTouched,t.wb(n,10).ngClassPristine,t.wb(n,10).ngClassDirty,t.wb(n,10).ngClassValid,t.wb(n,10).ngClassInvalid,t.wb(n,10).ngClassPending),l(n,15,0,t.wb(n,20).ngClassUntouched,t.wb(n,20).ngClassTouched,t.wb(n,20).ngClassPristine,t.wb(n,20).ngClassDirty,t.wb(n,20).ngClassValid,t.wb(n,20).ngClassInvalid,t.wb(n,20).ngClassPending)})}function L(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,28,"div",[["class","animated-page"]],null,null,null,null,null)),(l()(),t.mb(1,0,null,null,27,"div",[["class","container"]],null,null,null,null,null)),(l()(),t.mb(2,0,null,null,26,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.mb(3,0,null,null,19,"div",[["class","col-12 col-lg-3 playlists-lg-fixed"]],null,null,null,null,null)),(l()(),t.mb(4,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Db(-1,null,["Playlists"])),(l()(),t.mb(6,0,null,null,16,"ul",[["class","nav flex-column"]],null,null,null,null,null)),(l()(),t.cb(16777216,null,null,1,null,v)),t.lb(8,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.mb(9,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.cb(16777216,null,null,1,null,w)),t.lb(11,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.mb(12,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.mb(13,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("random")&&t),t},null,null)),(l()(),t.Db(14,null,[""," random tracks"])),(l()(),t.mb(15,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.cb(16777216,null,null,1,null,I)),t.lb(17,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.mb(18,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.mb(19,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("artist")&&t),t},null,null)),(l()(),t.Db(-1,null,["Artist radio"])),(l()(),t.cb(16777216,null,null,1,null,S)),t.lb(22,278528,null,0,a.j,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.cb(16777216,null,null,1,null,C)),t.lb(24,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.cb(16777216,null,null,1,null,J)),t.lb(26,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.cb(16777216,null,null,1,null,O)),t.lb(28,16384,null,0,a.k,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,8,0,u.currentPlaylist),l(n,11,0,u.username&&"mdb-skipped"!==u.username),l(n,17,0,u.username&&"mdb-skipped"!==u.username),l(n,22,0,u.ownPlaylists),l(n,24,0,u.loading),l(n,26,0,u.playlist&&!u.loading&&!u.showStartingArtist),l(n,28,0,u.showStartingArtist&&!u.loading&&!u.playlist)},function(l,n){l(n,14,0,n.component.playlistService.numberOfTracksInAPlaylist)})}function K(l){return t.Fb(0,[(l()(),t.mb(0,0,null,null,1,"app-playlists",[],null,null,null,L,k)),t.lb(1,245760,null,0,d,[h.a,g.a,o.k,c.a,p.a,m.a,y.a],null,null)],function(l,n){l(n,1,0)},null)}var N=t.ib("app-playlists",d,K,{},{},[]);class B{}var j=u("hDf6");u.d(n,"PlaylistsModuleNgFactory",function(){return $});var $=t.jb(s,[],function(l){return t.tb([t.ub(512,t.j,t.X,[[8,[i.a,N]],[3,t.j],t.v]),t.ub(4608,a.m,a.l,[t.s,[2,a.z]]),t.ub(4608,b.r,b.r,[]),t.ub(1073742336,a.b,a.b,[]),t.ub(1073742336,o.m,o.m,[[2,o.r],[2,o.k]]),t.ub(1073742336,B,B,[]),t.ub(1073742336,j.a,j.a,[]),t.ub(1073742336,b.q,b.q,[]),t.ub(1073742336,b.d,b.d,[]),t.ub(1073742336,s,s,[]),t.ub(256,t.s,"en-GB",[]),t.ub(1024,o.i,function(){return[[{path:"",component:d}]]},[])])})}}]);