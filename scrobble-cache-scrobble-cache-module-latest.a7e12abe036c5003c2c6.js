function _classCallCheck(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(c,n.key,n)}}function _createClass(c,e,t){return e&&_defineProperties(c.prototype,e),t&&_defineProperties(c,t),c}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{BSpc:function(c,e,t){"use strict";t.r(e);var n=t("ofXK"),i=t("fXoL"),o=t("hDf6"),a=t("tyNb"),r=t("ztCj"),b=t("MDLy"),s=t("ktVm"),l=t("t083"),u=t("XtVx"),f=[1,"animated-page"],m=[1,"container"],h=[1,"row"],g=["class","col",4,"ngIf"],v=[1,"col"],p=[1,"small","muted","color-type-secondary"],d=[1,"float-right","d-none","d-sm-inline",3,"click"],S=[1,"list-items","list-tracks"],k=["class","list-items-row list-tracks-no-hover",4,"ngFor","ngForOf"],y=["class","btn btn-primary",3,"click",4,"ngIf"],L=[1,"list-items-row","list-tracks-no-hover"],T=[1,"col-4","col-sm-3"],w=[1,"col-4","col-sm-3","d-none","d-sm-block"],V=[1,"small","muted"],C=[1,"col-8","col-sm-3"],O=[1,"col-6","col-sm-2"],j=[1,"col-6","col-sm-1","text-right"],D=[1,"glyph","glyph-delete",3,"click"];function I(c,e){if(1&c){var t=i.Wb();i.Vb(0,"li",L),i.Vb(1,"div",h),i.Vb(2,"div",T),i.Jc(3),i.Tb(),i.Vb(4,"div",w),i.Vb(5,"span",V),i.Jc(6),i.Tb(),i.Tb(),i.Vb(7,"div",C),i.Jc(8),i.Tb(),i.Vb(9,"div",O),i.Vb(10,"span",V),i.Jc(11),i.hc(12,"date"),i.hc(13,"date"),i.Tb(),i.Tb(),i.Vb(14,"div",j),i.Vb(15,"a",D),i.bc("click",(function(c){i.xc(t);var n=e.$implicit;return i.gc(2).removeFromScrobbleList(n)})),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&c){var n=e.$implicit;i.Ac(3),i.Lc(" ",n.artist," "),i.Ac(6),i.Kc(n.album),i.Ac(8),i.Lc(" ",n.track," "),i.Ac(11),i.Mc("",i.jc(12,5,1e3*n.timestamp,"mediumDate")," ",i.jc(13,8,1e3*n.timestamp,"shortTime"),"")}}var J=[1,"btn","btn-primary",3,"click"];function M(c,e){if(1&c){var t=i.Wb();i.Vb(0,"button",J),i.bc("click",(function(c){return i.xc(t),i.gc(2).scrobbleNow()})),i.Jc(1,"Scrobble now"),i.Tb()}}function F(c,e){if(1&c){var t=i.Wb();i.Vb(0,"div",v),i.Vb(1,"h4"),i.Jc(2," Tracks in scrobble cache "),i.Vb(3,"span",p),i.Jc(4),i.Tb(),i.Vb(5,"a",d),i.bc("click",(function(c){return i.xc(t),i.gc().scrobbleNow()})),i.Jc(6,"Scrobble now"),i.Tb(),i.Tb(),i.Vb(7,"ol",S),i.Hc(8,I,16,11,"li",k),i.Tb(),i.Hc(9,M,2,0,"button",y),i.Tb()}if(2&c){var n=i.gc();i.Ac(4),i.Lc("(",n.manualScrobblingList.length,")"),i.Ac(8),i.mc("ngForOf",n.manualScrobblingList),i.Ac(9),i.mc("ngIf",n.manualScrobblingList.length>0&&!n.isBusy)}}var _,A,P=[{path:"",component:(_=function(){function c(e,t,n,i,o){var a=this;_classCallCheck(this,c),this.pathService=e,this.coreService=t,this.lastFMService=n,this.collectionService=i,this.router=o,this.manualScrobbling=this.booleanState("manual-scrobble-state"),this.isReloading=!1,this.isBusy=!1,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(c){a.ngOnInit()})),this.subscription2=this.lastFMService.manualScrobbleList$.subscribe((function(c){a.manualScrobblingList=c})),Object(r.c)("manual-scrobble-list").then((function(c){a.manualScrobblingList=c||[]}))}return _createClass(c,[{key:"ngOnInit",value:function(){var c=this;this.pathService.announcePage("Scrobble cache"),Object(r.c)("manual-scrobble-list").then((function(e){c.manualScrobblingList=e||[]}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}},{key:"scrobbleNow",value:function(){var c=this;this.isBusy=!0,Object(r.c)("manual-scrobble-list").then((function(e){c.manualScrobblingList=e||[];var t=c.manualScrobblingList.pop();c.lastFMService.scrobbleCachedTrack(t).subscribe((function(e){Object(r.d)("manual-scrobble-list",c.manualScrobblingList),c.lastFMService.updateManualScrobbleList(),c.manualScrobblingList.length>0?c.scrobbleNow():c.isBusy=!1}))}))}},{key:"removeFromScrobbleList",value:function(c){var e=this;Object(r.c)("manual-scrobble-list").then((function(t){e.manualScrobblingList=t||[];var n=-1;e.manualScrobblingList.forEach((function(e,t){Object.is(e,c)&&(n=t)})),e.manualScrobblingList.splice(n,1),Object(r.d)("manual-scrobble-list",e.manualScrobblingList)}))}},{key:"booleanState",value:function(c){var e=localStorage.getItem(c);return!(!e||"true"!==e)}}]),c}(),_.ngComponentDef=i.Lb({type:_,selectors:[["app-scrobble-cache"]],factory:function(c){return new(c||_)(i.Rb(u.a),i.Rb(s.a),i.Rb(l.a),i.Rb(b.a),i.Rb(a.c))},consts:4,vars:1,template:function(c,e){1&c&&(i.Vb(0,"div",f),i.Vb(1,"div",m),i.Vb(2,"div",h),i.Hc(3,F,10,3,"div",g),i.Tb(),i.Tb(),i.Tb()),2&c&&(i.Ac(3),i.mc("ngIf",e.manualScrobblingList&&e.manualScrobbling))},directives:[n.l,n.k],pipes:[n.e],encapsulation:2}),_)}],B=((A=function c(){_classCallCheck(this,c)}).ngModuleDef=i.Pb({type:A}),A.ngInjectorDef=i.Ob({factory:function(c){return new(c||A)},imports:[[a.e.forChild(P)],a.e]}),A.ngLocaleIdDef="en-GB",A);a.e.forChild(P),t.d(e,"ScrobbleCacheModule",(function(){return x}));var R,x=((R=function c(){_classCallCheck(this,c)}).ngModuleDef=i.Pb({type:R}),R.ngInjectorDef=i.Ob({factory:function(c){return new(c||R)},imports:[[n.c,B,o.a]]}),R.ngLocaleIdDef="en-GB",R)}}]);