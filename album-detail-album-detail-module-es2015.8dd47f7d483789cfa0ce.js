(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{jJnS:function(t,i,s){"use strict";s.r(i);var c=s("ofXK"),n=s("fXoL"),e=s("hDf6"),a=s("tyNb"),o=s("KI15"),r=s("ufXC"),l=s("OgP6"),b=s("ktVm"),u=s("XtVx"),m=s("9dPn"),p=s("cpgm");const h=["class","animated-page",4,"ngIf"],d=[1,"animated-page"],g=[1,"jumbotron","theme-light",3,"ngClass"],f=[1,"container"],y=[1,"row","albumdetail"],T=[1,"col-4","col-md-3","col-lg-2"],R=[3,"album"],k=[1,"col-8","col-md-9","col-lg-10"],v=[1,"d-none","d-sm-block"],I=[4,"ngIf"],w=[1,"d-none","d-sm-inline"],P=[1,"btn","btn-primary",3,"click"],S=[1,"glyph","glyph-play"],G=[1,"d-none","d-md-inline"],C=[1,"btn","btn-secondary",3,"click"],D=[1,"glyph","glyph-music-info"],E=[1,"row"],A=[1,"col"],F=["class","list-group list-tracks",4,"ngFor","ngForOf"];function N(t,i){if(1&t&&(n.Tb(0,"span"),n.Gc(1),n.Rb()),2&t){const t=n.ec(2);n.yc(1),n.Ic("",t.album.year," \u2022 ")}}const O=[1,"list-group","list-tracks"],Q=["class","list-items-row disc-row header-seperator",3,"ngClass",4,"ngIf"],$=["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],j=[1,"list-items-row","disc-row","header-seperator",3,"ngClass"],J=function(t){return{"first-disc":t}};function U(t,i){if(1&t&&(n.Tb(0,"li",j),n.Gc(1),n.Rb()),2&t){const t=n.ec().$implicit;n.kc("ngClass",n.nc(2,J,1==t[0].disc)),n.yc(1),n.Ic(" Disc ",t[0].disc," ")}}const L=[1,"list-group-item",3,"ngClass"],M=[1,"details","row",3,"click"],x=[1,"col-2","col-sm-1"],X=[1,"col-7","col-sm-10"],q=[1,"small","muted","color-type-secondary"],H=[1,"col-3","col-sm-1","text-right"];function Z(t,i){if(1&t&&(n.Tb(0,"span"),n.Gc(1),n.Rb()),2&t){const t=n.ec().$implicit;n.yc(1),n.Hc(t.number)}}const B=[1,"glyph","glyph-pause"];function K(t,i){1&t&&(n.Tb(0,"span"),n.Qb(1,"span",B),n.Rb())}function V(t,i){1&t&&(n.Tb(0,"span"),n.Qb(1,"span",S),n.Rb())}function W(t,i){if(1&t&&(n.Tb(0,"span"),n.Qb(1,"br"),n.Tb(2,"span",q),n.Gc(3),n.Rb(),n.Rb()),2&t){const t=n.ec().$implicit;n.yc(3),n.Hc(t.type)}}function z(t,i){if(1&t&&(n.Tb(0,"span"),n.Qb(1,"br"),n.Tb(2,"span",q),n.Gc(3),n.fc(4,"timeFormat"),n.Rb(),n.Rb()),2&t){const t=n.ec().$implicit;n.yc(3),n.Ic(" ",n.gc(4,1,t.position)," \xa0 ")}}const Y=function(t,i,s){return{active:t,showActions:i,hq:s}};function _(t,i){if(1&t){const t=n.Ub();n.Tb(0,"li",L),n.Tb(1,"div",M),n.Zb("click",function(s){n.vc(t);const c=i.$implicit;return n.ec(3).onSelect(c,s)}),n.Tb(2,"div",x),n.Ec(3,Z,2,1,"span",I),n.Ec(4,K,2,0,"span",I),n.Ec(5,V,2,0,"span",I),n.Rb(),n.Tb(6,"div",X),n.Gc(7),n.Qb(8,"br"),n.Tb(9,"span",q),n.Gc(10),n.Rb(),n.Rb(),n.Tb(11,"div",H),n.Gc(12),n.fc(13,"timeFormat"),n.Ec(14,W,4,1,"span",I),n.Ec(15,z,5,3,"span",I),n.Rb(),n.Rb(),n.Rb()}if(2&t){const t=i.$implicit,s=n.ec(3);n.kc("ngClass",n.pc(11,Y,t.isPlaying||t.isPaused,t.showActions,"flac"===t.type)),n.yc(3),n.kc("ngIf",!t.isPlaying&&!t.isPaused&&0!==t.number),n.yc(4),n.kc("ngIf",!t.isPlaying&&t.isPaused),n.yc(5),n.kc("ngIf",t.isPlaying&&!t.isPaused),n.yc(7),n.Ic(" ",t.title," "),n.yc(10),n.Ic(" ",t.trackArtist," "),n.yc(12),n.Ic(" ",n.gc(13,9,t.duration)," "),n.yc(14),n.kc("ngIf","mixed"===s.album.type&&!t.isPlaying),n.yc(15),n.kc("ngIf",t.isPlaying)}}function tt(t,i){if(1&t&&(n.Tb(0,"ol",O),n.Ec(1,U,2,4,"li",Q),n.Ec(2,_,16,15,"li",$),n.Rb()),2&t){const t=i.$implicit,s=n.ec(2);n.yc(1),n.kc("ngIf",s.album.sortedDiscs.length>1),n.yc(2),n.kc("ngForOf",t)}}const it=[1,"alert","alert-warning"];function st(t,i){1&t&&(n.Tb(0,"div"),n.Qb(1,"br"),n.Tb(2,"div",it),n.Tb(3,"strong"),n.Gc(4,"Warning!"),n.Rb(),n.Gc(5," This album cannot be played since FLAC support is lacking."),n.Rb(),n.Rb())}const ct=function(t){return{shrunk:t}};function nt(t,i){if(1&t){const t=n.Ub();n.Tb(0,"div",d),n.Tb(1,"div",g),n.Tb(2,"div",f),n.Tb(3,"div",y),n.Tb(4,"div",T),n.Qb(5,"mdb-album-art",R),n.Rb(),n.Tb(6,"div",k),n.Tb(7,"h2"),n.Gc(8),n.Rb(),n.Tb(9,"h3",v),n.Gc(10),n.Rb(),n.Tb(11,"h4"),n.Ec(12,N,2,1,"span",I),n.Gc(13),n.Tb(14,"span",w),n.Gc(15),n.fc(16,"timeFormat"),n.Rb(),n.Rb(),n.Tb(17,"h5"),n.Tb(18,"button",P),n.Zb("click",function(i){return n.vc(t),n.ec().playAlbum()}),n.Qb(19,"span",S),n.Gc(20," Play "),n.Tb(21,"span",G),n.Gc(22,"album"),n.Rb(),n.Rb(),n.Gc(23,"\xa0\xa0\xa0 "),n.Tb(24,"button",C),n.Zb("click",function(i){return n.vc(t),n.ec().addToQueue()}),n.Qb(25,"span",D),n.Gc(26," queue "),n.Tb(27,"span",G),n.Gc(28,"album"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Tb(29,"div",f),n.Tb(30,"div",E),n.Tb(31,"div",A),n.Ec(32,tt,3,2,"ol",F),n.Ec(33,st,6,0,"div",I),n.Rb(),n.Rb(),n.Rb(),n.Rb()}if(2&t){const t=n.ec();n.yc(1),n.kc("ngClass",n.nc(12,ct,t.isShrunk)),n.yc(5),n.kc("album",t.album),n.yc(8),n.Hc(t.album.name),n.yc(10),n.Ic(" ",t.album.artist.albumArtist||t.album.artist.name," "),n.yc(12),n.kc("ngIf",t.album.year&&0!==t.album.year),n.yc(13),n.Ic(" songs: ",t.album.tracks.length," "),n.yc(15),n.Jc(" \u2022 ",n.gc(16,10,t.totalRunningTime())," \u2022 ",t.album.type,""),n.yc(32),n.kc("ngForOf",t.album.sortedDiscs),n.yc(33),n.kc("ngIf","flac"===t.album.type&&!t.isFlacSupported)}}const et=[{path:"",component:(()=>{class t{constructor(t,i,s,c,n,e){this.coreService=t,this.router=i,this.pathService=s,this.playerService=c,this.route=n,this.configService=e,this.ownPlaylists=[],this.albumName="",this.artistName="",this.isSwiping=!1,this.isShrunk=!1,this.isFlacSupported=!0,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()}),this.artistName=decodeURIComponent(this.route.snapshot.params.artist),this.albumName=decodeURIComponent(this.route.snapshot.params.album),this.route.params.subscribe(t=>{this.artistName=decodeURIComponent(t.artist),this.albumName=decodeURIComponent(t.album),this.ngOnInit()}),this.theme=e.mode}ngOnInit(){if(this.album=this.core.albums[this.artistName+"|"+this.albumName],this.album){this.album.sortedDiscs=[];const t=Object.keys(this.album.discs);let i=[];t.forEach(t=>{const s=t.substring(5);i.push({nr:s,id:t})}),(i=i.sort((t,i)=>t.nr<i.nr?-1:1)).forEach(t=>{this.album.sortedDiscs.push(this.album.discs[t.id])}),this.pathService.announcePath({artist:this.album.artist,album:this.album,letter:this.album.artist.letter})}if(this.ownPlaylists=[],localStorage.getItem("customlisttest")){const t=JSON.parse(localStorage.getItem("customlisttest"));t&&t.forEach(t=>{const i=new o.a;i.isOwn=!0,i.name=t.name,i.tracks=t.tracks,this.ownPlaylists.push(i)})}const t=document.querySelector("audio").canPlayType("audio/flac");this.isFlacSupported="probably"===t||"maybe"===t}ngOnDestroy(){this.subscription.unsubscribe()}onSelect(t,i){this.isSwiping||this.playerService.doPlayAlbum(this.album,this.album.tracks.indexOf(t),!0,!1)}playAlbum(){this.isSwiping||this.playerService.doPlayAlbum(this.album,0,!0,!1)}addToQueue(){this.isSwiping||this.playerService.doQueueAlbum(this.album)}navigateToArtist(t){this.router.navigate(["Artist",{letter:t.letter.escapedLetter,artist:t.sortName}])}swipe(t,i,s){s.preventDefault(),this.isSwiping=!0,setTimeout(()=>{this.isSwiping=!1},5),t.showActions=i}totalRunningTime(){let t=0;return this.album.tracks.forEach(i=>{t+=i.duration}),t}}return t.ngComponentDef=n.Jb({type:t,selectors:[["app-album-detail"]],factory:function(i){return new(i||t)(n.Pb(b.a),n.Pb(a.c),n.Pb(u.a),n.Pb(r.a),n.Pb(a.a),n.Pb(l.a))},consts:1,vars:1,template:function(t,i){1&t&&n.Ec(0,nt,34,14,"div",h),2&t&&n.kc("ngIf",i.album)},directives:[c.l,c.j,m.a,c.k],pipes:[p.a],encapsulation:2}),t})()}],at=(()=>{class t{}return t.ngModuleDef=n.Nb({type:t}),t.ngInjectorDef=n.Mb({factory:function(i){return new(i||t)},imports:[[a.e.forChild(et)],a.e]}),t.ngLocaleIdDef="en-GB",t})();a.e.forChild(et),s.d(i,"AlbumDetailModule",function(){return ot});const ot=(()=>{class t{}return t.ngModuleDef=n.Nb({type:t}),t.ngInjectorDef=n.Mb({factory:function(i){return new(i||t)},imports:[[c.c,at,e.a]]}),t.ngLocaleIdDef="en-GB",t})()}}]);