(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0/mZ":function(t,n,l){"use strict";l.d(n,"a",function(){return a});var e=l("ztCj"),i=(l("xOws"),function(t,n,l,e){return new(l||(l=Promise))(function(i,r){function a(t){try{s(e.next(t))}catch(n){r(n)}}function u(t){try{s(e.throw(t))}catch(n){r(n)}}function s(t){t.done?i(t.value):new l(function(n){n(t.value)}).then(a,u)}s((e=e.apply(t,n||[])).next())})}),r=function(t,n){var l,e,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,e=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(t,a)}catch(u){r=[6,u],e=0}finally{l=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},a=function(){function t(t,n){var l=this;this.backgroundArtService=n,this.NOIMAGE="global/images/no-cover.png",this.loading=!1,this.loaded=!1,this.error=!1,this.loadingClass="loading",this.loadedClass="loaded",this.errorClass="error",this.el=t.nativeElement,setTimeout(function(){l.loadImage()},100)}return t.prototype.loadImage=function(){var t=this;if(!this.loaded&&!this.loading||this.hasClassName("always-replace")){this.loading=!0,this.addClassName(this.loadingClass);var n="art-"+this.media.name;this.media.artist&&!this.media.trackArtist?n="art-"+this.media.artist.name+"-"+this.media.name:this.media.trackArtist&&(n="art-"+this.media.trackArtist+"-"+this.media.album.name),Object(e.c)(n).then(function(n){n?t.setImage(n):t.backgroundArtService.getMediaArt(t.media).subscribe(function(n){return t.setImage(n)},function(n){t.el.style.backgroundImage="url("+t.NOIMAGE+")",t.error=!0,t.loading=!1,t.removeClassName(t.loadingClass),t.addClassName(t.errorClass)})})}},t.prototype.setImage=function(t){return i(this,void 0,void 0,function(){var n,l,a=this;return r(this,function(u){switch(u.label){case 0:return(n=localStorage.getItem("dsm"))&&(n+="/data/image-proxy?url="),this.loaded&&!this.hasClassName("always-replace")?[3,4]:t!==this.NOIMAGE&&""!==t&&t?[3,1]:(this.backgroundArtService.getMediaArtFromLastFm(this.media).subscribe(function(t){return i(a,void 0,void 0,function(){var l;return r(this,function(i){switch(i.label){case 0:return[4,this.backgroundArtService.returnImageUrlFromLastFMResponse(t)];case 1:return(t=i.sent())&&t!==this.NOIMAGE?this.el.style.backgroundImage="url("+n+encodeURIComponent(t)+")":(t||(t=this.NOIMAGE),this.el.style.backgroundImage="url("+t+")"),l={_id:"art-"+this.media.name,url:t||this.NOIMAGE},this.media.artist&&(l._id="art-"+this.media.artist.name+"-"+this.media.name),Object(e.d)(l._id,l.url),[2]}})})},function(t){return a.el.style.backgroundImage="url("+a.NOIMAGE+")"}),[3,3]);case 1:return[4,this.backgroundArtService.returnImageUrlFromLastFMResponse(t)];case 2:t=u.sent(),this.el.style.backgroundImage=t?"url("+t+")":"url("+this.NOIMAGE+")",l={_id:"art-"+this.media.name,url:t||this.NOIMAGE},this.media.artist&&(l._id="art-"+this.media.artist.name+"-"+this.media.name),Object(e.d)(l._id,l.url),u.label=3;case 3:this.loading=!1,this.toggleLoaded(!0),u.label=4;case 4:return[2]}})})},t.prototype.getPosition=function(){var t=this.el.getBoundingClientRect(),n=t.top+(window.pageYOffset-document.documentElement.clientTop);return{top:n,left:t.left+(window.pageXOffset-document.documentElement.clientLeft),bottom:n+this.el.clientHeight}},t.prototype.getLoadingContainer=function(){return this.el},t.prototype.hasClassName=function(t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(this.getLoadingContainer().className)},t.prototype.addClassName=function(t){if(!this.hasClassName(t)){var n=this.getLoadingContainer();n.className=n.className?[n.className,t].join(" "):t}},t.prototype.removeClassName=function(t){if(this.hasClassName(t)){var n=this.getLoadingContainer();n.className=n.className.replace(new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g"),"")}},t.prototype.toggleLoaded=function(t){this.loaded=t,t?(this.removeClassName(this.loadingClass),this.addClassName(this.loadedClass)):this.removeClassName(this.loadedClass)},t}()},"q+AI":function(t,n,l){"use strict";l.r(n);var e=l("CcnG"),i=function(){return function(){}}(),r=l("pMnS"),a=l("BZiF"),u=l("EAnT"),s=l("ZYCi"),o=l("Ip0R"),c=l("Vmu9"),m=l("ktVm"),h=l("XtVx"),p=function(){function t(t,n,l){var e=this;this.coreService=t,this.pathService=n,this.router=l,this.letters=[],this.showJumpList=!1,this.cummlativeLength=[],this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe(function(t){e.ngOnInit()})}return t.prototype.ngOnInit=function(){var t=this;this.pathService.announcePage("Artists"),this.letters=this.core.sortedLetters,this.letters.forEach(function(n,l){var e=t.getSize(n,l);t.cummlativeLength[l]=l>0?t.cummlativeLength[l-1]+e:e,n.sortArtistsBy("sortName","asc")})},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.navigateToArtist=function(t){this.router.navigate(["/letter",t.letter.escapedLetter,"artist",t.sortName])},t.prototype.getSize=function(t,n){return 90*t.artists.length+49},t.prototype.toggleJumpList=function(){this.showJumpList=!this.showJumpList},t.prototype.jumpToLetter=function(t){this.showJumpList=!1;var n=this.letters.indexOf(t);window.scrollTo(0,this.cummlativeLength[n>0?n-1:0])},t}(),d=e.ob({encapsulation:2,styles:[],data:{}});function f(t){return e.Lb(0,[(t()(),e.qb(0,0,null,null,8,"li",[],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.navigateToArtist(t.context.$implicit)&&e),e},null,null)),(t()(),e.qb(1,0,null,null,2,"div",[["class","image-wrapper"]],null,null,null,null,null)),(t()(),e.qb(2,0,null,null,1,"mdb-artist",[],null,null,null,a.b,a.a)),e.pb(3,49152,null,0,u.a,[s.k],{artist:[0,"artist"]},null),(t()(),e.qb(4,0,null,null,4,"div",[["class","text-wrapper"]],null,null,null,null,null)),(t()(),e.qb(5,0,null,null,1,"span",[["class","text"]],null,null,null,null,null)),(t()(),e.Jb(6,null,["",""])),(t()(),e.qb(7,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(t()(),e.Jb(8,null,["Albums: ",""]))],function(t,n){t(n,3,0,n.context.$implicit)},function(t,n){t(n,6,0,n.context.$implicit.albumArtist||n.context.$implicit.name),t(n,8,0,n.context.$implicit.albums.length)})}function b(t){return e.Lb(0,[(t()(),e.qb(0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(t()(),e.qb(1,0,null,null,6,"div",[["class","col"]],null,null,null,null,null)),(t()(),e.qb(2,0,null,null,2,"h4",[],null,null,null,null,null)),(t()(),e.qb(3,0,null,null,1,"a",[],[[8,"id",0]],[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.toggleJumpList()&&e),e},null,null)),(t()(),e.Jb(4,null,["",""])),(t()(),e.qb(5,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),e.gb(16777216,null,null,1,null,f)),e.pb(7,278528,null,0,o.j,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,7,0,n.context.$implicit.artists)},function(t,n){t(n,3,0,e.ub(1,"letter_",n.context.$implicit.letter,"")),t(n,4,0,n.context.$implicit.letter)})}function g(t){return e.Lb(0,[(t()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),e.gb(16777216,null,null,1,null,b)),e.pb(2,278528,null,0,o.j,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(t,n){t(n,2,0,n.context.vsCollection)},null)}function v(t){return e.Lb(0,[(t()(),e.qb(0,0,null,null,2,"li",[],null,null,null,null,null)),(t()(),e.qb(1,0,null,null,1,"a",[],null,[[null,"click"]],function(t,n,l){var e=!0;return"click"===n&&(e=!1!==t.component.jumpToLetter(t.context.$implicit)&&e),e},null,null)),(t()(),e.Jb(2,null,["",""]))],null,function(t,n){t(n,2,0,n.context.$implicit.letter)})}function y(t){return e.Lb(0,[(t()(),e.qb(0,0,null,null,10,"div",[["class","animated-page"]],null,null,null,null,null)),(t()(),e.qb(1,0,null,null,2,"div",[["class","container container-longlist"],["imageLazyLoadArea",""]],null,null,null,null,null)),(t()(),e.gb(16777216,null,null,1,null,g)),e.pb(3,737280,null,0,c.a,[e.k,e.O,e.L,e.z],{vsSize:[0,"vsSize"],vsExcess:[1,"vsExcess"],vsScrollParent:[2,"vsScrollParent"],originalCollection:[3,"originalCollection"]},null),(t()(),e.qb(4,0,null,null,6,"div",[["class","jump-list"]],null,null,null,null,null)),e.Gb(512,null,o.u,o.v,[e.s,e.t,e.k,e.D]),e.pb(6,278528,null,0,o.i,[o.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Eb(7,{visible:0}),(t()(),e.qb(8,0,null,null,2,"ol",[],null,null,null,null,null)),(t()(),e.gb(16777216,null,null,1,null,v)),e.pb(10,278528,null,0,o.j,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(t,n){var l=n.component;t(n,3,0,l.getSize,2,"body",l.letters);var e=t(n,7,0,l.showJumpList);t(n,6,0,"jump-list",e),t(n,10,0,l.letters)},null)}function A(t){return e.Lb(0,[(t()(),e.qb(0,0,null,null,1,"app-artists",[],null,null,null,y,d)),e.pb(1,245760,null,0,p,[m.a,h.a,s.k],null,null)],function(t,n){t(n,1,0)},null)}var w=e.mb("app-artists",p,A,{},{},[]),L=function(){return function(){}}(),k=l("hDf6");l.d(n,"ArtistsModuleNgFactory",function(){return x});var x=e.nb(i,[],function(t){return e.zb([e.Ab(512,e.j,e.Z,[[8,[r.a,w]],[3,e.j],e.x]),e.Ab(4608,o.m,o.l,[e.u,[2,o.z]]),e.Ab(1073742336,o.b,o.b,[]),e.Ab(1073742336,s.m,s.m,[[2,s.r],[2,s.k]]),e.Ab(1073742336,L,L,[]),e.Ab(1073742336,k.a,k.a,[]),e.Ab(1073742336,i,i,[]),e.Ab(256,e.u,"en-GB",[]),e.Ab(1024,s.i,function(){return[[{path:"",component:p}]]},[])])})},xOws:function(t,n,l){"use strict";l.d(n,"a",function(){return a});var e=l("XWo6"),i=function(t,n,l,e){return new(l||(l=Promise))(function(i,r){function a(t){try{s(e.next(t))}catch(n){r(n)}}function u(t){try{s(e.throw(t))}catch(n){r(n)}}function s(t){t.done?i(t.value):new l(function(n){n(t.value)}).then(a,u)}s((e=e.apply(t,n||[])).next())})},r=function(t,n){var l,e,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,e=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(t,a)}catch(u){r=[6,u],e=0}finally{l=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},a=function(){function t(t){this.http=t,this.API_KEY="639fca5adcf955a19f9a04f8985e9ded",this.lastFMImageRetriever=new e.a(t)}return t.prototype.getMediaArt=function(t){var n=this.extractInfo(t);return this.lastFMImageRetriever.getMediaArt(n.artist,n.album,n.type)},t.prototype.getMediaArtFromLastFm=function(t){var n=this.extractInfo(t);return this.lastFMImageRetriever.getMediaArt(n.artist,n.album,n.type)},t.prototype.returnImageUrlFromLastFMResponse=function(t){return i(this,void 0,void 0,function(){var n;return r(this,function(l){return t.album?[2,t.album.image[t.album.image.length-1]["#text"]]:t.artist?(n=t.artist.mbid)?[2,this.getArtistURLArtFormFanart(n,t.artist)]:[2,t.artist.image[t.artist.image.length-1]["#text"]]:[2,t]})})},t.prototype.getArtistURLArtFormFanart=function(t,n){return i(this,void 0,void 0,function(){var l,e;return r(this,function(i){switch(i.label){case 0:return[4,fetch("https://webservice.fanart.tv/v3/music/"+t+"&?api_key="+this.API_KEY+"&format=json")];case 1:return 200!==(l=i.sent()).status?[3,3]:[4,l.json()];case 2:if((e=i.sent()).artistbackground)return[2,e.artistbackground[0].url];i.label=3;case 3:return[2,this.getArtistURLArtFromAudioDB(n)]}})})},t.prototype.getArtistURLArtFromAudioDB=function(t){return i(this,void 0,void 0,function(){var n,l;return r(this,function(e){switch(e.label){case 0:return[4,fetch("https://www.theaudiodb.com/api/v1/json/1/search.php?s="+encodeURIComponent(t.name))];case 1:return 200!==(n=e.sent()).status?[3,3]:[4,n.json()];case 2:if((l=e.sent())&&l.artists)return[2,l.artists[0].strArtistFanart];e.label=3;case 3:return[2,t.image[t.image.length-1]["#text"]]}})})},t.prototype.extractInfo=function(t){var n="",l="",e="artist";return t.trackArtist&&t.album.artist.isCollection?n=t.trackArtist:t.artist?(n=t.artist.albumArtist||t.artist.name,l=t.name||t.album.name,e="album"):n=t.albumArtist||t.name,{artist:n,album:l,type:e}},t}()}}]);