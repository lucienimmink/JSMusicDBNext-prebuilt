(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{kez3:function(t,s,i){"use strict";i.r(s);var c=i("ofXK"),n=i("fXoL"),a=i("3Pt+"),e=i("hDf6"),l=i("tyNb"),r=i("ufXC"),o=i("OgP6"),b=i("ktVm"),y=i("t083"),h=i("XtVx"),p=i("KI15"),g=i("Gcu2"),f=i("Oz9T");const u=[1,"animated-page"],d=[1,"container"],m=[1,"row"],k=[1,"col-12","col-lg-3","playlists-lg-fixed"],v=[1,"nav","flex-column"],T=["class","nav-item",4,"ngIf"],R=[1,"nav-item"],I=["class","btn btn-link px-0",3,"click",4,"ngIf"],P=[1,"btn","btn-link","px-0",3,"click"],S=["class","nav-item",4,"ngFor","ngForOf"],w=["class","col-12 col-lg-9 offset-lg-3",4,"ngIf"];function A(t,s){if(1&t){const t=n.Ub();n.Tb(0,"li",R),n.Tb(1,"a",P),n.Zb("click",function(s){return n.vc(t),n.ec().setPlaylist("current")}),n.Gc(2,"Current playlist"),n.Rb(),n.Rb()}}function G(t,s){if(1&t){const t=n.Ub();n.Tb(0,"a",P),n.Zb("click",function(s){return n.vc(t),n.ec().setPlaylist("last.fm")}),n.Gc(1,"Loved tracks on last.fm"),n.Rb()}}function E(t,s){if(1&t){const t=n.Ub();n.Tb(0,"a",P),n.Zb("click",function(s){return n.vc(t),n.ec().setPlaylist("radio")}),n.Gc(1),n.Rb()}if(2&t){const t=n.ec();n.yc(1),n.Ic("",t.playlistService.numberOfTracksInAPlaylist," tracks by preference")}}const x=[3,"click"],C=[1,"glyph","glyph-delete"];function O(t,s){if(1&t){const t=n.Ub();n.Tb(0,"li",R),n.Tb(1,"a",x),n.Zb("click",function(i){n.vc(t);const c=s.$implicit;return n.ec().setPlaylist(c)}),n.Gc(2),n.Tb(3,"a",x),n.Zb("click",function(i){n.vc(t);const c=s.$implicit;return n.ec().removePlaylist(c)}),n.Qb(4,"span",C),n.Rb(),n.Rb(),n.Rb()}if(2&t){const t=s.$implicit;n.yc(2),n.Ic("",t.name," ")}}const Q=[1,"col-12","col-lg-9","offset-lg-3"],F=["class","small muted",4,"ngIf"],N=[1,"progress-bar"],M=[1,"progress-circle"],Z=[1,"small","muted"];function L(t,s){if(1&t&&(n.Tb(0,"p",Z),n.Gc(1),n.Rb()),2&t){const t=n.ec(2);n.yc(1),n.Ic("Tracks found: ",t.playlist.tracks.length,"")}}function D(t,s){if(1&t&&(n.Tb(0,"div",Q),n.Qb(1,"br"),n.Ec(2,L,2,1,"p",F),n.Tb(3,"div",N),n.Qb(4,"div",M),n.Qb(5,"div",M),n.Qb(6,"div",M),n.Qb(7,"div",M),n.Qb(8,"div",M),n.Rb(),n.Rb()),2&t){const t=n.ec();n.yc(2),n.kc("ngIf",t.playlist&&t.playlist.tracks&&t.playlist.tracks.length>0)}}const U=[1,"playlists-header"],$=[1,"small","muted","color-type-secondary"],B=[3,"click",4,"ngIf"],j=["class","animated-page",4,"ngIf"],J=[1,"glyph","glyph-edit","small"];function X(t,s){if(1&t){const t=n.Ub();n.Tb(0,"a",x),n.Zb("click",function(s){n.vc(t);const i=n.ec(2);return i.updatePlaylist(i.playlist)}),n.Qb(1,"span",J),n.Rb()}}const z=[1,"glyph","glyph-delete","small"];function K(t,s){if(1&t){const t=n.Ub();n.Tb(0,"a",x),n.Zb("click",function(s){n.vc(t);const i=n.ec(2);return i.removePlaylist(i.playlist)}),n.Qb(1,"span",z),n.Rb()}}const V=[3,"playlist",4,"ngIf"],H=[3,"playlist"];function q(t,s){if(1&t&&n.Qb(0,"mdb-tracklist",H),2&t){const t=n.ec(3);n.kc("playlist",t.playlist)}}function W(t,s){if(1&t&&(n.Tb(0,"div",u),n.Ec(1,q,1,1,"mdb-tracklist",V),n.Rb()),2&t){const t=n.ec(2);n.yc(1),n.kc("ngIf",!t.loading)}}const Y=[1,"col"],_=["routerLink","/artists"],tt=[1,"glyph","glyph-people"],st=["routerLink","/albums"],it=[1,"glyph","glyph-music-album"],ct=["routerLink","/years"],nt=[1,"glyph","glyph-calendar"];function at(t,s){1&t&&(n.Tb(0,"div",u),n.Tb(1,"div",m),n.Tb(2,"div",Y),n.Tb(3,"p"),n.Gc(4," Unfortunately this playlist is empty :( "),n.Qb(5,"br"),n.Gc(6,"Find some tracks from an "),n.Tb(7,"a",_),n.Qb(8,"span",tt),n.Gc(9," artist"),n.Rb(),n.Gc(10,", "),n.Tb(11,"a",st),n.Qb(12,"span",it),n.Gc(13," album"),n.Rb(),n.Gc(14," or a "),n.Tb(15,"a",ct),n.Qb(16,"span",nt),n.Gc(17," year"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb())}function et(t,s){if(1&t&&(n.Tb(0,"div",Q),n.Tb(1,"h4",U),n.Gc(2),n.Tb(3,"span",$),n.Gc(4),n.Rb(),n.Gc(5," \xa0 "),n.Ec(6,X,2,0,"a",B),n.Gc(7," \xa0 "),n.Ec(8,K,2,0,"a",B),n.Rb(),n.Ec(9,W,2,1,"div",j),n.Ec(10,at,18,0,"div",j),n.Rb()),2&t){const t=n.ec();n.yc(2),n.Ic(" ",t.playlist.name," "),n.yc(4),n.Ic("(",t.playlist.tracks.length,")"),n.yc(6),n.kc("ngIf",t.playlist.isOwn),n.yc(8),n.kc("ngIf",t.playlist.isOwn),n.yc(9),n.kc("ngIf",t.playlist&&t.playlist.tracks&&0!==t.playlist.tracks.length),n.yc(10),n.kc("ngIf",t.playlist&&t.playlist.tracks&&0===t.playlist.tracks.length)}}const lt=["sticky","",1,"header-seperator"],rt=["role","form",3,"ngClass"],ot=["sortForm","ngForm"],bt=[1,"form-group","row"],yt=["for","sort",1,"col-12","col-sm-3","col-form-label"],ht=[1,"col","col-sm-9"],pt=["name","sort","id","sort",1,"form-control",3,"ngModel","ngModelChange"],gt=["name","ngModel"],ft=[4,"ngFor","ngForOf"];function ut(t,s){if(1&t&&(n.Tb(0,"option"),n.Gc(1),n.Rb()),2&t){const t=s.$implicit;n.yc(1),n.Hc(t.name)}}const dt=function(t){return{"theme-alt":t}};function mt(t,s){if(1&t){const t=n.Ub();n.Tb(0,"div",Q),n.Tb(1,"h4",lt),n.Gc(2," Select an artist as starting point "),n.Rb(),n.Tb(3,"form",rt,ot),n.Tb(5,"div",bt),n.Tb(6,"label",yt),n.Gc(7,"Select an artist"),n.Rb(),n.Tb(8,"div",ht),n.Tb(9,"select",pt,gt),n.Zb("ngModelChange",function(s){return n.vc(t),n.ec().startingArtistName=s}),n.Zb("ngModelChange",function(s){return n.vc(t),n.ec().onChange(s)}),n.Ec(11,ut,2,1,"option",ft),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()}if(2&t){const t=n.ec();n.yc(3),n.kc("ngClass",n.nc(3,dt,"dark"===t.theme)),n.yc(9),n.kc("ngModel",t.startingArtistName),n.yc(11),n.kc("ngForOf",t.artists)}}const kt=[{path:"",component:(()=>{class t{constructor(t,s,i,c,n,a,e){this.pathService=t,this.coreService=s,this.router=i,this.playerService=c,this.lastfmservice=n,this.configService=a,this.playlistService=e,this.loading=!1,this.username=localStorage.getItem("lastfm-username"),this.showStartingArtist=!1,this.ownPlaylists=[],this.artists=[];const l=this.playerService.getCurrentPlaylist();l&&(this.currentPlaylist=l.playlist,this.trackIndex=l.startIndex,this.setTrack()),this.subscription=this.playerService.playlistAnnounced$.subscribe(t=>{this.currentPlaylist=t.playlist,this.trackIndex=t.startIndex,this.setTrack()}),this.core=this.coreService.getCore(),this.subscription2=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()}),this.theme=a.mode,this.newPlaylist=new p.a}setTrack(){this.track=this.currentPlaylist.tracks[this.trackIndex],this.track&&(this.track.position=0)}ngOnInit(){if(this.pathService.announcePage("Playlists"),this.artists=this.core.artistsList(),this.ownPlaylists=[],localStorage.getItem("customlisttest")){const t=JSON.parse(localStorage.getItem("customlisttest"));t&&t.forEach(t=>{const s=new p.a;s.name=t.name,s.isOwn=!0,t.tracks.forEach(t=>{const i=this.core.getTrackById(t);i&&i.title&&s.tracks.push(i)}),this.ownPlaylists.push(s)})}}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}setPlaylist(t){this.loading=!0,this.showStartingArtist=!1,"current"===t?(this.playlist=this.currentPlaylist,this.loading=!1):"last.fm"===t?this.lastfmservice.getLovedTracks(this.username).subscribe(t=>{this.playlist=this.playlistService.extractTracks(t.lovedtracks.track),this.loading=!1}):"random"===t?(this.playlist=this.playlistService.generateRandom(),this.playlist.isContinues=!0,this.playlist.type=t,this.loading=!1):"radio"===t?this.playlist=this.generateRadio():"artist"===t?this.askForStartingArtist():t instanceof p.a?(this.playlist=t,this.loading=!1):console.info("unknown playlist",t)}generateRadio(){this.lastfmservice.getTopArtists(this.username).subscribe(t=>{this.playlist=this.playlistService.extractArtists(t=t.topartists.artist),this.playlist.isContinues=!0,this.playlist.type="radio",this.loading=!1})}onChange(){const t=this.core.getArtistByName(this.startingArtistName),s=new p.a;s.name=`Artist radio for ${t.name}`,s.tracks=[this.playlistService.getRandomTrackFromList([t])],this.showStartingArtist=!1,this.playlist=s,this.getNextSimilairArtist(t,this.playlist)}getNextSimilairArtist(t,s){this.loading=!0,this.lastfmservice.getSimilairArtists(t).subscribe(t=>{t=t.similarartists.artist,this.loading=!1;const i=[];if(t.forEach(t=>{const s=this.core.getArtistByName(t.name);s&&i.push(s)}),i.length>0){const t=this.playlistService.getNextTrackForPlaylist(i,s);t&&s.tracks.length<this.playlistService.numberOfTracksInAPlaylist&&(s.tracks.push(t),this.getNextSimilairArtist(t.artist,s))}})}askForStartingArtist(){this.loading=!1,this.playlist=null,this.showStartingArtist=!0}}return t.ngComponentDef=n.Jb({type:t,selectors:[["app-playlists"]],factory:function(s){return new(s||t)(n.Pb(h.a),n.Pb(b.a),n.Pb(l.c),n.Pb(r.a),n.Pb(y.a),n.Pb(o.a),n.Pb(g.a))},consts:22,vars:8,template:function(t,s){1&t&&(n.Tb(0,"div",u),n.Tb(1,"div",d),n.Tb(2,"div",m),n.Tb(3,"div",k),n.Tb(4,"h4"),n.Gc(5,"Playlists"),n.Rb(),n.Tb(6,"ul",v),n.Ec(7,A,3,0,"li",T),n.Tb(8,"li",R),n.Ec(9,G,2,0,"a",I),n.Rb(),n.Tb(10,"li",R),n.Tb(11,"a",P),n.Zb("click",function(t){return s.setPlaylist("random")}),n.Gc(12),n.Rb(),n.Rb(),n.Tb(13,"li",R),n.Ec(14,E,2,1,"a",I),n.Rb(),n.Tb(15,"li",R),n.Tb(16,"a",P),n.Zb("click",function(t){return s.setPlaylist("artist")}),n.Gc(17,"Artist radio"),n.Rb(),n.Rb(),n.Ec(18,O,5,1,"li",S),n.Rb(),n.Rb(),n.Ec(19,D,9,1,"div",w),n.Ec(20,et,11,6,"div",w),n.Ec(21,mt,12,5,"div",w),n.Rb(),n.Rb(),n.Rb()),2&t&&(n.yc(7),n.kc("ngIf",s.currentPlaylist),n.yc(9),n.kc("ngIf",s.username&&"mdb-skipped"!==s.username),n.yc(12),n.Ic("",s.playlistService.numberOfTracksInAPlaylist," random tracks"),n.yc(14),n.kc("ngIf",s.username&&"mdb-skipped"!==s.username),n.yc(18),n.kc("ngForOf",s.ownPlaylists),n.yc(19),n.kc("ngIf",s.loading),n.yc(20),n.kc("ngIf",s.playlist&&!s.loading&&!s.showStartingArtist),n.yc(21),n.kc("ngIf",s.showStartingArtist&&!s.loading&&!s.playlist))},directives:[c.l,c.k,f.a,l.d,a.p,a.g,a.h,c.j,a.n,a.f,a.i,a.j,a.o],encapsulation:2}),t})()}],vt=(()=>{class t{}return t.ngModuleDef=n.Nb({type:t}),t.ngInjectorDef=n.Mb({factory:function(s){return new(s||t)},imports:[[l.e.forChild(kt)],l.e]}),t.ngLocaleIdDef="en-GB",t})();l.e.forChild(kt),i.d(s,"PlaylistsModule",function(){return Tt});const Tt=(()=>{class t{}return t.ngModuleDef=n.Nb({type:t}),t.ngInjectorDef=n.Mb({factory:function(s){return new(s||t)},imports:[[c.c,vt,e.a,a.b]]}),t.ngLocaleIdDef="en-GB",t})()}}]);