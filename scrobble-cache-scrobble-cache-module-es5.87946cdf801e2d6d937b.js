!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var n=0;n<i.length;n++){var c=i[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BSpc:function(n,c,b){"use strict";b.r(c),b.d(c,"ScrobbleCacheModule",(function(){return y}));var e=b("ofXK"),o=b("hDf6"),a=b("tyNb"),r=b("ztCj"),s=b("MDLy"),l=b("ktVm"),u=b("t083"),m=b("XtVx"),f=b("fXoL");function h(t,i){if(1&t){var n=f.Mb();f.Lb(0,"li",10),f.Lb(1,"div",2),f.Lb(2,"div",11),f.oc(3),f.Kb(),f.Lb(4,"div",12),f.Lb(5,"span",13),f.oc(6),f.Kb(),f.Kb(),f.Lb(7,"div",14),f.oc(8),f.Kb(),f.Lb(9,"div",15),f.Lb(10,"span",13),f.oc(11),f.Wb(12,"date"),f.Wb(13,"date"),f.Kb(),f.Kb(),f.Lb(14,"div",16),f.Lb(15,"a",17),f.Rb("click",(function(){f.kc(n);var t=i.$implicit;return f.Vb(2).removeFromScrobbleList(t)})),f.Kb(),f.Kb(),f.Kb(),f.Kb()}if(2&t){var c=i.$implicit;f.xb(3),f.qc(" ",c.artist," "),f.xb(3),f.pc(c.album),f.xb(2),f.qc(" ",c.track," "),f.xb(3),f.rc("",f.Yb(12,5,1e3*c.timestamp,"mediumDate")," ",f.Yb(13,8,1e3*c.timestamp,"shortTime"),"")}}function v(t,i){if(1&t){var n=f.Mb();f.Lb(0,"button",18),f.Rb("click",(function(){return f.kc(n),f.Vb(2).scrobbleNow()})),f.oc(1,"Scrobble now"),f.Kb()}}function p(t,i){if(1&t){var n=f.Mb();f.Lb(0,"div",4),f.Lb(1,"h4"),f.oc(2," Tracks in scrobble cache "),f.Lb(3,"span",5),f.oc(4),f.Kb(),f.Lb(5,"a",6),f.Rb("click",(function(){return f.kc(n),f.Vb().scrobbleNow()})),f.oc(6,"Scrobble now"),f.Kb(),f.Kb(),f.Lb(7,"ol",7),f.nc(8,h,16,11,"li",8),f.Kb(),f.nc(9,v,2,0,"button",9),f.Kb()}if(2&t){var c=f.Vb();f.xb(4),f.qc("(",c.manualScrobblingList.length,")"),f.xb(4),f.bc("ngForOf",c.manualScrobblingList),f.xb(1),f.bc("ngIf",c.manualScrobblingList.length>0&&!c.isBusy)}}var g,d,L,S=[{path:"",component:(g=function(){function n(i,c,b,e,o){var a=this;t(this,n),this.pathService=i,this.coreService=c,this.lastFMService=b,this.collectionService=e,this.router=o,this.manualScrobbling=this.booleanState("manual-scrobble-state"),this.isReloading=!1,this.isBusy=!1,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(t){a.ngOnInit()})),this.subscription2=this.lastFMService.manualScrobbleList$.subscribe((function(t){a.manualScrobblingList=t})),Object(r.c)("manual-scrobble-list").then((function(t){a.manualScrobblingList=t||[]}))}var c,b,e;return c=n,(b=[{key:"ngOnInit",value:function(){var t=this;this.pathService.announcePage("Scrobble cache"),Object(r.c)("manual-scrobble-list").then((function(i){t.manualScrobblingList=i||[]}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}},{key:"scrobbleNow",value:function(){var t=this;this.isBusy=!0,Object(r.c)("manual-scrobble-list").then((function(i){t.manualScrobblingList=i||[];var n=t.manualScrobblingList.pop();t.lastFMService.scrobbleCachedTrack(n).subscribe((function(i){Object(r.d)("manual-scrobble-list",t.manualScrobblingList),t.lastFMService.updateManualScrobbleList(),t.manualScrobblingList.length>0?t.scrobbleNow():t.isBusy=!1}))}))}},{key:"removeFromScrobbleList",value:function(t){var i=this;Object(r.c)("manual-scrobble-list").then((function(n){i.manualScrobblingList=n||[];var c=-1;i.manualScrobblingList.forEach((function(i,n){Object.is(i,t)&&(c=n)})),i.manualScrobblingList.splice(c,1),Object(r.d)("manual-scrobble-list",i.manualScrobblingList)}))}},{key:"booleanState",value:function(t){var i=localStorage.getItem(t);return!(!i||"true"!==i)}}])&&i(c.prototype,b),e&&i(c,e),n}(),g.\u0275fac=function(t){return new(t||g)(f.Ib(m.a),f.Ib(l.a),f.Ib(u.a),f.Ib(s.a),f.Ib(a.c))},g.\u0275cmp=f.Cb({type:g,selectors:[["app-scrobble-cache"]],decls:4,vars:1,consts:[[1,"animated-page"],[1,"container"],[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"small","muted","color-type-secondary"],[1,"float-right","d-none","d-sm-inline",3,"click"],[1,"list-items","list-tracks"],["class","list-items-row list-tracks-no-hover",4,"ngFor","ngForOf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"list-items-row","list-tracks-no-hover"],[1,"col-4","col-sm-3"],[1,"col-4","col-sm-3","d-none","d-sm-block"],[1,"small","muted"],[1,"col-8","col-sm-3"],[1,"col-6","col-sm-2"],[1,"col-6","col-sm-1","text-right"],[1,"glyph","glyph-delete",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(f.Lb(0,"div",0),f.Lb(1,"div",1),f.Lb(2,"div",2),f.nc(3,p,10,3,"div",3),f.Kb(),f.Kb(),f.Kb()),2&t&&(f.xb(3),f.bc("ngIf",i.manualScrobblingList&&i.manualScrobbling))},directives:[e.k,e.j],pipes:[e.d],encapsulation:2}),g)}],k=((L=function i(){t(this,i)}).\u0275mod=f.Gb({type:L}),L.\u0275inj=f.Fb({factory:function(t){return new(t||L)},imports:[[a.e.forChild(S)],a.e]}),L),y=((d=function i(){t(this,i)}).\u0275mod=f.Gb({type:d}),d.\u0275inj=f.Fb({factory:function(t){return new(t||d)},imports:[[e.b,k,o.a]]}),d)}}])}();