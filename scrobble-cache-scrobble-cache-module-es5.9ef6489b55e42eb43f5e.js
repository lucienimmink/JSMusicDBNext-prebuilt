!function(){function t(t,c){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}function c(t,c){for(var i=0;i<c.length;i++){var n=c[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{BSpc:function(i,n,b){"use strict";b.r(n),b.d(n,"ScrobbleCacheModule",(function(){return k}));var e=b("ofXK"),o=b("hDf6"),r=b("tyNb"),a=b("ztCj"),s=b("MDLy"),l=b("ktVm"),u=b("t083"),m=b("XtVx"),f=b("fXoL");function h(t,c){if(1&t){var i=f.Mb();f.Lb(0,"li",10),f.Lb(1,"div",2),f.Lb(2,"div",11),f.pc(3),f.Kb(),f.Lb(4,"div",12),f.Lb(5,"span",13),f.pc(6),f.Kb(),f.Kb(),f.Lb(7,"div",14),f.pc(8),f.Kb(),f.Lb(9,"div",15),f.Lb(10,"span",13),f.pc(11),f.Xb(12,"date"),f.Xb(13,"date"),f.Kb(),f.Kb(),f.Lb(14,"div",16),f.Lb(15,"a",17),f.Sb("click",(function(){f.lc(i);var t=c.$implicit;return f.Wb(2).removeFromScrobbleList(t)})),f.Kb(),f.Kb(),f.Kb(),f.Kb()}if(2&t){var n=c.$implicit;f.xb(3),f.rc(" ",n.artist," "),f.xb(3),f.qc(n.album),f.xb(2),f.rc(" ",n.track," "),f.xb(3),f.sc("",f.Zb(12,5,1e3*n.timestamp,"mediumDate")," ",f.Zb(13,8,1e3*n.timestamp,"shortTime"),"")}}function p(t,c){if(1&t){var i=f.Mb();f.Lb(0,"button",18),f.Sb("click",(function(){return f.lc(i),f.Wb(2).scrobbleNow()})),f.pc(1,"Scrobble now"),f.Kb()}}function v(t,c){if(1&t){var i=f.Mb();f.Lb(0,"div",4),f.Lb(1,"h4"),f.pc(2," Tracks in scrobble cache "),f.Lb(3,"span",5),f.pc(4),f.Kb(),f.Lb(5,"a",6),f.Sb("click",(function(){return f.lc(i),f.Wb().scrobbleNow()})),f.pc(6,"Scrobble now"),f.Kb(),f.Kb(),f.Lb(7,"ol",7),f.oc(8,h,16,11,"li",8),f.Kb(),f.oc(9,p,2,0,"button",9),f.Kb()}if(2&t){var n=f.Wb();f.xb(4),f.rc("(",n.manualScrobblingList.length,")"),f.xb(4),f.cc("ngForOf",n.manualScrobblingList),f.xb(1),f.cc("ngIf",n.manualScrobblingList.length>0&&!n.isBusy)}}var g,S,d,L=[{path:"",component:(g=function(){function i(c,n,b,e,o){var r=this;t(this,i),this.pathService=c,this.coreService=n,this.lastFMService=b,this.collectionService=e,this.router=o,this.manualScrobbling=this.booleanState("manual-scrobble-state"),this.isReloading=!1,this.isBusy=!1,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(t){r.ngOnInit()})),this.subscription2=this.lastFMService.manualScrobbleList$.subscribe((function(t){r.manualScrobblingList=t})),Object(a.c)("manual-scrobble-list").then((function(t){r.manualScrobblingList=t||[]}))}var n,b,e;return n=i,(b=[{key:"ngOnInit",value:function(){var t=this;this.pathService.announcePage("Scrobble cache"),Object(a.c)("manual-scrobble-list").then((function(c){t.manualScrobblingList=c||[]}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()}},{key:"scrobbleNow",value:function(){var t=this;this.isBusy=!0,Object(a.c)("manual-scrobble-list").then((function(c){t.manualScrobblingList=c||[];var i=t.manualScrobblingList.pop();t.lastFMService.scrobbleCachedTrack(i).subscribe((function(c){Object(a.d)("manual-scrobble-list",t.manualScrobblingList),t.lastFMService.updateManualScrobbleList(),t.manualScrobblingList.length>0?t.scrobbleNow():t.isBusy=!1}))}))}},{key:"removeFromScrobbleList",value:function(t){var c=this;Object(a.c)("manual-scrobble-list").then((function(i){c.manualScrobblingList=i||[];var n=-1;c.manualScrobblingList.forEach((function(c,i){Object.is(c,t)&&(n=i)})),c.manualScrobblingList.splice(n,1),Object(a.d)("manual-scrobble-list",c.manualScrobblingList)}))}},{key:"booleanState",value:function(t){var c=localStorage.getItem(t);return!(!c||"true"!==c)}}])&&c(n.prototype,b),e&&c(n,e),i}(),g.\u0275fac=function(t){return new(t||g)(f.Ib(m.a),f.Ib(l.a),f.Ib(u.a),f.Ib(s.a),f.Ib(r.c))},g.\u0275cmp=f.Cb({type:g,selectors:[["app-scrobble-cache"]],decls:4,vars:1,consts:[[1,"animated-page"],[1,"container"],[1,"row"],["class","col",4,"ngIf"],[1,"col"],[1,"small","muted","color-type-secondary"],[1,"float-right","d-none","d-sm-inline",3,"click"],[1,"list-items","list-tracks"],["class","list-items-row list-tracks-no-hover",4,"ngFor","ngForOf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"list-items-row","list-tracks-no-hover"],[1,"col-4","col-sm-3"],[1,"col-4","col-sm-3","d-none","d-sm-block"],[1,"small","muted"],[1,"col-8","col-sm-3"],[1,"col-6","col-sm-2"],[1,"col-6","col-sm-1","text-right"],[1,"glyph","glyph-delete",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,c){1&t&&(f.Lb(0,"div",0),f.Lb(1,"div",1),f.Lb(2,"div",2),f.oc(3,v,10,3,"div",3),f.Kb(),f.Kb(),f.Kb()),2&t&&(f.xb(3),f.cc("ngIf",c.manualScrobblingList&&c.manualScrobbling))},directives:[e.k,e.j],pipes:[e.d],encapsulation:2}),g)}],y=((d=function c(){t(this,c)}).\u0275mod=f.Gb({type:d}),d.\u0275inj=f.Fb({factory:function(t){return new(t||d)},imports:[[r.e.forChild(L)],r.e]}),d),k=((S=function c(){t(this,c)}).\u0275mod=f.Gb({type:S}),S.\u0275inj=f.Fb({factory:function(t){return new(t||S)},imports:[[e.b,y,o.a]]}),S)}}])}();