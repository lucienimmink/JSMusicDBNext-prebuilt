function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(i,t){for(var n=0;n<t.length;n++){var c=t[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}function _createClass(i,t,n){return t&&_defineProperties(i.prototype,t),n&&_defineProperties(i,n),i}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{jJnS:function(i,t,n){"use strict";n.r(t);var c=n("ofXK"),a=n("fXoL"),s=n("hDf6"),e=n("tyNb"),r=(n("hR/0"),n("KI15")),l=n("ufXC"),o=n("OgP6"),u=n("ktVm"),b=n("XtVx"),m=n("cpgm"),p=["class","animated-page",4,"ngIf"],f=[1,"animated-page"],h=[1,"jumbotron","theme-light",3,"ngClass"],g=[1,"container"],d=[1,"row","albumdetail"],v=[1,"col-4","col-md-3","col-lg-2",3,"ngClass"],y=[3,"album","artist"],T=[1,"col-8","col-md-9","col-lg-10",3,"ngClass"],k=[1,"d-none","d-sm-block"],A=[4,"ngIf"],S=[1,"d-none","d-sm-inline"],V=[1,"btn","btn-primary",3,"click"],w=[1,"glyph","glyph-play"],C=[1,"d-none","d-md-inline"],I=[1,"btn","btn-secondary",3,"click"],P=[1,"glyph","glyph-music-info"],J=[1,"row"],D=[1,"col"],O=["class","list-group list-tracks",4,"ngFor","ngForOf"];function L(i,t){if(1&i&&(a.Vb(0,"span"),a.Jc(1),a.Tb()),2&i){var n=a.gc(2);a.Ac(1),a.Lc("",n.album.year," \u2022 ")}}var F=[1,"list-group","list-tracks"],R=["class","list-items-row disc-row header-seperator",3,"ngClass",4,"ngIf"],H=["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],N=[1,"list-items-row","disc-row","header-seperator",3,"ngClass"],_=function(i){return{"first-disc":i}};function $(i,t){if(1&i&&(a.Vb(0,"li",N),a.Jc(1),a.Tb()),2&i){var n=a.gc().$implicit;a.mc("ngClass",a.pc(2,_,1==n[0].disc)),a.Ac(1),a.Lc(" Disc ",n[0].disc," ")}}var j=[1,"list-group-item",3,"ngClass"],x=[1,"details","row",3,"click"],E=[1,"col-2","col-sm-1"],K=[1,"col-7","col-sm-10"],M=[1,"small","muted","color-type-secondary"],U=[1,"col-3","col-sm-1","text-right"];function X(i,t){if(1&i&&(a.Vb(0,"span"),a.Jc(1),a.Tb()),2&i){var n=a.gc().$implicit;a.Ac(1),a.Kc(n.number)}}var q=[1,"glyph","glyph-pause"];function B(i,t){1&i&&(a.Vb(0,"span"),a.Sb(1,"span",q),a.Tb())}function Q(i,t){1&i&&(a.Vb(0,"span"),a.Sb(1,"span",w),a.Tb())}function W(i,t){if(1&i&&(a.Vb(0,"span"),a.Sb(1,"br"),a.Vb(2,"span",M),a.Jc(3),a.Tb(),a.Tb()),2&i){var n=a.gc().$implicit;a.Ac(3),a.Kc(n.type)}}function G(i,t){if(1&i&&(a.Vb(0,"span"),a.Sb(1,"br"),a.Vb(2,"span",M),a.Jc(3),a.hc(4,"timeFormat"),a.Tb(),a.Tb()),2&i){var n=a.gc().$implicit;a.Ac(3),a.Lc(" ",a.ic(4,1,n.position)," \xa0 ")}}var Y=function(i,t,n){return{active:i,showActions:t,hq:n}};function z(i,t){if(1&i){var n=a.Wb();a.Vb(0,"li",j),a.Vb(1,"div",x),a.bc("click",(function(i){a.xc(n);var c=t.$implicit;return a.gc(3).onSelect(c,i)})),a.Vb(2,"div",E),a.Hc(3,X,2,1,"span",A),a.Hc(4,B,2,0,"span",A),a.Hc(5,Q,2,0,"span",A),a.Tb(),a.Vb(6,"div",K),a.Jc(7),a.Sb(8,"br"),a.Vb(9,"span",M),a.Jc(10),a.Tb(),a.Tb(),a.Vb(11,"div",U),a.Jc(12),a.hc(13,"timeFormat"),a.Hc(14,W,4,1,"span",A),a.Hc(15,G,5,3,"span",A),a.Tb(),a.Tb(),a.Tb()}if(2&i){var c=t.$implicit,s=a.gc(3);a.mc("ngClass",a.rc(11,Y,c.isPlaying||c.isPaused,c.showActions,"flac"===c.type)),a.Ac(3),a.mc("ngIf",!c.isPlaying&&!c.isPaused&&0!==c.number),a.Ac(4),a.mc("ngIf",!c.isPlaying&&c.isPaused),a.Ac(5),a.mc("ngIf",c.isPlaying&&!c.isPaused),a.Ac(7),a.Lc(" ",c.title," "),a.Ac(10),a.Lc(" ",c.trackArtist," "),a.Ac(12),a.Lc(" ",a.ic(13,9,c.duration)," "),a.Ac(14),a.mc("ngIf","mixed"===s.album.type&&!c.isPlaying),a.Ac(15),a.mc("ngIf",c.isPlaying)}}function Z(i,t){if(1&i&&(a.Vb(0,"ol",F),a.Hc(1,$,2,4,"li",R),a.Hc(2,z,16,15,"li",H),a.Tb()),2&i){var n=t.$implicit,c=a.gc(2);a.Ac(1),a.mc("ngIf",c.album.sortedDiscs.length>1),a.Ac(2),a.mc("ngForOf",n)}}var ii=[1,"alert","alert-warning"];function ti(i,t){1&i&&(a.Vb(0,"div"),a.Sb(1,"br"),a.Vb(2,"div",ii),a.Vb(3,"strong"),a.Jc(4,"Warning!"),a.Tb(),a.Jc(5," This album cannot be played since FLAC support is lacking."),a.Tb(),a.Tb())}var ni=function(i){return{shrunk:i}};function ci(i,t){if(1&i){var n=a.Wb();a.Vb(0,"div",f),a.Vb(1,"div",h),a.Vb(2,"div",g),a.Vb(3,"div",d),a.Vb(4,"div",v),a.Sb(5,"album-art",y),a.Tb(),a.Vb(6,"div",T),a.Vb(7,"h2"),a.Jc(8),a.Tb(),a.Vb(9,"h3",k),a.Jc(10),a.Tb(),a.Vb(11,"h4"),a.Hc(12,L,2,1,"span",A),a.Jc(13),a.Vb(14,"span",S),a.Jc(15),a.hc(16,"timeFormat"),a.Tb(),a.Tb(),a.Vb(17,"h5"),a.Vb(18,"button",V),a.bc("click",(function(i){return a.xc(n),a.gc().playAlbum()})),a.Sb(19,"span",w),a.Jc(20," Play "),a.Vb(21,"span",C),a.Jc(22,"album"),a.Tb(),a.Tb(),a.Jc(23,"\xa0\xa0\xa0 "),a.Vb(24,"button",I),a.bc("click",(function(i){return a.xc(n),a.gc().addToQueue()})),a.Sb(25,"span",P),a.Jc(26," queue "),a.Vb(27,"span",C),a.Jc(28,"album"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Vb(29,"div",g),a.Vb(30,"div",J),a.Vb(31,"div",D),a.Hc(32,Z,3,2,"ol",O),a.Hc(33,ti,6,0,"div",A),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&i){var c=a.gc();a.Ac(1),a.mc("ngClass",a.pc(15,ni,c.isShrunk)),a.Ac(4),a.mc("ngClass",a.pc(17,ni,c.isShrunk)),a.Ac(5),a.mc("album",c.album.name)("artist",c.album.artist.albumArtist||c.album.artist.name),a.Ac(6),a.mc("ngClass",a.pc(19,ni,c.isShrunk)),a.Ac(8),a.Kc(c.album.name),a.Ac(10),a.Lc(" ",c.album.artist.albumArtist||c.album.artist.name," "),a.Ac(12),a.mc("ngIf",c.album.year&&0!==c.album.year),a.Ac(13),a.Lc(" songs: ",c.album.tracks.length," "),a.Ac(15),a.Mc(" \u2022 ",a.ic(16,13,c.totalRunningTime())," \u2022 ",c.album.type,""),a.Ac(32),a.mc("ngForOf",c.album.sortedDiscs),a.Ac(33),a.mc("ngIf","flac"===c.album.type&&!c.isFlacSupported)}}var ai,si,ei=[{path:"",component:(ai=function(){function i(t,n,c,a,s,e){var r=this;_classCallCheck(this,i),this.coreService=t,this.router=n,this.pathService=c,this.playerService=a,this.route=s,this.configService=e,this.ownPlaylists=[],this.albumName="",this.artistName="",this.isSwiping=!1,this.isShrunk=!1,this.isFlacSupported=!0,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(i){r.ngOnInit()})),this.artistName=decodeURIComponent(this.route.snapshot.params.artist),this.albumName=decodeURIComponent(this.route.snapshot.params.album),this.route.params.subscribe((function(i){r.artistName=decodeURIComponent(i.artist),r.albumName=decodeURIComponent(i.album),r.ngOnInit()})),this.theme=e.mode}return _createClass(i,[{key:"ngOnInit",value:function(){var i=this;if(this.album=this.core.albums[this.artistName+"|"+this.albumName],this.album){this.album.sortedDiscs=[];var t=Object.keys(this.album.discs),n=[];t.forEach((function(i){var t=i.substring(5);n.push({nr:t,id:i})})),(n=n.sort((function(i,t){return i.nr<t.nr?-1:1}))).forEach((function(t){i.album.sortedDiscs.push(i.album.discs[t.id])})),this.pathService.announcePath({artist:this.album.artist,album:this.album,letter:this.album.artist.letter})}if(this.ownPlaylists=[],localStorage.getItem("customlisttest")){var c=JSON.parse(localStorage.getItem("customlisttest"));c&&c.forEach((function(t){var n=new r.a;n.isOwn=!0,n.name=t.name,n.tracks=t.tracks,i.ownPlaylists.push(n)}))}var a=document.querySelector("audio").canPlayType("audio/flac");this.isFlacSupported="probably"===a||"maybe"===a}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSelect",value:function(i,t){this.isSwiping||this.playerService.doPlayAlbum(this.album,this.album.tracks.indexOf(i),!0,!1)}},{key:"playAlbum",value:function(){this.isSwiping||this.playerService.doPlayAlbum(this.album,0,!0,!1)}},{key:"addToQueue",value:function(){this.isSwiping||this.playerService.doQueueAlbum(this.album)}},{key:"navigateToArtist",value:function(i){this.router.navigate(["Artist",{letter:i.letter.escapedLetter,artist:i.sortName}])}},{key:"swipe",value:function(i,t,n){var c=this;n.preventDefault(),this.isSwiping=!0,setTimeout((function(){c.isSwiping=!1}),5),i.showActions=t}},{key:"totalRunningTime",value:function(){var i=0;return this.album.tracks.forEach((function(t){i+=t.duration})),i}},{key:"onScroll",value:function(i){this.isShrunk=window.scrollY>50}}]),i}(),ai.ngComponentDef=a.Lb({type:ai,selectors:[["app-album-detail"]],factory:function(i){return new(i||ai)(a.Rb(u.a),a.Rb(e.c),a.Rb(b.a),a.Rb(l.a),a.Rb(e.a),a.Rb(o.a))},hostBindings:function(i,t,n){1&i&&a.bc("scroll",(function(i){return t.onScroll(i)}),!1,a.wc)},consts:1,vars:1,template:function(i,t){1&i&&a.Hc(0,ci,34,21,"div",p),2&i&&a.mc("ngIf",t.album)},directives:[c.l,c.j,c.k],pipes:[m.a],encapsulation:2}),ai)}],ri=((si=function i(){_classCallCheck(this,i)}).ngModuleDef=a.Pb({type:si}),si.ngInjectorDef=a.Ob({factory:function(i){return new(i||si)},imports:[[e.e.forChild(ei)],e.e]}),si.ngLocaleIdDef="en-GB",si);e.e.forChild(ei),n.d(t,"AlbumDetailModule",(function(){return oi}));var li,oi=((li=function i(){_classCallCheck(this,i)}).ngModuleDef=a.Pb({type:li}),li.ngInjectorDef=a.Ob({factory:function(i){return new(i||li)},imports:[[c.c,ri,s.a]]}),li.ngLocaleIdDef="en-GB",li)}}]);