(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{kez3:function(t,i,s){"use strict";s.r(i);var a=s("Valr"),n=s("TYT/"),r=s("QJY3"),c=s("hDf6"),e=s("DUip"),l=s("ufXC"),o=s("OgP6"),b=s("ktVm"),p=s("t083"),g=s("XtVx"),f=s("KI15"),u=s("Gcu2"),h=s("Oz9T"),y=[1,"animated-page"],m=[1,"container"],d=[1,"row"],v=[1,"col-12","col-lg-3","playlists-lg-fixed"],k=[1,"nav","flex-column"],T=["class","nav-item",4,"ngIf"],S=[1,"nav-item"],A=["class","btn btn-link px-0",3,"click",4,"ngIf"],V=[1,"btn","btn-link","px-0",3,"click"],I=["class","nav-item",4,"ngFor","ngForOf"],P=["class","col-12 col-lg-9 offset-lg-3",4,"ngIf"];function w(t,i){if(1&t){var s=n.Wb();n.Vb(0,"li",S),n.Vb(1,"a",V),n.bc("click",(function(t){return n.xc(s),n.gc().setPlaylist("current")})),n.Jc(2,"Current playlist"),n.Tb(),n.Tb()}}function J(t,i){if(1&t){var s=n.Wb();n.Vb(0,"a",V),n.bc("click",(function(t){return n.xc(s),n.gc().setPlaylist("last.fm")})),n.Jc(1,"Loved tracks on last.fm"),n.Tb()}}function x(t,i){if(1&t){var s=n.Wb();n.Vb(0,"a",V),n.bc("click",(function(t){return n.xc(s),n.gc().setPlaylist("radio")})),n.Jc(1),n.Tb()}if(2&t){var a=n.gc();n.Ac(1),n.Lc("",a.playlistService.numberOfTracksInAPlaylist," tracks by preference")}}var O=[3,"click"],C=[1,"glyph","glyph-delete"];function L(t,i){if(1&t){var s=n.Wb();n.Vb(0,"li",S),n.Vb(1,"a",O),n.bc("click",(function(t){n.xc(s);var a=i.$implicit;return n.gc().setPlaylist(a)})),n.Jc(2),n.Vb(3,"a",O),n.bc("click",(function(t){n.xc(s);var a=i.$implicit;return n.gc().removePlaylist(a)})),n.Sb(4,"span",C),n.Tb(),n.Tb(),n.Tb()}if(2&t){var a=i.$implicit;n.Ac(2),n.Lc("",a.name," ")}}var H=[1,"col-12","col-lg-9","offset-lg-3"],F=["class","small muted",4,"ngIf"],R=[1,"progress-bar"],D=[1,"progress-circle"],N=[1,"small","muted"];function M(t,i){if(1&t&&(n.Vb(0,"p",N),n.Jc(1),n.Tb()),2&t){var s=n.gc(2);n.Ac(1),n.Lc("Tracks found: ",s.playlist.tracks.length,"")}}function W(t,i){if(1&t&&(n.Vb(0,"div",H),n.Sb(1,"br"),n.Hc(2,M,2,1,"p",F),n.Vb(3,"div",R),n.Sb(4,"div",D),n.Sb(5,"div",D),n.Sb(6,"div",D),n.Sb(7,"div",D),n.Sb(8,"div",D),n.Tb(),n.Tb()),2&t){var s=n.gc();n.Ac(2),n.mc("ngIf",s.playlist&&s.playlist.tracks&&s.playlist.tracks.length>0)}}var $=[1,"playlists-header"],B=[1,"small","muted","color-type-secondary"],j=[3,"click",4,"ngIf"],E=["class","animated-page",4,"ngIf"],G=[1,"glyph","glyph-edit","small"];function z(t,i){if(1&t){var s=n.Wb();n.Vb(0,"a",O),n.bc("click",(function(t){n.xc(s);var i=n.gc(2);return i.updatePlaylist(i.playlist)})),n.Sb(1,"span",G),n.Tb()}}var K=[1,"glyph","glyph-delete","small"];function U(t,i){if(1&t){var s=n.Wb();n.Vb(0,"a",O),n.bc("click",(function(t){n.xc(s);var i=n.gc(2);return i.removePlaylist(i.playlist)})),n.Sb(1,"span",K),n.Tb()}}var X=[3,"playlist",4,"ngIf"],Y=[3,"playlist"];function Q(t,i){if(1&t&&n.Sb(0,"mdb-tracklist",Y),2&t){var s=n.gc(3);n.mc("playlist",s.playlist)}}function q(t,i){if(1&t&&(n.Vb(0,"div",y),n.Hc(1,Q,1,1,"mdb-tracklist",X),n.Tb()),2&t){var s=n.gc(2);n.Ac(1),n.mc("ngIf",!s.loading)}}var Z=[1,"col"],_=["routerLink","/artists"],tt=[1,"glyph","glyph-people"],it=["routerLink","/albums"],st=[1,"glyph","glyph-music-album"],at=["routerLink","/years"],nt=[1,"glyph","glyph-calendar"];function rt(t,i){1&t&&(n.Vb(0,"div",y),n.Vb(1,"div",d),n.Vb(2,"div",Z),n.Vb(3,"p"),n.Jc(4," Unfortunately this playlist is empty :( "),n.Sb(5,"br"),n.Jc(6,"Find some tracks from an "),n.Vb(7,"a",_),n.Sb(8,"span",tt),n.Jc(9," artist"),n.Tb(),n.Jc(10,", "),n.Vb(11,"a",it),n.Sb(12,"span",st),n.Jc(13," album"),n.Tb(),n.Jc(14," or a "),n.Vb(15,"a",at),n.Sb(16,"span",nt),n.Jc(17," year"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb())}function ct(t,i){if(1&t&&(n.Vb(0,"div",H),n.Vb(1,"h4",$),n.Jc(2),n.Vb(3,"span",B),n.Jc(4),n.Tb(),n.Jc(5," \xa0 "),n.Hc(6,z,2,0,"a",j),n.Jc(7," \xa0 "),n.Hc(8,U,2,0,"a",j),n.Tb(),n.Hc(9,q,2,1,"div",E),n.Hc(10,rt,18,0,"div",E),n.Tb()),2&t){var s=n.gc();n.Ac(2),n.Lc(" ",s.playlist.name," "),n.Ac(4),n.Lc("(",s.playlist.tracks.length,")"),n.Ac(6),n.mc("ngIf",s.playlist.isOwn),n.Ac(8),n.mc("ngIf",s.playlist.isOwn),n.Ac(9),n.mc("ngIf",s.playlist&&s.playlist.tracks&&0!==s.playlist.tracks.length),n.Ac(10),n.mc("ngIf",s.playlist&&s.playlist.tracks&&0===s.playlist.tracks.length)}}var et=["sticky","",1,"header-seperator"],lt=["role","form",3,"ngClass"],ot=["sortForm","ngForm"],bt=[1,"form-group","row"],pt=["for","sort",1,"col-12","col-sm-3","col-form-label"],gt=[1,"col","col-sm-9"],ft=["name","sort","id","sort",1,"form-control",3,"ngModel","ngModelChange"],ut=["name","ngModel"],ht=[4,"ngFor","ngForOf"];function yt(t,i){if(1&t&&(n.Vb(0,"option"),n.Jc(1),n.Tb()),2&t){var s=i.$implicit;n.Ac(1),n.Kc(s.name)}}var mt=function(t){return{"theme-alt":t}};function dt(t,i){if(1&t){var s=n.Wb();n.Vb(0,"div",H),n.Vb(1,"h4",et),n.Jc(2," Select an artist as starting point "),n.Tb(),n.Vb(3,"form",lt,ot),n.Vb(5,"div",bt),n.Vb(6,"label",pt),n.Jc(7,"Select an artist"),n.Tb(),n.Vb(8,"div",gt),n.Vb(9,"select",ft,ut),n.bc("ngModelChange",(function(t){return n.xc(s),n.gc().startingArtistName=t})),n.bc("ngModelChange",(function(t){return n.xc(s),n.gc().onChange(t)})),n.Hc(11,yt,2,1,"option",ht),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){var a=n.gc();n.Ac(3),n.mc("ngClass",n.pc(3,mt,"dark"===a.theme)),n.Ac(9),n.mc("ngModel",a.startingArtistName),n.Ac(11),n.mc("ngForOf",a.artists)}}var vt=[{path:"",component:function(){function t(t,i,s,a,n,r,c){var e=this;this.pathService=t,this.coreService=i,this.router=s,this.playerService=a,this.lastfmservice=n,this.configService=r,this.playlistService=c,this.loading=!1,this.username=localStorage.getItem("lastfm-username"),this.showStartingArtist=!1,this.ownPlaylists=[],this.artists=[];var l=this.playerService.getCurrentPlaylist();l&&(this.currentPlaylist=l.playlist,this.trackIndex=l.startIndex,this.setTrack()),this.subscription=this.playerService.playlistAnnounced$.subscribe((function(t){e.currentPlaylist=t.playlist,e.trackIndex=t.startIndex,e.setTrack()})),this.core=this.coreService.getCore(),this.subscription2=this.core.coreParsed$.subscribe((function(t){e.ngOnInit()})),this.theme=r.mode,this.newPlaylist=new f.a}return t.prototype.setTrack=function(){this.track=this.currentPlaylist.tracks[this.trackIndex],this.track&&(this.track.position=0)},t.prototype.ngOnInit=function(){var t=this;if(this.pathService.announcePage("Playlists"),this.artists=this.core.artistsList(),this.ownPlaylists=[],localStorage.getItem("customlisttest")){var i=JSON.parse(localStorage.getItem("customlisttest"));i&&i.forEach((function(i){var s=new f.a;s.name=i.name,s.isOwn=!0,i.tracks.forEach((function(i){var a=t.core.getTrackById(i);a&&a.title&&s.tracks.push(a)})),t.ownPlaylists.push(s)}))}},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()},t.prototype.setPlaylist=function(t){var i=this;this.loading=!0,this.showStartingArtist=!1,"current"===t?(this.playlist=this.currentPlaylist,this.loading=!1):"last.fm"===t?this.lastfmservice.getLovedTracks(this.username).subscribe((function(t){i.playlist=i.playlistService.extractTracks(t.lovedtracks.track),i.loading=!1})):"random"===t?(this.playlist=this.playlistService.generateRandom(),this.playlist.isContinues=!0,this.playlist.type=t,this.loading=!1):"radio"===t?this.playlist=this.generateRadio():"artist"===t?this.askForStartingArtist():t instanceof f.a?(this.playlist=t,this.loading=!1):console.info("unknown playlist",t)},t.prototype.generateRadio=function(){var t=this;this.lastfmservice.getTopArtists(this.username).subscribe((function(i){t.playlist=t.playlistService.extractArtists(i=i.topartists.artist),t.playlist.isContinues=!0,t.playlist.type="radio",t.loading=!1}))},t.prototype.onChange=function(){var t=this.core.getArtistByName(this.startingArtistName),i=new f.a;i.name="Artist radio for "+t.name,i.tracks=[this.playlistService.getRandomTrackFromList([t])],this.showStartingArtist=!1,this.playlist=i,this.getNextSimilairArtist(t,this.playlist)},t.prototype.getNextSimilairArtist=function(t,i){var s=this;this.loading=!0,this.lastfmservice.getSimilairArtists(t).subscribe((function(t){t=t.similarartists.artist,s.loading=!1;var a=[];if(t.forEach((function(t){var i=s.core.getArtistByName(t.name);i&&a.push(i)})),a.length>0){var n=s.playlistService.getNextTrackForPlaylist(a,i);n&&i.tracks.length<s.playlistService.numberOfTracksInAPlaylist&&(i.tracks.push(n),s.getNextSimilairArtist(n.artist,i))}}))},t.prototype.askForStartingArtist=function(){this.loading=!1,this.playlist=null,this.showStartingArtist=!0},t.ngComponentDef=n.Lb({type:t,selectors:[["app-playlists"]],factory:function(i){return new(i||t)(n.Rb(g.a),n.Rb(b.a),n.Rb(e.c),n.Rb(l.a),n.Rb(p.a),n.Rb(o.a),n.Rb(u.a))},consts:22,vars:8,template:function(t,i){1&t&&(n.Vb(0,"div",y),n.Vb(1,"div",m),n.Vb(2,"div",d),n.Vb(3,"div",v),n.Vb(4,"h4"),n.Jc(5,"Playlists"),n.Tb(),n.Vb(6,"ul",k),n.Hc(7,w,3,0,"li",T),n.Vb(8,"li",S),n.Hc(9,J,2,0,"a",A),n.Tb(),n.Vb(10,"li",S),n.Vb(11,"a",V),n.bc("click",(function(t){return i.setPlaylist("random")})),n.Jc(12),n.Tb(),n.Tb(),n.Vb(13,"li",S),n.Hc(14,x,2,1,"a",A),n.Tb(),n.Vb(15,"li",S),n.Vb(16,"a",V),n.bc("click",(function(t){return i.setPlaylist("artist")})),n.Jc(17,"Artist radio"),n.Tb(),n.Tb(),n.Hc(18,L,5,1,"li",I),n.Tb(),n.Tb(),n.Hc(19,W,9,1,"div",P),n.Hc(20,ct,11,6,"div",P),n.Hc(21,dt,12,5,"div",P),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Ac(7),n.mc("ngIf",i.currentPlaylist),n.Ac(9),n.mc("ngIf",i.username&&"mdb-skipped"!==i.username),n.Ac(12),n.Lc("",i.playlistService.numberOfTracksInAPlaylist," random tracks"),n.Ac(14),n.mc("ngIf",i.username&&"mdb-skipped"!==i.username),n.Ac(18),n.mc("ngForOf",i.ownPlaylists),n.Ac(19),n.mc("ngIf",i.loading),n.Ac(20),n.mc("ngIf",i.playlist&&!i.loading&&!i.showStartingArtist),n.Ac(21),n.mc("ngIf",i.showStartingArtist&&!i.loading&&!i.playlist))},directives:[a.l,a.k,h.a,e.d,r.p,r.g,r.h,a.j,r.n,r.f,r.i,r.j,r.o],encapsulation:2}),t}()}],kt=function(){function t(){}return t.ngModuleDef=n.Pb({type:t}),t.ngInjectorDef=n.Ob({factory:function(i){return new(i||t)},imports:[[e.e.forChild(vt)],e.e]}),t.ngLocaleIdDef="en-GB",t}();e.e.forChild(vt),s.d(i,"PlaylistsModule",(function(){return Tt}));var Tt=function(){function t(){}return t.ngModuleDef=n.Pb({type:t}),t.ngInjectorDef=n.Ob({factory:function(i){return new(i||t)},imports:[[a.c,kt,c.a,r.b]]}),t.ngLocaleIdDef="en-GB",t}()}}]);