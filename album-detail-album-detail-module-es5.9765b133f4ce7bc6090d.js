!function(){function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{jJnS:function(n,a,s){"use strict";s.r(a),s.d(a,"AlbumDetailModule",(function(){return q}));var e=s("ofXK"),c=s("hDf6"),b=s("tyNb"),o=(s("hR/0"),s("KI15")),r=s("ufXC"),l=s("OgP6"),u=s("ktVm"),m=s("XtVx"),p=s("fXoL"),h=s("cpgm");function f(i,t){if(1&i&&(p.Lb(0,"span"),p.oc(1),p.Kb()),2&i){var n=p.Vb(2);p.xb(1),p.qc("",n.album.year," \u2022 ")}}var d=function(i){return{"first-disc":i}};function g(i,t){if(1&i&&(p.Lb(0,"li",22),p.oc(1),p.Kb()),2&i){var n=p.Vb().$implicit;p.bc("ngClass",p.ec(2,d,1==n[0].disc)),p.xb(1),p.qc(" Disc ",n[0].disc," ")}}function v(i,t){if(1&i&&(p.Lb(0,"span"),p.oc(1),p.Kb()),2&i){var n=p.Vb().$implicit;p.xb(1),p.pc(n.number)}}function y(i,t){1&i&&(p.Lb(0,"span"),p.Jb(1,"span",29),p.Kb())}function k(i,t){1&i&&(p.Lb(0,"span"),p.Jb(1,"span",12),p.Kb())}function L(i,t){if(1&i&&(p.Lb(0,"span"),p.Jb(1,"br"),p.Lb(2,"span",27),p.oc(3),p.Kb(),p.Kb()),2&i){var n=p.Vb().$implicit;p.xb(3),p.pc(n.type)}}function K(i,t){if(1&i&&(p.Lb(0,"span"),p.Jb(1,"br"),p.Lb(2,"span",27),p.oc(3),p.Wb(4,"timeFormat"),p.Kb(),p.Kb()),2&i){var n=p.Vb().$implicit;p.xb(3),p.qc(" ",p.Xb(4,1,n.position)," \xa0 ")}}var w=function(i,t,n){return{active:i,showActions:t,hq:n}};function S(i,t){if(1&i){var n=p.Mb();p.Lb(0,"li",23),p.Lb(1,"div",24),p.Rb("click",(function(i){p.kc(n);var a=t.$implicit;return p.Vb(3).onSelect(a,i)})),p.Lb(2,"div",25),p.nc(3,v,2,1,"span",9),p.nc(4,y,2,0,"span",9),p.nc(5,k,2,0,"span",9),p.Kb(),p.Lb(6,"div",26),p.oc(7),p.Jb(8,"br"),p.Lb(9,"span",27),p.oc(10),p.Kb(),p.Kb(),p.Lb(11,"div",28),p.oc(12),p.Wb(13,"timeFormat"),p.nc(14,L,4,1,"span",9),p.nc(15,K,5,3,"span",9),p.Kb(),p.Kb(),p.Kb()}if(2&i){var a=t.$implicit,s=p.Vb(3);p.bc("ngClass",p.gc(11,w,a.isPlaying||a.isPaused,a.showActions,"flac"===a.type)),p.xb(3),p.bc("ngIf",!a.isPlaying&&!a.isPaused&&0!==a.number),p.xb(1),p.bc("ngIf",!a.isPlaying&&a.isPaused),p.xb(1),p.bc("ngIf",a.isPlaying&&!a.isPaused),p.xb(2),p.qc(" ",a.title," "),p.xb(3),p.qc(" ",a.trackArtist," "),p.xb(2),p.qc(" ",p.Xb(13,9,a.duration)," "),p.xb(2),p.bc("ngIf","mixed"===s.album.type&&!a.isPlaying),p.xb(1),p.bc("ngIf",a.isPlaying)}}function x(i,t){if(1&i&&(p.Lb(0,"ol",19),p.nc(1,g,2,4,"li",20),p.nc(2,S,16,15,"li",21),p.Kb()),2&i){var n=t.$implicit,a=p.Vb(2);p.xb(1),p.bc("ngIf",a.album.sortedDiscs.length>1),p.xb(1),p.bc("ngForOf",n)}}function I(i,t){1&i&&(p.Lb(0,"div"),p.Jb(1,"br"),p.Lb(2,"div",30),p.Lb(3,"strong"),p.oc(4,"Warning!"),p.Kb(),p.oc(5," This album cannot be played since FLAC support is lacking."),p.Kb(),p.Kb())}var C=function(i){return{shrunk:i}};function P(i,t){if(1&i){var n=p.Mb();p.Lb(0,"div",1),p.Lb(1,"div",2),p.Lb(2,"div",3),p.Lb(3,"div",4),p.Lb(4,"div",5),p.Jb(5,"album-art",6),p.Kb(),p.Lb(6,"div",7),p.Lb(7,"h2"),p.oc(8),p.Kb(),p.Lb(9,"h3",8),p.oc(10),p.Kb(),p.Lb(11,"h4"),p.nc(12,f,2,1,"span",9),p.oc(13),p.Lb(14,"span",10),p.oc(15),p.Wb(16,"timeFormat"),p.Kb(),p.Kb(),p.Lb(17,"h5"),p.Lb(18,"button",11),p.Rb("click",(function(){return p.kc(n),p.Vb().playAlbum()})),p.Jb(19,"span",12),p.oc(20," Play "),p.Lb(21,"span",13),p.oc(22,"album"),p.Kb(),p.Kb(),p.oc(23,"\xa0\xa0\xa0 "),p.Lb(24,"button",14),p.Rb("click",(function(){return p.kc(n),p.Vb().addToQueue()})),p.Jb(25,"span",15),p.oc(26," queue "),p.Lb(27,"span",13),p.oc(28,"album"),p.Kb(),p.Kb(),p.Kb(),p.Kb(),p.Kb(),p.Kb(),p.Kb(),p.Lb(29,"div",3),p.Lb(30,"div",16),p.Lb(31,"div",17),p.nc(32,x,3,2,"ol",18),p.nc(33,I,6,0,"div",9),p.Kb(),p.Kb(),p.Kb(),p.Kb()}if(2&i){var a=p.Vb();p.xb(1),p.bc("ngClass",p.ec(15,C,a.isShrunk)),p.xb(3),p.bc("ngClass",p.ec(17,C,a.isShrunk)),p.xb(1),p.bc("album",a.album.name)("artist",a.album.artist.albumArtist||a.album.artist.name),p.xb(1),p.bc("ngClass",p.ec(19,C,a.isShrunk)),p.xb(2),p.pc(a.album.name),p.xb(2),p.qc(" ",a.album.artist.albumArtist||a.album.artist.name," "),p.xb(2),p.bc("ngIf",a.album.year&&0!==a.album.year),p.xb(1),p.qc(" songs: ",a.album.tracks.length," "),p.xb(2),p.rc(" \u2022 ",p.Xb(16,13,a.totalRunningTime())," \u2022 ",a.album.type,""),p.xb(17),p.bc("ngForOf",a.album.sortedDiscs),p.xb(1),p.bc("ngIf","flac"===a.album.type&&!a.isFlacSupported)}}var A,F,O,J=[{path:"",component:(A=function(){function n(t,a,s,e,c,b){var o=this;i(this,n),this.coreService=t,this.router=a,this.pathService=s,this.playerService=e,this.route=c,this.configService=b,this.ownPlaylists=[],this.albumName="",this.artistName="",this.isSwiping=!1,this.isShrunk=!1,this.isFlacSupported=!0,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe((function(i){o.ngOnInit()})),this.artistName=decodeURIComponent(this.route.snapshot.params.artist),this.albumName=decodeURIComponent(this.route.snapshot.params.album),this.route.params.subscribe((function(i){o.artistName=decodeURIComponent(i.artist),o.albumName=decodeURIComponent(i.album),o.ngOnInit()})),this.theme=b.mode}var a,s,e;return a=n,(s=[{key:"ngOnInit",value:function(){var i=this;if(this.album=this.core.albums[this.artistName+"|"+this.albumName],this.album){this.album.sortedDiscs=[];var t=Object.keys(this.album.discs),n=[];t.forEach((function(i){var t=i.substring(5);n.push({nr:t,id:i})})),(n=n.sort((function(i,t){return i.nr<t.nr?-1:1}))).forEach((function(t){i.album.sortedDiscs.push(i.album.discs[t.id])})),this.pathService.announcePath({artist:this.album.artist,album:this.album,letter:this.album.artist.letter})}if(this.ownPlaylists=[],localStorage.getItem("customlisttest")){var a=JSON.parse(localStorage.getItem("customlisttest"));a&&a.forEach((function(t){var n=new o.a;n.isOwn=!0,n.name=t.name,n.tracks=t.tracks,i.ownPlaylists.push(n)}))}var s=document.querySelector("audio").canPlayType("audio/flac");this.isFlacSupported="probably"===s||"maybe"===s}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onSelect",value:function(i,t){this.isSwiping||this.playerService.doPlayAlbum(this.album,this.album.tracks.indexOf(i),!0,!1)}},{key:"playAlbum",value:function(){this.isSwiping||this.playerService.doPlayAlbum(this.album,0,!0,!1)}},{key:"addToQueue",value:function(){this.isSwiping||this.playerService.doQueueAlbum(this.album)}},{key:"navigateToArtist",value:function(i){this.router.navigate(["Artist",{letter:i.letter.escapedLetter,artist:i.sortName}])}},{key:"swipe",value:function(i,t,n){var a=this;n.preventDefault(),this.isSwiping=!0,setTimeout((function(){a.isSwiping=!1}),5),i.showActions=t}},{key:"totalRunningTime",value:function(){var i=0;return this.album.tracks.forEach((function(t){i+=t.duration})),i}},{key:"onScroll",value:function(i){this.isShrunk=window.scrollY>50}}])&&t(a.prototype,s),e&&t(a,e),n}(),A.\u0275fac=function(i){return new(i||A)(p.Ib(u.a),p.Ib(b.c),p.Ib(m.a),p.Ib(r.a),p.Ib(b.a),p.Ib(l.a))},A.\u0275cmp=p.Cb({type:A,selectors:[["app-album-detail"]],hostBindings:function(i,t){1&i&&p.Rb("scroll",(function(i){return t.onScroll(i)}),!1,p.jc)},decls:1,vars:1,consts:[["class","animated-page",4,"ngIf"],[1,"animated-page"],[1,"jumbotron","theme-light",3,"ngClass"],[1,"container"],[1,"row","albumdetail"],[1,"col-4","col-md-3","col-lg-2",3,"ngClass"],[3,"album","artist"],[1,"col-8","col-md-9","col-lg-10",3,"ngClass"],[1,"d-none","d-sm-block"],[4,"ngIf"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary",3,"click"],[1,"glyph","glyph-play"],[1,"d-none","d-md-inline"],[1,"btn","btn-secondary",3,"click"],[1,"glyph","glyph-music-info"],[1,"row"],[1,"col"],["class","list-group list-tracks",4,"ngFor","ngForOf"],[1,"list-group","list-tracks"],["class","list-items-row disc-row header-seperator",3,"ngClass",4,"ngIf"],["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-items-row","disc-row","header-seperator",3,"ngClass"],[1,"list-group-item",3,"ngClass"],[1,"details","row",3,"click"],[1,"col-2","col-sm-1"],[1,"col-7","col-sm-10"],[1,"small","muted","color-type-secondary"],[1,"col-3","col-sm-1","text-right"],[1,"glyph","glyph-pause"],[1,"alert","alert-warning"]],template:function(i,t){1&i&&p.nc(0,P,34,21,"div",0),2&i&&p.bc("ngIf",t.album)},directives:[e.k,e.i,e.j],pipes:[h.a],encapsulation:2}),A)}],V=((O=function t(){i(this,t)}).\u0275mod=p.Gb({type:O}),O.\u0275inj=p.Fb({factory:function(i){return new(i||O)},imports:[[b.e.forChild(J)],b.e]}),O),q=((F=function t(){i(this,t)}).\u0275mod=p.Gb({type:F}),F.\u0275inj=p.Fb({factory:function(i){return new(i||F)},imports:[[e.b,V,c.a]]}),F)}}])}();