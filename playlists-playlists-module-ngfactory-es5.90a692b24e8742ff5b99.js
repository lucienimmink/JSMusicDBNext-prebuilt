(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"6bSv":function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),s=function(){return function(){}}(),i=u("pMnS"),a=u("Ip0R"),r=u("Z3YK"),e=u("Oz9T"),c=u("ufXC"),o=u("ZYCi"),b=u("gIcY"),p=u("OgP6"),g=u("ktVm"),f=u("t083"),h=u("XtVx"),y=u("KI15"),m=u("Gcu2"),d=function(){function l(l,n,u,t,s,i,a){var r=this;this.pathService=l,this.coreService=n,this.router=u,this.playerService=t,this.lastfmservice=s,this.configService=i,this.playlistService=a,this.loading=!1,this.username=localStorage.getItem("lastfm-username"),this.showStartingArtist=!1,this.ownPlaylists=[],this.artists=[];var e=this.playerService.getCurrentPlaylist();e&&(this.currentPlaylist=e.playlist,this.trackIndex=e.startIndex,this.setTrack()),this.subscription=this.playerService.playlistAnnounced$.subscribe(function(l){r.currentPlaylist=l.playlist,r.trackIndex=l.startIndex,r.setTrack()}),this.core=this.coreService.getCore(),this.subscription2=this.core.coreParsed$.subscribe(function(l){r.ngOnInit()}),this.theme=i.mode,this.newPlaylist=new y.a}return l.prototype.setTrack=function(){this.track=this.currentPlaylist.tracks[this.trackIndex],this.track&&(this.track.position=0)},l.prototype.ngOnInit=function(){var l=this;if(this.pathService.announcePage("Playlists"),this.artists=this.core.artistsList(),this.ownPlaylists=[],localStorage.getItem("customlisttest")){var n=JSON.parse(localStorage.getItem("customlisttest"));n&&n.forEach(function(n){var u=new y.a;u.name=n.name,u.isOwn=!0,n.tracks.forEach(function(n){var t=l.core.getTrackById(n);t&&t.title&&u.tracks.push(t)}),l.ownPlaylists.push(u)})}},l.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.subscription2.unsubscribe()},l.prototype.setPlaylist=function(l){var n=this;this.loading=!0,this.showStartingArtist=!1,"current"===l?(this.playlist=this.currentPlaylist,this.loading=!1):"last.fm"===l?this.lastfmservice.getLovedTracks(this.username).subscribe(function(l){n.playlist=n.playlistService.extractTracks(l.lovedtracks.track),n.loading=!1}):"random"===l?(this.playlist=this.playlistService.generateRandom(),this.playlist.isContinues=!0,this.playlist.type=l,this.loading=!1):"radio"===l?this.playlist=this.generateRadio():"artist"===l?this.askForStartingArtist():l instanceof y.a?(this.playlist=l,this.loading=!1):console.info("unknown playlist",l)},l.prototype.generateRadio=function(){var l=this;this.lastfmservice.getTopArtists(this.username).subscribe(function(n){l.playlist=l.playlistService.extractArtists(n=n.topartists.artist),l.playlist.isContinues=!0,l.playlist.type="radio",l.loading=!1})},l.prototype.onChange=function(){var l=this.core.getArtistByName(this.startingArtistName),n=new y.a;n.name="Artist radio for "+l.name,n.tracks=[this.playlistService.getRandomTrackFromList([l])],this.showStartingArtist=!1,this.playlist=n,this.getNextSimilairArtist(l,this.playlist)},l.prototype.getNextSimilairArtist=function(l,n){var u=this;this.loading=!0,this.lastfmservice.getSimilairArtists(l).subscribe(function(l){l=l.similarartists.artist,u.loading=!1;var t=[];if(l.forEach(function(l){var n=u.core.getArtistByName(l.name);n&&t.push(n)}),t.length>0){var s=u.playlistService.getNextTrackForPlaylist(t,n);s&&n.tracks.length<u.playlistService.numberOfTracksInAPlaylist&&(n.tracks.push(s),u.getNextSimilairArtist(s.artist,n))}})},l.prototype.askForStartingArtist=function(){this.loading=!1,this.playlist=null,this.showStartingArtist=!0},l}(),k=t.ob({encapsulation:2,styles:[],data:{}});function v(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("current")&&t),t},null,null)),(l()(),t.Jb(-1,null,["Current playlist"]))],null,null)}function C(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("last.fm")&&t),t},null,null)),(l()(),t.Jb(-1,null,["Loved tracks on last.fm"]))],null,null)}function q(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("radio")&&t),t},null,null)),(l()(),t.Jb(1,null,[""," tracks by preference"]))],null,function(l,n){l(n,1,0,n.component.playlistService.numberOfTracksInAPlaylist)})}function I(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,3,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist(l.context.$implicit)&&t),t},null,null)),(l()(),t.Jb(2,null,[""," "])),(l()(),t.qb(3,0,null,null,1,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.removePlaylist(l.context.$implicit)&&t),t},null,null)),(l()(),t.qb(4,0,null,null,0,"span",[["class","glyph glyph-delete"]],null,null,null,null,null))],null,function(l,n){l(n,2,0,n.context.$implicit.name)})}function L(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"p",[["class","small muted"]],null,null,null,null,null)),(l()(),t.Jb(1,null,["Tracks found: ",""]))],null,function(l,n){l(n,1,0,n.component.playlist.tracks.length)})}function S(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,9,"div",[["class","col-12 col-lg-9 offset-lg-3"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,L)),t.pb(3,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(4,0,null,null,5,"div",[["class","progress-bar"]],null,null,null,null,null)),(l()(),t.qb(5,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.qb(6,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.qb(7,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.qb(8,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,0,"div",[["class","progress-circle"]],null,null,null,null,null))],function(l,n){var u=n.component;l(n,3,0,u.playlist&&u.playlist.tracks&&u.playlist.tracks.length>0)},null)}function A(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0,s=l.component;return"click"===n&&(t=!1!==s.updatePlaylist(s.playlist)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"span",[["class","glyph glyph-edit small"]],null,null,null,null,null))],null,null)}function P(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"a",[],null,[[null,"click"]],function(l,n,u){var t=!0,s=l.component;return"click"===n&&(t=!1!==s.removePlaylist(s.playlist)&&t),t},null,null)),(l()(),t.qb(1,0,null,null,0,"span",[["class","glyph glyph-delete small"]],null,null,null,null,null))],null,null)}function O(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"mdb-tracklist",[],null,null,null,r.b,r.a)),t.pb(1,49152,null,0,e.a,[c.a],{playlist:[0,"playlist"]},null)],function(l,n){l(n,1,0,n.component.playlist)},null)}function w(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,2,"div",[["class","animated-page"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,O)),t.pb(2,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,2,0,!n.component.loading)},null)}function J(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,20,"div",[["class","animated-page"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,19,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,18,"div",[["class","col"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,17,"p",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,[" Unfortunately this playlist is empty :( "])),(l()(),t.qb(5,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Find some tracks from an "])),(l()(),t.qb(7,0,null,null,3,"a",[["routerLink","/artists"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var s=!0;return"click"===n&&(s=!1!==t.Cb(l,8).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&s),s},null,null)),t.pb(8,671744,null,0,o.l,[o.k,o.a,a.h],{routerLink:[0,"routerLink"]},null),(l()(),t.qb(9,0,null,null,0,"span",[["class","glyph glyph-people"]],null,null,null,null,null)),(l()(),t.Jb(-1,null,[" artist"])),(l()(),t.Jb(-1,null,[", "])),(l()(),t.qb(12,0,null,null,3,"a",[["routerLink","/albums"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var s=!0;return"click"===n&&(s=!1!==t.Cb(l,13).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&s),s},null,null)),t.pb(13,671744,null,0,o.l,[o.k,o.a,a.h],{routerLink:[0,"routerLink"]},null),(l()(),t.qb(14,0,null,null,0,"span",[["class","glyph glyph-music-album"]],null,null,null,null,null)),(l()(),t.Jb(-1,null,[" album"])),(l()(),t.Jb(-1,null,[" or a "])),(l()(),t.qb(17,0,null,null,3,"a",[["routerLink","/years"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(l,n,u){var s=!0;return"click"===n&&(s=!1!==t.Cb(l,18).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&s),s},null,null)),t.pb(18,671744,null,0,o.l,[o.k,o.a,a.h],{routerLink:[0,"routerLink"]},null),(l()(),t.qb(19,0,null,null,0,"span",[["class","glyph glyph-calendar"]],null,null,null,null,null)),(l()(),t.Jb(-1,null,[" year"]))],function(l,n){l(n,8,0,"/artists"),l(n,13,0,"/albums"),l(n,18,0,"/years")},function(l,n){l(n,7,0,t.Cb(n,8).target,t.Cb(n,8).href),l(n,12,0,t.Cb(n,13).target,t.Cb(n,13).href),l(n,17,0,t.Cb(n,18).target,t.Cb(n,18).href)})}function x(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,14,"div",[["class","col-12 col-lg-9 offset-lg-3"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,9,"h4",[["class","playlists-header"]],null,null,null,null,null)),(l()(),t.Jb(2,null,[" "," "])),(l()(),t.qb(3,0,null,null,1,"span",[["class","small muted color-type-secondary"]],null,null,null,null,null)),(l()(),t.Jb(4,null,["(",")"])),(l()(),t.Jb(-1,null,[" \xa0 "])),(l()(),t.gb(16777216,null,null,1,null,A)),t.pb(7,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.Jb(-1,null,[" \xa0 "])),(l()(),t.gb(16777216,null,null,1,null,P)),t.pb(10,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,w)),t.pb(12,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,J)),t.pb(14,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,7,0,u.playlist.isOwn),l(n,10,0,u.playlist.isOwn),l(n,12,0,u.playlist&&u.playlist.tracks&&0!==u.playlist.tracks.length),l(n,14,0,u.playlist&&u.playlist.tracks&&0===u.playlist.tracks.length)},function(l,n){var u=n.component;l(n,2,0,u.playlist.name),l(n,4,0,u.playlist.tracks.length)})}function T(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,3,"option",[],null,null,null,null,null)),t.pb(1,147456,null,0,b.l,[t.k,t.D,[2,b.p]],null,null),t.pb(2,147456,null,0,b.s,[t.k,t.D,[8,null]],null,null),(l()(),t.Jb(3,null,["",""]))],null,function(l,n){l(n,3,0,n.context.$implicit.name)})}function F(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,22,"div",[["class","col-12 col-lg-9 offset-lg-3"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"h4",[["class","header-seperator"],["sticky",""]],null,null,null,null,null)),(l()(),t.Jb(-1,null,[" Select an artist as starting point "])),(l()(),t.qb(3,0,null,null,19,"form",[["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var s=!0;return"submit"===n&&(s=!1!==t.Cb(l,8).onSubmit(u)&&s),"reset"===n&&(s=!1!==t.Cb(l,8).onReset()&&s),s},null,null)),t.Gb(512,null,a.u,a.v,[t.s,t.t,t.k,t.D]),t.pb(5,278528,null,0,a.i,[a.u],{ngClass:[0,"ngClass"]},null),t.Eb(6,{"theme-alt":0}),t.pb(7,16384,null,0,b.t,[],null,null),t.pb(8,4210688,[["sortForm",4]],0,b.j,[[8,null],[8,null]],null,null),t.Gb(2048,null,b.b,null,[b.j]),t.pb(10,16384,null,0,b.i,[[4,b.b]],null,null),(l()(),t.qb(11,0,null,null,11,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),t.qb(12,0,null,null,1,"label",[["class","col-12 col-sm-3 col-form-label"],["for","sort"]],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Select an artist"])),(l()(),t.qb(14,0,null,null,8,"div",[["class","col col-sm-9"]],null,null,null,null,null)),(l()(),t.qb(15,0,null,null,7,"select",[["class","form-control"],["id","sort"],["name","sort"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,u){var s=!0,i=l.component;return"change"===n&&(s=!1!==t.Cb(l,16).onChange(u.target.value)&&s),"blur"===n&&(s=!1!==t.Cb(l,16).onTouched()&&s),"ngModelChange"===n&&(s=!1!==(i.startingArtistName=u)&&s),"ngModelChange"===n&&(s=!1!==i.onChange(u)&&s),s},null,null)),t.pb(16,16384,null,0,b.p,[t.D,t.k],null,null),t.Gb(1024,null,b.f,function(l){return[l]},[b.p]),t.pb(18,671744,[["name",4]],0,b.k,[[2,b.b],[8,null],[8,null],[6,b.f]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,b.g,null,[b.k]),t.pb(20,16384,null,0,b.h,[[4,b.g]],null,null),(l()(),t.gb(16777216,null,null,1,null,T)),t.pb(22,278528,null,0,a.j,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var u=n.component,t=l(n,6,0,"dark"===u.theme);l(n,5,0,t),l(n,18,0,"sort",u.startingArtistName),l(n,22,0,u.artists)},function(l,n){l(n,3,0,t.Cb(n,10).ngClassUntouched,t.Cb(n,10).ngClassTouched,t.Cb(n,10).ngClassPristine,t.Cb(n,10).ngClassDirty,t.Cb(n,10).ngClassValid,t.Cb(n,10).ngClassInvalid,t.Cb(n,10).ngClassPending),l(n,15,0,t.Cb(n,20).ngClassUntouched,t.Cb(n,20).ngClassTouched,t.Cb(n,20).ngClassPristine,t.Cb(n,20).ngClassDirty,t.Cb(n,20).ngClassValid,t.Cb(n,20).ngClassInvalid,t.Cb(n,20).ngClassPending)})}function K(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,28,"div",[["class","animated-page"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,27,"div",[["class","container"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,26,"div",[["class","row"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,19,"div",[["class","col-12 col-lg-3 playlists-lg-fixed"]],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Playlists"])),(l()(),t.qb(6,0,null,null,16,"ul",[["class","nav flex-column"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,v)),t.pb(8,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(9,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,C)),t.pb(11,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(12,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("random")&&t),t},null,null)),(l()(),t.Jb(14,null,[""," random tracks"])),(l()(),t.qb(15,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,q)),t.pb(17,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.qb(18,0,null,null,2,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(19,0,null,null,1,"a",[["class","btn btn-link px-0"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.setPlaylist("artist")&&t),t},null,null)),(l()(),t.Jb(-1,null,["Artist radio"])),(l()(),t.gb(16777216,null,null,1,null,I)),t.pb(22,278528,null,0,a.j,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.gb(16777216,null,null,1,null,S)),t.pb(24,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,x)),t.pb(26,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,F)),t.pb(28,16384,null,0,a.k,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,8,0,u.currentPlaylist),l(n,11,0,u.username&&"mdb-skipped"!==u.username),l(n,17,0,u.username&&"mdb-skipped"!==u.username),l(n,22,0,u.ownPlaylists),l(n,24,0,u.loading),l(n,26,0,u.playlist&&!u.loading&&!u.showStartingArtist),l(n,28,0,u.showStartingArtist&&!u.loading&&!u.playlist)},function(l,n){l(n,14,0,n.component.playlistService.numberOfTracksInAPlaylist)})}function N(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"app-playlists",[],null,null,null,K,k)),t.pb(1,245760,null,0,d,[h.a,g.a,o.k,c.a,f.a,p.a,m.a],null,null)],function(l,n){l(n,1,0)},null)}var D=t.mb("app-playlists",d,N,{},{},[]),G=function(){return function(){}}(),j=u("hDf6");u.d(n,"PlaylistsModuleNgFactory",function(){return M});var M=t.nb(s,[],function(l){return t.zb([t.Ab(512,t.j,t.Z,[[8,[i.a,D]],[3,t.j],t.x]),t.Ab(4608,a.m,a.l,[t.u,[2,a.z]]),t.Ab(4608,b.r,b.r,[]),t.Ab(1073742336,a.b,a.b,[]),t.Ab(1073742336,o.m,o.m,[[2,o.r],[2,o.k]]),t.Ab(1073742336,G,G,[]),t.Ab(1073742336,j.a,j.a,[]),t.Ab(1073742336,b.q,b.q,[]),t.Ab(1073742336,b.d,b.d,[]),t.Ab(1073742336,s,s,[]),t.Ab(256,t.u,"en-GB",[]),t.Ab(1024,o.i,function(){return[[{path:"",component:d}]]},[])])})}}]);