(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{jJnS:function(t,i,s){"use strict";s.r(i),s.d(i,"AlbumDetailModule",(function(){return A}));var n=s("ofXK"),c=s("hDf6"),a=s("tyNb"),b=(s("hR/0"),s("KI15")),e=s("ufXC"),o=s("OgP6"),r=s("ktVm"),l=s("XtVx"),u=s("fXoL"),m=s("cpgm");function p(t,i){if(1&t&&(u.Lb(0,"span"),u.oc(1),u.Kb()),2&t){const t=u.Vb(2);u.xb(1),u.qc("",t.album.year," \u2022 ")}}const h=function(t){return{"first-disc":t}};function d(t,i){if(1&t&&(u.Lb(0,"li",22),u.oc(1),u.Kb()),2&t){const t=u.Vb().$implicit;u.bc("ngClass",u.ec(2,h,1==t[0].disc)),u.xb(1),u.qc(" Disc ",t[0].disc," ")}}function g(t,i){if(1&t&&(u.Lb(0,"span"),u.oc(1),u.Kb()),2&t){const t=u.Vb().$implicit;u.xb(1),u.pc(t.number)}}function f(t,i){1&t&&(u.Lb(0,"span"),u.Jb(1,"span",29),u.Kb())}function y(t,i){1&t&&(u.Lb(0,"span"),u.Jb(1,"span",12),u.Kb())}function L(t,i){if(1&t&&(u.Lb(0,"span"),u.Jb(1,"br"),u.Lb(2,"span",27),u.oc(3),u.Kb(),u.Kb()),2&t){const t=u.Vb().$implicit;u.xb(3),u.pc(t.type)}}function K(t,i){if(1&t&&(u.Lb(0,"span"),u.Jb(1,"br"),u.Lb(2,"span",27),u.oc(3),u.Wb(4,"timeFormat"),u.Kb(),u.Kb()),2&t){const t=u.Vb().$implicit;u.xb(3),u.qc(" ",u.Xb(4,1,t.position)," \xa0 ")}}const w=function(t,i,s){return{active:t,showActions:i,hq:s}};function v(t,i){if(1&t){const t=u.Mb();u.Lb(0,"li",23),u.Lb(1,"div",24),u.Rb("click",(function(s){u.kc(t);const n=i.$implicit;return u.Vb(3).onSelect(n,s)})),u.Lb(2,"div",25),u.nc(3,g,2,1,"span",9),u.nc(4,f,2,0,"span",9),u.nc(5,y,2,0,"span",9),u.Kb(),u.Lb(6,"div",26),u.oc(7),u.Jb(8,"br"),u.Lb(9,"span",27),u.oc(10),u.Kb(),u.Kb(),u.Lb(11,"div",28),u.oc(12),u.Wb(13,"timeFormat"),u.nc(14,L,4,1,"span",9),u.nc(15,K,5,3,"span",9),u.Kb(),u.Kb(),u.Kb()}if(2&t){const t=i.$implicit,s=u.Vb(3);u.bc("ngClass",u.gc(11,w,t.isPlaying||t.isPaused,t.showActions,"flac"===t.type)),u.xb(3),u.bc("ngIf",!t.isPlaying&&!t.isPaused&&0!==t.number),u.xb(1),u.bc("ngIf",!t.isPlaying&&t.isPaused),u.xb(1),u.bc("ngIf",t.isPlaying&&!t.isPaused),u.xb(2),u.qc(" ",t.title," "),u.xb(3),u.qc(" ",t.trackArtist," "),u.xb(2),u.qc(" ",u.Xb(13,9,t.duration)," "),u.xb(2),u.bc("ngIf","mixed"===s.album.type&&!t.isPlaying),u.xb(1),u.bc("ngIf",t.isPlaying)}}function S(t,i){if(1&t&&(u.Lb(0,"ol",19),u.nc(1,d,2,4,"li",20),u.nc(2,v,16,15,"li",21),u.Kb()),2&t){const t=i.$implicit,s=u.Vb(2);u.xb(1),u.bc("ngIf",s.album.sortedDiscs.length>1),u.xb(1),u.bc("ngForOf",t)}}function k(t,i){1&t&&(u.Lb(0,"div"),u.Jb(1,"br"),u.Lb(2,"div",30),u.Lb(3,"strong"),u.oc(4,"Warning!"),u.Kb(),u.oc(5," This album cannot be played since FLAC support is lacking."),u.Kb(),u.Kb())}const x=function(t){return{shrunk:t}};function I(t,i){if(1&t){const t=u.Mb();u.Lb(0,"div",1),u.Lb(1,"div",2),u.Lb(2,"div",3),u.Lb(3,"div",4),u.Lb(4,"div",5),u.Jb(5,"album-art",6),u.Kb(),u.Lb(6,"div",7),u.Lb(7,"h2"),u.oc(8),u.Kb(),u.Lb(9,"h3",8),u.oc(10),u.Kb(),u.Lb(11,"h4"),u.nc(12,p,2,1,"span",9),u.oc(13),u.Lb(14,"span",10),u.oc(15),u.Wb(16,"timeFormat"),u.Kb(),u.Kb(),u.Lb(17,"h5"),u.Lb(18,"button",11),u.Rb("click",(function(){return u.kc(t),u.Vb().playAlbum()})),u.Jb(19,"span",12),u.oc(20," Play "),u.Lb(21,"span",13),u.oc(22,"album"),u.Kb(),u.Kb(),u.oc(23,"\xa0\xa0\xa0 "),u.Lb(24,"button",14),u.Rb("click",(function(){return u.kc(t),u.Vb().addToQueue()})),u.Jb(25,"span",15),u.oc(26," queue "),u.Lb(27,"span",13),u.oc(28,"album"),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Lb(29,"div",3),u.Lb(30,"div",16),u.Lb(31,"div",17),u.nc(32,S,3,2,"ol",18),u.nc(33,k,6,0,"div",9),u.Kb(),u.Kb(),u.Kb(),u.Kb()}if(2&t){const t=u.Vb();u.xb(1),u.bc("ngClass",u.ec(15,x,t.isShrunk)),u.xb(3),u.bc("ngClass",u.ec(17,x,t.isShrunk)),u.xb(1),u.bc("album",t.album.name)("artist",t.album.artist.albumArtist||t.album.artist.name),u.xb(1),u.bc("ngClass",u.ec(19,x,t.isShrunk)),u.xb(2),u.pc(t.album.name),u.xb(2),u.qc(" ",t.album.artist.albumArtist||t.album.artist.name," "),u.xb(2),u.bc("ngIf",t.album.year&&0!==t.album.year),u.xb(1),u.qc(" songs: ",t.album.tracks.length," "),u.xb(2),u.rc(" \u2022 ",u.Xb(16,13,t.totalRunningTime())," \u2022 ",t.album.type,""),u.xb(17),u.bc("ngForOf",t.album.sortedDiscs),u.xb(1),u.bc("ngIf","flac"===t.album.type&&!t.isFlacSupported)}}const C=[{path:"",component:(()=>{class t{constructor(t,i,s,n,c,a){this.coreService=t,this.router=i,this.pathService=s,this.playerService=n,this.route=c,this.configService=a,this.ownPlaylists=[],this.albumName="",this.artistName="",this.isSwiping=!1,this.isShrunk=!1,this.isFlacSupported=!0,this.core=this.coreService.getCore(),this.subscription=this.core.coreParsed$.subscribe(t=>{this.ngOnInit()}),this.artistName=decodeURIComponent(this.route.snapshot.params.artist),this.albumName=decodeURIComponent(this.route.snapshot.params.album),this.route.params.subscribe(t=>{this.artistName=decodeURIComponent(t.artist),this.albumName=decodeURIComponent(t.album),this.ngOnInit()}),this.theme=a.mode}ngOnInit(){if(this.album=this.core.albums[this.artistName+"|"+this.albumName],this.album){this.album.sortedDiscs=[];const t=Object.keys(this.album.discs);let i=[];t.forEach(t=>{const s=t.substring(5);i.push({nr:s,id:t})}),i=i.sort((t,i)=>t.nr<i.nr?-1:1),i.forEach(t=>{this.album.sortedDiscs.push(this.album.discs[t.id])}),this.pathService.announcePath({artist:this.album.artist,album:this.album,letter:this.album.artist.letter})}if(this.ownPlaylists=[],localStorage.getItem("customlisttest")){const t=JSON.parse(localStorage.getItem("customlisttest"));t&&t.forEach(t=>{const i=new b.a;i.isOwn=!0,i.name=t.name,i.tracks=t.tracks,this.ownPlaylists.push(i)})}const t=document.querySelector("audio").canPlayType("audio/flac");this.isFlacSupported="probably"===t||"maybe"===t}ngOnDestroy(){this.subscription.unsubscribe()}onSelect(t,i){this.isSwiping||this.playerService.doPlayAlbum(this.album,this.album.tracks.indexOf(t),!0,!1)}playAlbum(){this.isSwiping||this.playerService.doPlayAlbum(this.album,0,!0,!1)}addToQueue(){this.isSwiping||this.playerService.doQueueAlbum(this.album)}navigateToArtist(t){this.router.navigate(["Artist",{letter:t.letter.escapedLetter,artist:t.sortName}])}swipe(t,i,s){s.preventDefault(),this.isSwiping=!0,setTimeout(()=>{this.isSwiping=!1},5),t.showActions=i}totalRunningTime(){let t=0;return this.album.tracks.forEach(i=>{t+=i.duration}),t}onScroll(t){this.isShrunk=window.scrollY>50}}return t.\u0275fac=function(i){return new(i||t)(u.Ib(r.a),u.Ib(a.c),u.Ib(l.a),u.Ib(e.a),u.Ib(a.a),u.Ib(o.a))},t.\u0275cmp=u.Cb({type:t,selectors:[["app-album-detail"]],hostBindings:function(t,i){1&t&&u.Rb("scroll",(function(t){return i.onScroll(t)}),!1,u.jc)},decls:1,vars:1,consts:[["class","animated-page",4,"ngIf"],[1,"animated-page"],[1,"jumbotron","theme-light",3,"ngClass"],[1,"container"],[1,"row","albumdetail"],[1,"col-4","col-md-3","col-lg-2",3,"ngClass"],[3,"album","artist"],[1,"col-8","col-md-9","col-lg-10",3,"ngClass"],[1,"d-none","d-sm-block"],[4,"ngIf"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary",3,"click"],[1,"glyph","glyph-play"],[1,"d-none","d-md-inline"],[1,"btn","btn-secondary",3,"click"],[1,"glyph","glyph-music-info"],[1,"row"],[1,"col"],["class","list-group list-tracks",4,"ngFor","ngForOf"],[1,"list-group","list-tracks"],["class","list-items-row disc-row header-seperator",3,"ngClass",4,"ngIf"],["class","list-group-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"list-items-row","disc-row","header-seperator",3,"ngClass"],[1,"list-group-item",3,"ngClass"],[1,"details","row",3,"click"],[1,"col-2","col-sm-1"],[1,"col-7","col-sm-10"],[1,"small","muted","color-type-secondary"],[1,"col-3","col-sm-1","text-right"],[1,"glyph","glyph-pause"],[1,"alert","alert-warning"]],template:function(t,i){1&t&&u.nc(0,I,34,21,"div",0),2&t&&u.bc("ngIf",i.album)},directives:[n.k,n.i,n.j],pipes:[m.a],encapsulation:2}),t})()}];let P=(()=>{class t{}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(i){return new(i||t)},imports:[[a.e.forChild(C)],a.e]}),t})(),A=(()=>{class t{}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(i){return new(i||t)},imports:[[n.b,P,c.a]]}),t})()}}]);